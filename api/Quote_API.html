

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>行情API &mdash; futu-api-doc 3.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="futu-api-doc 3.18 documentation" href="../index.html"/>
        <link rel="next" title="交易API" href="Trade_API.html"/>
        <link rel="prev" title="基础API" href="Base_API.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> futu-api-doc
          

          
          </a>

          
            
            
              <div class="version">
                3.18
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">基础</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/FutuOpenDGuide.html">FutuOpenD使用说明</a></li>
</ul>
<p class="caption"><span class="caption-text">PROTOCOL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../protocol/intro.html">协议接口</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/base_define.html">基础定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/quote_protocol.html">行情协议</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/trade_protocol.html">交易协议</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="Base_API.html">基础API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">行情API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">一分钟上手</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">接口类对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openquotecontext">OpenQuoteContext - 行情上下文</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#init">__init__</a></li>
<li class="toctree-l4"><a class="reference internal" href="#close">close</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stop">stop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-handler">set_handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trading-days"><span class="strike">get_trading_days</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-basicinfo">get_stock_basicinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-multiple-history-kline"><span class="strike">get_multiple_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-history-kline"><span class="strike">get_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-history-kline">request_history_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-autype-list"><span class="strike">get_autype_list</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-market-snapshot">get_market_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-data">get_rt_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-stock">get_plate_stock</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-list">get_plate_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-broker-queue">get_broker_queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsubscribe">unsubscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">unsubscribe_all</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-subscription">query_subscription</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-global-state">get_global_state</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-quote">get_stock_quote</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-ticker">get_rt_ticker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cur-kline">get_cur_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-order-book">get_order_book</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-multi-points-history-kline"><span class="strike">get_multi_points_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-referencestock-list">get_referencestock_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-owner-plate">get_owner_plate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-holding-change-list">get_holding_change_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-option-chain">get_option_chain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-history-kl-quota">get_history_kl_quota</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rehab">get_rehab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-warrant">get_warrant</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-flow">get_capital_flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-distribution">get_capital_distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-user-security">get_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modify-user-security">modify_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-filter">get_stock_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-ipo-list">get_ipo_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-future-info">get_future_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-trading-days">request_trading_days</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sysnotifyhandlerbase-opend">SysNotifyHandlerBase - OpenD通知回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-recv-rsp">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stockquotehandlerbase">StockQuoteHandlerBase - 实时报价回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#orderbookhandlerbase">OrderBookHandlerBase - 实时摆盘回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#curklinehandlerbase-k">CurKlineHandlerBase - 实时k线推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tickerhandlerbase">TickerHandlerBase - 实时逐笔推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rtdatahandlerbase">RTDataHandlerBase - 实时分时推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#brokerhandlerbase">BrokerHandlerBase - 实时经纪推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">on_recv_rsp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Trade_API.html">交易API</a></li>
</ul>
<p class="caption"><span class="caption-text">.Net API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../net/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">.Java API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">CPP API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/base.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/qot.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/trd.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">JavaScript API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javascript/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">Q&amp;A</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../q&amp;a/Q&amp;A.html">Q&amp;A</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">futu-api-doc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>行情API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/Quote_API.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="api">
<h1>行情API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div></div></blockquote>
<div class="section" id="id1">
<h2>一分钟上手<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>如下范例，创建api行情对象，调用get_market_snapshot获取港股腾讯00700的报价快照数据,最后关闭对象</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id2">
<h2>接口类对象<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="openquotecontext">
<h3>OpenQuoteContext - 行情上下文<a class="headerlink" href="#openquotecontext" title="Permalink to this headline">¶</a></h3>
<div class="section" id="init">
<h4>__init__<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">host='127.0.0.1'</em>, <em class="sig-param">port=11111</em>, <em class="sig-param">is_encrypt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>构造函数</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> – str FutuOpenD监听的IP地址</p></li>
<li><p><strong>port</strong> – int FutuOpenD监听的IP端口</p></li>
<li><p><strong>is_encrypt</strong> – bool 是否启用加密。默认为None，表示使用 <a class="reference external" href="Base_API.html#enable_proto_encrypt">SysConfig.enable_proto_encrypt</a> 的设置。</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">,</span> <span class="n">is_encrypt</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="close">
<h4>close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>关闭上下文对象。默认情况下，futu-api内部创建的线程会阻止进程退出，只有当所有context都close后，进程才能正常退出。但通过SysConfig.set_all_thread_daemon可以设置所有内部线程为daemon线程，这时即使没有调用context的close，进程也可以正常退出。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="start">
<h4>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>启动异步接收推送数据</p>
</div>
<div class="section" id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>停止异步接收推送数据</p>
</div>
<div class="section" id="set-handler">
<h4>set_handler<a class="headerlink" href="#set-handler" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="set_handler">
<code class="sig-name descname">set_handler</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">handler</em><span class="sig-paren">)</span><a class="headerlink" href="#set_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>设置异步回调处理对象</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> – <p>回调处理对象，必须是以下类的子类实例</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>类名</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SysNotifyHandlerBase</p></td>
<td><p>OpenD通知处理基类</p></td>
</tr>
<tr class="row-odd"><td><p>StockQuoteHandlerBase</p></td>
<td><p>报价处理基类</p></td>
</tr>
<tr class="row-even"><td><p>OrderBookHandlerBase</p></td>
<td><p>摆盘处理基类</p></td>
</tr>
<tr class="row-odd"><td><p>CurKlineHandlerBase</p></td>
<td><p>实时k线处理基类</p></td>
</tr>
<tr class="row-even"><td><p>TickerHandlerBase</p></td>
<td><p>逐笔处理基类</p></td>
</tr>
<tr class="row-odd"><td><p>RTDataHandlerBase</p></td>
<td><p>分时数据处理基类</p></td>
</tr>
<tr class="row-even"><td><p>BrokerHandlerBase</p></td>
<td><p>经济队列处理基类</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-even">Return ret</dt>
<dd class="field-even"><p>RET_OK: 设置成功</p>
<p>其它: 设置失败</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="get-trading-days">
<h4><span class="strike">get_trading_days</span><a class="headerlink" href="#get-trading-days" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_trading_days">
<code class="sig-name descname">get_trading_days</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>获取交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market</strong> – 市场类型，<a class="reference external" href="Base_API.html#market">Market</a></p></li>
<li><p><strong>start</strong> – 起始日期。例如’2018-01-01’。</p></li>
<li><p><strong>end</strong> – <p>结束日期。例如’2018-01-01’。
start和end的组合如下：</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前365天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后365天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>end为当前日期，start为end往前365天</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time</p></td>
<td><p>str</p></td>
<td><p>时间</p></td>
</tr>
<tr class="row-odd"><td><p>trade_date_type</p></td>
<td><p>str</p></td>
<td><p>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></p></td>
</tr>
</tbody>
</table>
</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-10&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-stock-basicinfo">
<h4>get_stock_basicinfo<a class="headerlink" href="#get-stock-basicinfo" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_basicinfo">
<code class="sig-name descname">get_stock_basicinfo</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em>, <em class="sig-param">stock_type=SecurityType.STOCK</em>, <em class="sig-param">code_list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_basicinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定市场中特定类型的股票基本信息</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market</strong> – 市场类型 <a class="reference external" href="Base_API.html#market">Market</a></p></li>
<li><p><strong>stock_type</strong> – 股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a>，但不支持SecurityType.DRVT</p></li>
<li><p><strong>code_list</strong> – 如果不为None，应该是股票code的iterable类型，将只返回指定的股票信息</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret_code, content)</p>
<p>ret_code 等于RET_OK时， content为Pandas.DataFrame数据, 否则为错误原因字符串, 数据列格式如下</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>str</p></td>
<td><p>名字</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</p></td>
</tr>
<tr class="row-odd"><td><p>stock_type</p></td>
<td><p>str</p></td>
<td><p>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></p></td>
</tr>
<tr class="row-even"><td><p>stock_child_type</p></td>
<td><p>str</p></td>
<td><p>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>stock_owner</p></td>
<td><p>str</p></td>
<td><p>窝轮所属正股的代码，或期权标的股的代码</p></td>
</tr>
<tr class="row-even"><td><p>option_type</p></td>
<td><p>str</p></td>
<td><p>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></p></td>
</tr>
<tr class="row-odd"><td><p>strike_time</p></td>
<td><p>str</p></td>
<td><p>期权行权日（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>strike_price</p></td>
<td><p>float</p></td>
<td><p>期权行权价</p></td>
</tr>
<tr class="row-odd"><td><p>suspension</p></td>
<td><p>bool</p></td>
<td><p>期权是否停牌(True表示停牌)</p></td>
</tr>
<tr class="row-even"><td><p>listing_date</p></td>
<td><p>str</p></td>
<td><p>上市时间</p></td>
</tr>
<tr class="row-odd"><td><p>stock_id</p></td>
<td><p>int</p></td>
<td><p>股票id</p></td>
</tr>
<tr class="row-even"><td><p>delisting</p></td>
<td><p>bool</p></td>
<td><p>是否退市</p></td>
</tr>
<tr class="row-odd"><td><p>index_option_type</p></td>
<td><p>str</p></td>
<td><p>指数期权类型</p></td>
</tr>
<tr class="row-even"><td><p>main_contract</p></td>
<td><p>bool</p></td>
<td><p>是否主连合约</p></td>
</tr>
<tr class="row-odd"><td><p>last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间，主连，当月，下月等期货没有该字段</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">WARRANT</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">STOCK</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>当传入程序无法识别的股票时（包括很久之前退市的股票和不存在的股票），仍然返回股票信息，用静态信息标志来该股票不存在。统一处理为：code正常显示，name显示为“未知股票”，delisting显示为“true”，其他字段均为默认值（整型默认是0，字符串默认是空字符串）。</p></li>
<li><p>跟其他的行情接口不同，其他接口遇到程序无法识别的股票时，会拒绝请求并返回错误描述“未知股票”。</p></li>
</ul>
</div>
</div>
<div class="section" id="get-multiple-history-kline">
<h4><span class="strike">get_multiple_history_kline</span><a class="headerlink" href="#get-multiple-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_multiple_history_kline">
<code class="sig-name descname">get_multiple_history_kline</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">codelist</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em>, <em class="sig-param">ktype=KLType.K_DAY</em>, <em class="sig-param">autype=AuType.QFQ</em><span class="sig-paren">)</span><a class="headerlink" href="#get_multiple_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>获取多只股票的本地历史k线数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>codelist</strong> – 股票代码列表，list或str。例如：[‘HK.00700’, ‘HK.00001’]，’HK.00700,SZ.399001’</p></li>
<li><p><strong>start</strong> – 起始时间，，例如’2017-06-20’</p></li>
<li><p><strong>end</strong> – 结束时间，例如’2017-07-20’</p></li>
<li><p><strong>ktype</strong> – k线类型，参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></p></li>
<li><p><strong>autype</strong> – 复权类型，参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>成功时返回(RET_OK, [data])，data是DataFrame数据, 数据列格式如下</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time_key</p></td>
<td><p>str</p></td>
<td><p>k线时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>float</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>float</p></td>
<td><p>收盘价</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-even"><td><p>change_rate</p></td>
<td><p>float</p></td>
<td><p>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨收价</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>失败时返回(RET_ERROR, data)，其中data是错误描述字符串</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_multiple_history_kline</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-06-25&#39;</span><span class="p">,</span> <span class="n">KLType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-history-kline">
<h4><span class="strike">get_history_kline</span><a class="headerlink" href="#get-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_history_kline">
<code class="sig-name descname">get_history_kline</code><span class="sig-paren">(</span><em class="sig-param">self, code, start=None, end=None, ktype=KLType.K_DAY, autype=AuType.QFQ, fields=[KL_FIELD.ALL]</em><span class="sig-paren">)</span><a class="headerlink" href="#get_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="strike">得到本地历史k线，需先参照帮助文档下载k线</span></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码</p></li>
<li><p><strong>start</strong> – 开始时间，例如’2017-06-20’。</p></li>
<li><p><strong>end</strong> – <p>结束时间，例如’2017-06-30’。
start和end的组合如下：</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前365天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后365天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>end为当前日期，start为end往前365天</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p></li>
<li><p><strong>ktype</strong> – k线类型， 参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a> 定义</p></li>
<li><p><strong>autype</strong> – 复权类型, 参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a> 定义</p></li>
<li><p><strong>fields</strong> – 需返回的字段列表，参见 <a class="reference external" href="Base_API.html#kl-field-k">KL_FIELD</a> 定义 KL_FIELD.ALL  KL_FIELD.OPEN ….</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd Dataframe数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time_key</p></td>
<td><p>str</p></td>
<td><p>k线时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>float</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>float</p></td>
<td><p>收盘价</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-even"><td><p>change_rate</p></td>
<td><p>float</p></td>
<td><p>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨收价</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2017-06-22&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="request-history-kline">
<h4>request_history_kline<a class="headerlink" href="#request-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="request_history_kline">
<code class="sig-name descname">request_history_kline</code><span class="sig-paren">(</span><em class="sig-param">self, code, start=None, end=None, ktype=KLType.K_DAY, autype=AuType.QFQ, fields=[KL_FIELD.ALL], max_count=1000, page_req_key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#request_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>获取k线，不需要事先下载k线数据。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码</p></li>
<li><p><strong>start</strong> – 开始时间，例如’2017-06-20’</p></li>
<li><p><strong>end</strong> – <p>结束时间，例如’2017-07-20’。
start和end的组合如下：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前365天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后365天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>end为当前日期，start为end往前365天</p></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>ktype</strong> – k线类型， 参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a> 定义</p></li>
<li><p><strong>autype</strong> – 复权类型, 参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a> 定义</p></li>
<li><p><strong>fields</strong> – 需返回的字段列表，参见 <a class="reference external" href="Base_API.html#kl-field-k">KL_FIELD</a> 定义 KL_FIELD.ALL  KL_FIELD.OPEN ….</p></li>
<li><p><strong>max_count</strong> – 本次请求最大返回的数据点个数，传None表示返回start和end之间所有的数据。</p></li>
<li><p><strong>page_req_key</strong> – 分页请求的key。如果start和end之间的数据点多于max_count，那么后续请求时，要传入上次调用返回的page_req_key。初始请求时应该传None。</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data, page_req_key)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下。page_req_key在分页请求时（即max_count&gt;0）可能返回，并且需要在后续的请求中传入。如果没有更多数据，page_req_key返回None。</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time_key</p></td>
<td><p>str</p></td>
<td><p>k线时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>float</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>float</p></td>
<td><p>收盘价</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率（该字段为比例字段，默认不展示%）</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-even"><td><p>change_rate</p></td>
<td><p>float</p></td>
<td><p>涨跌幅</p></td>
</tr>
<tr class="row-odd"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨收价</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-06-22&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#请求开头50个数据</span>
<span class="k">print</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-06-22&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">page_req_key</span><span class="o">=</span><span class="n">page_req_key</span><span class="p">)</span> <span class="c1">#请求下50个数据</span>
<span class="k">print</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-history-kline-limit"><span class="std std-ref">在线获取单只股票一段历史K线限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-autype-list">
<h4><span class="strike">get_autype_list</span><a class="headerlink" href="#get-autype-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_autype_list">
<code class="sig-name descname">get_autype_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_autype_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取给定股票列表的复权因子</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code_list</strong> – 股票列表，例如[‘HK.00700’]</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</p>
</dd>
</dl>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 9%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>ex_div_date</p></td>
<td><p>str</p></td>
<td><p>除权除息日</p></td>
</tr>
<tr class="row-even"><td><p>split_ratio</p></td>
<td><p>float</p></td>
<td><p>拆合股比例（该字段为比例字段，展示为小数表示）例如，对于5股合1股为5.0，对于1股拆5股为0.2</p></td>
</tr>
<tr class="row-odd"><td><p>per_cash_div</p></td>
<td><p>float</p></td>
<td><p>每股派现</p></td>
</tr>
<tr class="row-even"><td><p>per_share_div_ratio</p></td>
<td><p>float</p></td>
<td><p>每股送股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-odd"><td><p>per_share_trans_ratio</p></td>
<td><p>float</p></td>
<td><p>每股转增股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-even"><td><p>allotment_ratio</p></td>
<td><p>float</p></td>
<td><p>每股配股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-odd"><td><p>allotment_price</p></td>
<td><p>float</p></td>
<td><p>配股价</p></td>
</tr>
<tr class="row-even"><td><p>stk_spo_ratio</p></td>
<td><p>float</p></td>
<td><p>增发比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-odd"><td><p>stk_spo_price</p></td>
<td><p>float</p></td>
<td><p>增发价格</p></td>
</tr>
<tr class="row-even"><td><p>forward_adj_factorA</p></td>
<td><p>float</p></td>
<td><p>前复权因子A</p></td>
</tr>
<tr class="row-odd"><td><p>forward_adj_factorB</p></td>
<td><p>float</p></td>
<td><p>前复权因子B</p></td>
</tr>
<tr class="row-even"><td><p>backward_adj_factorA</p></td>
<td><p>float</p></td>
<td><p>后复权因子A</p></td>
</tr>
<tr class="row-odd"><td><p>backward_adj_factorB</p></td>
<td><p>float</p></td>
<td><p>后复权因子B</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_autype_list</span><span class="p">([</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>复权后价格 = 复权前价格 * 复权因子a + 复权因子b</p></li>
</ul>
</div>
</div>
<div class="section" id="get-market-snapshot">
<h4>get_market_snapshot<a class="headerlink" href="#get-market-snapshot" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_market_snapshot">
<code class="sig-name descname">get_market_snapshot</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_market_snapshot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>获取市场快照</p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">param code_list</dt>
<dd class="field-odd"><p>股票列表，股票个数最多400</p>
</dd>
<dt class="field-even">return</dt>
<dd class="field-even"><p>(ret, data)</p>
<p>ret == RET_OK ,返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</dd>
</dl>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 11%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>update_time</p></td>
<td><p>str</p></td>
<td><p>更新时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>last_price</p></td>
<td><p>float</p></td>
<td><p>最新价格</p></td>
</tr>
<tr class="row-odd"><td><p>open_price</p></td>
<td><p>float</p></td>
<td><p>今日开盘价</p></td>
</tr>
<tr class="row-even"><td><p>high_price</p></td>
<td><p>float</p></td>
<td><p>最高价格</p></td>
</tr>
<tr class="row-odd"><td><p>low_price</p></td>
<td><p>float</p></td>
<td><p>最低价格</p></td>
</tr>
<tr class="row-even"><td><p>prev_close_price</p></td>
<td><p>float</p></td>
<td><p>昨收盘价格</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交数量</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交金额</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>suspension</p></td>
<td><p>bool</p></td>
<td><p>是否停牌(True表示停牌)</p></td>
</tr>
<tr class="row-odd"><td><p>listing_date</p></td>
<td><p>str</p></td>
<td><p>上市日期 (yyyy-MM-dd)</p></td>
</tr>
<tr class="row-even"><td><p>equity_valid</p></td>
<td><p>bool</p></td>
<td><p>是否正股（为true时以下正股相关字段才有合法数值）</p></td>
</tr>
<tr class="row-odd"><td><p>issued_shares</p></td>
<td><p>int</p></td>
<td><p>发行股本</p></td>
</tr>
<tr class="row-even"><td><p>total_market_val</p></td>
<td><p>float</p></td>
<td><p>总市值</p></td>
</tr>
<tr class="row-odd"><td><p>net_asset</p></td>
<td><p>int</p></td>
<td><p>资产净值</p></td>
</tr>
<tr class="row-even"><td><p>net_profit</p></td>
<td><p>int</p></td>
<td><p>净利润</p></td>
</tr>
<tr class="row-odd"><td><p>earning_per_share</p></td>
<td><p>float</p></td>
<td><p>每股盈利</p></td>
</tr>
<tr class="row-even"><td><p>outstanding_shares</p></td>
<td><p>int</p></td>
<td><p>流通股本</p></td>
</tr>
<tr class="row-odd"><td><p>net_asset_per_share</p></td>
<td><p>float</p></td>
<td><p>每股净资产</p></td>
</tr>
<tr class="row-even"><td><p>circular_market_val</p></td>
<td><p>float</p></td>
<td><p>流通市值</p></td>
</tr>
<tr class="row-odd"><td><p>ey_ratio</p></td>
<td><p>float</p></td>
<td><p>收益率（该字段为比例字段，默认不展示%）</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率（该字段为比例字段，默认不展示%）</p></td>
</tr>
<tr class="row-odd"><td><p>pb_ratio</p></td>
<td><p>float</p></td>
<td><p>市净率（该字段为比例字段，默认不展示%）</p></td>
</tr>
<tr class="row-even"><td><p>pe_ttm_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率TTM（该字段为比例字段，默认不展示%）</p></td>
</tr>
<tr class="row-odd"><td><p>dividend_ttm</p></td>
<td><p>float</p></td>
<td><p>股息TTM，派息</p></td>
</tr>
<tr class="row-even"><td><p>dividend_ratio_ttm</p></td>
<td><p>float</p></td>
<td><p>股息率TTM（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>dividend_lfy</p></td>
<td><p>float</p></td>
<td><p>股息LFY，上一年度派息</p></td>
</tr>
<tr class="row-even"><td><p>dividend_lfy_ratio</p></td>
<td><p>float</p></td>
<td><p>股息率LFY（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>stock_owner</p></td>
<td><p>str</p></td>
<td><p>窝轮所属正股的代码或期权的标的股代码</p></td>
</tr>
<tr class="row-even"><td><p>wrt_valid</p></td>
<td><p>bool</p></td>
<td><p>是否是窝轮（为true时以下窝轮相关的字段才有合法数据）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_conversion_ratio</p></td>
<td><p>float</p></td>
<td><p>换股比率</p></td>
</tr>
<tr class="row-even"><td><p>wrt_type</p></td>
<td><p>str</p></td>
<td><p>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>wrt_strike_price</p></td>
<td><p>float</p></td>
<td><p>行使价格</p></td>
</tr>
<tr class="row-even"><td><p>wrt_maturity_date</p></td>
<td><p>str</p></td>
<td><p>格式化窝轮到期时间</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_end_trade</p></td>
<td><p>str</p></td>
<td><p>格式化窝轮最后交易时间</p></td>
</tr>
<tr class="row-even"><td><p>wrt_leverage</p></td>
<td><p>float</p></td>
<td><p>杠杆比率（倍）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_ipop</p></td>
<td><p>float</p></td>
<td><p>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>wrt_break_even_point</p></td>
<td><p>float</p></td>
<td><p>打和点</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_conversion_price</p></td>
<td><p>float</p></td>
<td><p>换股价</p></td>
</tr>
<tr class="row-even"><td><p>wrt_price_recovery_ratio</p></td>
<td><p>float</p></td>
<td><p>正股距收回价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_score</p></td>
<td><p>float</p></td>
<td><p>窝轮综合评分</p></td>
</tr>
<tr class="row-even"><td><p>wrt_code</p></td>
<td><p>str</p></td>
<td><p>窝轮对应的正股（此字段已废除,修改为stock_owner）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_recovery_price</p></td>
<td><p>float</p></td>
<td><p>窝轮收回价</p></td>
</tr>
<tr class="row-even"><td><p>wrt_street_vol</p></td>
<td><p>float</p></td>
<td><p>窝轮街货量</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_issue_vol</p></td>
<td><p>float</p></td>
<td><p>窝轮发行量</p></td>
</tr>
<tr class="row-even"><td><p>wrt_street_ratio</p></td>
<td><p>float</p></td>
<td><p>窝轮街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_delta</p></td>
<td><p>float</p></td>
<td><p>窝轮对冲值</p></td>
</tr>
<tr class="row-even"><td><p>wrt_implied_volatility</p></td>
<td><p>float</p></td>
<td><p>窝轮引伸波幅</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_premium</p></td>
<td><p>float</p></td>
<td><p>窝轮溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>wrt_upper_strike_price</p></td>
<td><p>float</p></td>
<td><p>上限价，仅界内证支持该字段</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_lower_strike_price</p></td>
<td><p>float</p></td>
<td><p>下限价，仅界内证支持该字段</p></td>
</tr>
<tr class="row-even"><td><p>wrt_inline_price_status</p></td>
<td><p>str</p></td>
<td><p>界内界外, 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</p></td>
</tr>
<tr class="row-odd"><td><p>option_valid</p></td>
<td><p>bool</p></td>
<td><p>是否是期权（为true时以下期权相关的字段才有合法数值）</p></td>
</tr>
<tr class="row-even"><td><p>option_type</p></td>
<td><p>str</p></td>
<td><p>期权类型，参见 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></p></td>
</tr>
<tr class="row-odd"><td><p>strike_time</p></td>
<td><p>str</p></td>
<td><p>期权行权日（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>option_strike_price</p></td>
<td><p>float</p></td>
<td><p>行权价</p></td>
</tr>
<tr class="row-odd"><td><p>option_contract_size</p></td>
<td><p>int</p></td>
<td><p>每份合约数</p></td>
</tr>
<tr class="row-even"><td><p>option_open_interest</p></td>
<td><p>int</p></td>
<td><p>总未平仓合约数</p></td>
</tr>
<tr class="row-odd"><td><p>option_implied_volatility</p></td>
<td><p>float</p></td>
<td><p>隐含波动率</p></td>
</tr>
<tr class="row-even"><td><p>option_premium</p></td>
<td><p>float</p></td>
<td><p>溢价</p></td>
</tr>
<tr class="row-odd"><td><p>option_delta</p></td>
<td><p>float</p></td>
<td><p>希腊值 Delta</p></td>
</tr>
<tr class="row-even"><td><p>option_gamma</p></td>
<td><p>float</p></td>
<td><p>希腊值 Gamma</p></td>
</tr>
<tr class="row-odd"><td><p>option_vega</p></td>
<td><p>float</p></td>
<td><p>希腊值 Vega</p></td>
</tr>
<tr class="row-even"><td><p>option_theta</p></td>
<td><p>float</p></td>
<td><p>希腊值 Theta</p></td>
</tr>
<tr class="row-odd"><td><p>option_rho</p></td>
<td><p>float</p></td>
<td><p>希腊值 Rho</p></td>
</tr>
<tr class="row-even"><td><p>option_net_open_interest</p></td>
<td><p>int</p></td>
<td><p>净未平仓合约数</p></td>
</tr>
<tr class="row-odd"><td><p>option_expiry_date_distance</p></td>
<td><p>int</p></td>
<td><p>距离到期日天数，负数表示已过期</p></td>
</tr>
<tr class="row-even"><td><p>option_contract_nominal_value</p></td>
<td><p>float</p></td>
<td><p>合约名义金额</p></td>
</tr>
<tr class="row-odd"><td><p>option_owner_lot_multiplier</p></td>
<td><p>float</p></td>
<td><p>相等正股手数，指数期权无该字段</p></td>
</tr>
<tr class="row-even"><td><p>option_area_type</p></td>
<td><p>str</p></td>
<td><p>期权地区类型，见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></p></td>
</tr>
<tr class="row-odd"><td><p>option_contract_multiplier</p></td>
<td><p>float</p></td>
<td><p>合约乘数，指数期权特有字段</p></td>
</tr>
<tr class="row-even"><td><p>plate_valid</p></td>
<td><p>bool</p></td>
<td><p>是否为板块类型（为true时以下板块类型字段才有合法数值）</p></td>
</tr>
<tr class="row-odd"><td><p>plate_raise_count</p></td>
<td><p>int</p></td>
<td><p>板块类型上涨支数</p></td>
</tr>
<tr class="row-even"><td><p>plate_fall_count</p></td>
<td><p>int</p></td>
<td><p>板块类型下跌支数</p></td>
</tr>
<tr class="row-odd"><td><p>plate_equal_count</p></td>
<td><p>int</p></td>
<td><p>板块类型平盘支数</p></td>
</tr>
<tr class="row-even"><td><p>index_valid</p></td>
<td><p>bool</p></td>
<td><p>是否有指数类型（为true时以下指数类型字段才有合法数值）</p></td>
</tr>
<tr class="row-odd"><td><p>index_raise_count</p></td>
<td><p>int</p></td>
<td><p>指数类型上涨支数</p></td>
</tr>
<tr class="row-even"><td><p>index_fall_count</p></td>
<td><p>int</p></td>
<td><p>指数类型下跌支数</p></td>
</tr>
<tr class="row-odd"><td><p>index_equal_count</p></td>
<td><p>int</p></td>
<td><p>指数类型平盘支数</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</p></td>
</tr>
<tr class="row-odd"><td><p>price_spread</p></td>
<td><p>float</p></td>
<td><p>当前向上的摆盘价差,亦即摆盘数据的卖档的相邻档位的报价差</p></td>
</tr>
<tr class="row-even"><td><p>ask_price</p></td>
<td><p>float</p></td>
<td><p>卖价</p></td>
</tr>
<tr class="row-odd"><td><p>bid_price</p></td>
<td><p>float</p></td>
<td><p>买价</p></td>
</tr>
<tr class="row-even"><td><p>ask_vol</p></td>
<td><p>float</p></td>
<td><p>卖量</p></td>
</tr>
<tr class="row-odd"><td><p>bid_vol</p></td>
<td><p>float</p></td>
<td><p>买量</p></td>
</tr>
<tr class="row-even"><td><p>enable_margin</p></td>
<td><p>bool</p></td>
<td><p>是否可融资，如果为true，后两个字段才有意义</p></td>
</tr>
<tr class="row-odd"><td><p>mortgage_ratio</p></td>
<td><p>float</p></td>
<td><p>股票抵押率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>long_margin_initial_ratio</p></td>
<td><p>float</p></td>
<td><p>融资初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>enable_short_sell</p></td>
<td><p>bool</p></td>
<td><p>是否可卖空，如果为true，后三个字段才有意义</p></td>
</tr>
<tr class="row-even"><td><p>short_sell_rate</p></td>
<td><p>float</p></td>
<td><p>卖空参考利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>short_available_volume</p></td>
<td><p>int</p></td>
<td><p>剩余可卖空数量</p></td>
</tr>
<tr class="row-even"><td><p>short_margin_initial_ratio</p></td>
<td><p>float</p></td>
<td><p>卖空（融券）初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>sec_status</p></td>
<td><p>str</p></td>
<td><p>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></p></td>
</tr>
<tr class="row-even"><td><p>amplitude</p></td>
<td><p>float</p></td>
<td><p>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>avg_price</p></td>
<td><p>float</p></td>
<td><p>平均价</p></td>
</tr>
<tr class="row-even"><td><p>bid_ask_ratio</p></td>
<td><p>float</p></td>
<td><p>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>volume_ratio</p></td>
<td><p>float</p></td>
<td><p>量比</p></td>
</tr>
<tr class="row-even"><td><p>highest52weeks_price</p></td>
<td><p>float</p></td>
<td><p>52周最高价</p></td>
</tr>
<tr class="row-odd"><td><p>lowest52weeks_price</p></td>
<td><p>float</p></td>
<td><p>52周最低价</p></td>
</tr>
<tr class="row-even"><td><p>highest_history_price</p></td>
<td><p>float</p></td>
<td><p>历史最高价</p></td>
</tr>
<tr class="row-odd"><td><p>lowest_history_price</p></td>
<td><p>float</p></td>
<td><p>历史最低价</p></td>
</tr>
<tr class="row-even"><td><p>pre_price</p></td>
<td><p>float</p></td>
<td><p>盘前价格</p></td>
</tr>
<tr class="row-odd"><td><p>pre_high_price</p></td>
<td><p>float</p></td>
<td><p>盘前最高价</p></td>
</tr>
<tr class="row-even"><td><p>pre_low_price</p></td>
<td><p>float</p></td>
<td><p>盘前最低价</p></td>
</tr>
<tr class="row-odd"><td><p>pre_volume</p></td>
<td><p>int</p></td>
<td><p>盘前成交量</p></td>
</tr>
<tr class="row-even"><td><p>pre_turnover</p></td>
<td><p>float</p></td>
<td><p>盘前成交额</p></td>
</tr>
<tr class="row-odd"><td><p>pre_change_val</p></td>
<td><p>float</p></td>
<td><p>盘前涨跌额</p></td>
</tr>
<tr class="row-even"><td><p>pre_change_rate</p></td>
<td><p>float</p></td>
<td><p>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>pre_amplitude</p></td>
<td><p>float</p></td>
<td><p>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>after_price</p></td>
<td><p>float</p></td>
<td><p>盘后价格</p></td>
</tr>
<tr class="row-odd"><td><p>after_high_price</p></td>
<td><p>float</p></td>
<td><p>盘后最高价</p></td>
</tr>
<tr class="row-even"><td><p>after_low_price</p></td>
<td><p>float</p></td>
<td><p>盘后最低价</p></td>
</tr>
<tr class="row-odd"><td><p>after_volume</p></td>
<td><p>int</p></td>
<td><p>盘后成交量，科创板支持该数据。</p></td>
</tr>
<tr class="row-even"><td><p>after_turnover</p></td>
<td><p>float</p></td>
<td><p>盘后成交额，科创板支持该数据。</p></td>
</tr>
<tr class="row-odd"><td><p>after_change_val</p></td>
<td><p>float</p></td>
<td><p>盘后涨跌额</p></td>
</tr>
<tr class="row-even"><td><p>after_change_rate</p></td>
<td><p>float</p></td>
<td><p>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>after_amplitude</p></td>
<td><p>float</p></td>
<td><p>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>future_valid</p></td>
<td><p>bool</p></td>
<td><p>是否期货</p></td>
</tr>
<tr class="row-odd"><td><p>future_last_settle_price</p></td>
<td><p>float</p></td>
<td><p>昨结</p></td>
</tr>
<tr class="row-even"><td><p>future_position</p></td>
<td><p>float</p></td>
<td><p>持仓量</p></td>
</tr>
<tr class="row-odd"><td><p>future_position_change</p></td>
<td><p>float</p></td>
<td><p>日增仓</p></td>
</tr>
<tr class="row-even"><td><p>future_main_contract</p></td>
<td><p>bool</p></td>
<td><p>是否主连合约</p></td>
</tr>
<tr class="row-odd"><td><p>future_last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间，主连，当月，下月等期货没有该字段</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">([</span><span class="s1">&#39;SH.600000&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-market-snapshot-limit"><span class="std std-ref">获取股票快照限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-rt-data">
<h4>get_rt_data<a class="headerlink" href="#get-rt-data" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rt_data">
<code class="sig-name descname">get_rt_data</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_data" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定股票的分时数据</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 股票代码，例如，HK.00700</p>
</dd>
<dt class="field-even">Return (ret, data)</dt>
<dd class="field-even"><p>ret == RET_OK 返回pd Dataframe数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 11%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>str</p></td>
<td><p>时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>is_blank</p></td>
<td><p>bool</p></td>
<td><p>数据状态；正常数据为False，伪造数据为True</p></td>
</tr>
<tr class="row-odd"><td><p>opened_mins</p></td>
<td><p>int</p></td>
<td><p>零点到当前多少分钟</p></td>
</tr>
<tr class="row-even"><td><p>cur_price</p></td>
<td><p>float</p></td>
<td><p>当前价格</p></td>
</tr>
<tr class="row-odd"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨天收盘的价格</p></td>
</tr>
<tr class="row-even"><td><p>avg_price</p></td>
<td><p>float</p></td>
<td><p>平均价格（对于期权，该字段为None）</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>float</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交金额</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_data</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-plate-stock">
<h4>get_plate_stock<a class="headerlink" href="#get-plate-stock" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_plate_stock">
<code class="sig-name descname">get_plate_stock</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">plate_code</em>, <em class="sig-param">sort_field=SortField.CODE</em>, <em class="sig-param">ascend=True</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_stock" title="Permalink to this definition">¶</a></dt>
<dd><p>获取特定板块下的股票列表</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plate_code</strong> – 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码</p></li>
<li><p><strong>sort_field</strong> – 排序字段，SortField，根据哪些字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></p></li>
<li><p><strong>ascend</strong> – 排序方向，bool，True升序，False降序</p></li>
</ul>
</dd>
<dt class="field-even">Return (ret, data)</dt>
<dd class="field-even"><p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期货表示合约乘数</p></td>
</tr>
<tr class="row-even"><td><p>stock_name</p></td>
<td><p>str</p></td>
<td><p>股票名称</p></td>
</tr>
<tr class="row-odd"><td><p>stock_type</p></td>
<td><p>str</p></td>
<td><p>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></p></td>
</tr>
<tr class="row-even"><td><p>list_time</p></td>
<td><p>str</p></td>
<td><p>上市时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-odd"><td><p>stock_id</p></td>
<td><p>int</p></td>
<td><p>股票id</p></td>
</tr>
<tr class="row-even"><td><p>main_contract</p></td>
<td><p>bool</p></td>
<td><p>是否主连合约（期货特有字段）</p></td>
</tr>
<tr class="row-odd"><td><p>last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间（期货特有字段，主连，当月，下月等期货没有该字段）</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_stock</span><span class="p">(</span><span class="s1">&#39;HK.BK1001&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>该接口也可用于获取指数成份股, 如获取上证指数成份股:</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-stock-limit"><span class="std std-ref">获取板块下的股票限制</span></a></p></li>
</ul>
</li>
<li><p>部分常用的板块或指数代码如下:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>代码</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HK.HSI Constituent</p></td>
<td><p>恒指成份股</p></td>
</tr>
<tr class="row-odd"><td><p>HK.HSCEI Stock</p></td>
<td><p>国指成份股</p></td>
</tr>
<tr class="row-even"><td><p>HK.Motherboard</p></td>
<td><p>港股主板</p></td>
</tr>
<tr class="row-odd"><td><p>HK.GEM</p></td>
<td><p>港股创业板</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1910</p></td>
<td><p>所有港股</p></td>
</tr>
<tr class="row-odd"><td><p>HK.BK1911</p></td>
<td><p>主板H股</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1912</p></td>
<td><p>创业板H股</p></td>
</tr>
<tr class="row-odd"><td><p>HK.Fund</p></td>
<td><p>港股基金</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1600</p></td>
<td><p>富途热门(港)</p></td>
</tr>
<tr class="row-odd"><td><p>HK.BK1986</p></td>
<td><p>港股期货全类型</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1987</p></td>
<td><p>港股股指期货</p></td>
</tr>
<tr class="row-odd"><td><p>HK.BK1988</p></td>
<td><p>港股汇率期货</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1989</p></td>
<td><p>港股金属期货</p></td>
</tr>
<tr class="row-odd"><td><p>HK.BK1990</p></td>
<td><p>港股股票期货</p></td>
</tr>
<tr class="row-even"><td><p>SH.3000000</p></td>
<td><p>上海主板</p></td>
</tr>
<tr class="row-odd"><td><p>SH.BK0901</p></td>
<td><p>上证B股</p></td>
</tr>
<tr class="row-even"><td><p>SH.BK0902</p></td>
<td><p>深证B股</p></td>
</tr>
<tr class="row-odd"><td><p>SH.3000002</p></td>
<td><p>沪深指数</p></td>
</tr>
<tr class="row-even"><td><p>SH.3000005</p></td>
<td><p>沪深全部A股</p></td>
</tr>
<tr class="row-odd"><td><p>SH.BK0600</p></td>
<td><p>富途热门(沪深)</p></td>
</tr>
<tr class="row-even"><td><p>SH.BK0992</p></td>
<td><p>科创板</p></td>
</tr>
<tr class="row-odd"><td><p>SZ.3000001</p></td>
<td><p>深证主板</p></td>
</tr>
<tr class="row-even"><td><p>SZ.3000003</p></td>
<td><p>中小企业板块</p></td>
</tr>
<tr class="row-odd"><td><p>SZ.3000004</p></td>
<td><p>深证创业板</p></td>
</tr>
<tr class="row-even"><td><p>US.USAALL</p></td>
<td><p>所有美股</p></td>
</tr>
<tr class="row-odd"><td><p>US.BK2989</p></td>
<td><p>美股期货全类型</p></td>
</tr>
<tr class="row-even"><td><p>US.BK2990</p></td>
<td><p>美股农产品期货</p></td>
</tr>
<tr class="row-odd"><td><p>US.BK2991</p></td>
<td><p>美股利率期货</p></td>
</tr>
<tr class="row-even"><td><p>US.BK2992</p></td>
<td><p>美股外汇期货</p></td>
</tr>
<tr class="row-odd"><td><p>US.BK2993</p></td>
<td><p>美股数字货币期货</p></td>
</tr>
<tr class="row-even"><td><p>US.BK2994</p></td>
<td><p>美股股指期货</p></td>
</tr>
<tr class="row-odd"><td><p>US.BK2995</p></td>
<td><p>美股能源化工期货</p></td>
</tr>
<tr class="row-even"><td><p>US.BK2996</p></td>
<td><p>美股贵金属期货</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
<div class="section" id="get-plate-list">
<h4>get_plate_list<a class="headerlink" href="#get-plate-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_plate_list">
<code class="sig-name descname">get_plate_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em>, <em class="sig-param">plate_class</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取板块集合下的子板块列表</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market</strong> – 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的子板块（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></p></li>
<li><p><strong>plate_class</strong> – 板块分类，参见 <a class="reference external" href="Base_API.html#plate">Plate</a></p></li>
</ul>
</dd>
<dt class="field-even">Return (ret, data)</dt>
<dd class="field-even"><p>ret == RET_OK 返回pd Dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>plate_name</p></td>
<td><p>str</p></td>
<td><p>板块名字</p></td>
</tr>
<tr class="row-even"><td><p>plate_id</p></td>
<td><p>str</p></td>
<td><p>板块id</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">Plate</span><span class="o">.</span><span class="n">ALL</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-list-limit"><span class="std std-ref">获取板块集合下的板块限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-broker-queue">
<h4>get_broker_queue<a class="headerlink" href="#get-broker-queue" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_broker_queue">
<code class="sig-name descname">get_broker_queue</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_broker_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>获取股票的经纪队列</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 股票代码</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, bid_frame_table, ask_frame_table)或(ret, err_message, err_message)</p>
<p>ret == RET_OK，bid_frame_table，ask_frame_table 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>bid_frame_table 经纪买盘数据</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>bid_broker_id</p></td>
<td><p>int</p></td>
<td><p>经纪买盘id</p></td>
</tr>
<tr class="row-even"><td><p>bid_broker_name</p></td>
<td><p>str</p></td>
<td><p>经纪买盘名称</p></td>
</tr>
<tr class="row-odd"><td><p>bid_broker_pos</p></td>
<td><p>int</p></td>
<td><p>经纪档位</p></td>
</tr>
</tbody>
</table>
<p>ask_frame_table 经纪卖盘数据</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>ask_broker_id</p></td>
<td><p>int</p></td>
<td><p>经纪卖盘id</p></td>
</tr>
<tr class="row-even"><td><p>ask_broker_name</p></td>
<td><p>str</p></td>
<td><p>经纪卖盘名称</p></td>
</tr>
<tr class="row-odd"><td><p>ask_broker_pos</p></td>
<td><p>int</p></td>
<td><p>经纪档位</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_broker_queue</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="subscribe">
<h4>subscribe<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">subscribe</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em>, <em class="sig-param">subtype_list</em>, <em class="sig-param">is_first_push=True</em>, <em class="sig-param">subscribe_push=True</em><span class="sig-paren">)</span></dt>
<dd><p>订阅注册需要的实时信息，指定股票和订阅的数据类型即可，港股订阅需要Lv2行情。</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code_list</strong> – 需要订阅的股票代码列表</p></li>
<li><p><strong>subtype_list</strong> – 需要订阅的数据类型列表，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></p></li>
<li><p><strong>is_first_push</strong> – 订阅成功之后是否马上推送一次数据</p></li>
<li><p><strong>subscribe_push</strong> – 订阅后推送</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="unsubscribe">
<h4>unsubscribe<a class="headerlink" href="#unsubscribe" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">unsubscribe</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em>, <em class="sig-param">subtype_list</em>, <em class="sig-param">unsubscribe_all=False</em><span class="sig-paren">)</span></dt>
<dd><p>取消订阅</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code_list</strong> – 取消订阅的股票代码列表</p></li>
<li><p><strong>subtype_list</strong> – 取消订阅的类型，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></p></li>
<li><p><strong>unsubscribe_all</strong> – 取消所有订阅，为True时忽略其他参数，或可使用 <a class="reference external" href="./Quote_API.html#unsubscribe_all">unsubscribe_all</a> 接口</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="id3">
<h4>unsubscribe_all<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="unsubscribe_all">
<code class="sig-name descname">unsubscribe_all</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#unsubscribe_all" title="Permalink to this definition">¶</a></dt>
<dd><p>取消所有订阅</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe_all</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="query-subscription">
<h4>query_subscription<a class="headerlink" href="#query-subscription" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="query_subscription">
<code class="sig-name descname">query_subscription</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">is_all_conn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#query_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>查询已订阅的实时信息</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>is_all_conn</strong> – 是否返回所有连接的订阅状态,不传或者传False只返回当前连接数据</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回订阅信息的字典数据 ，格式如下:</p>
</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;total_used&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>    <span class="c1"># 所有连接已使用的订阅额度</span>
    <span class="s1">&#39;own_used&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>       <span class="c1"># 当前连接已使用的订阅额度</span>
    <span class="s1">&#39;remain&#39;</span><span class="p">:</span> <span class="mi">496</span><span class="p">,</span>       <span class="c1">#  剩余的订阅额度</span>
    <span class="s1">&#39;sub_list&#39;</span><span class="p">:</span>          <span class="c1">#  每种订阅类型对应的股票列表</span>
    <span class="p">{</span>
        <span class="s1">&#39;BROKER&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">],</span>
        <span class="s1">&#39;RT_DATA&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-global-state">
<h4>get_global_state<a class="headerlink" href="#get-global-state" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_global_state">
<code class="sig-name descname">get_global_state</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#get_global_state" title="Permalink to this definition">¶</a></dt>
<dd><p>获取全局状态</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>(ret, data)</p>
<p>ret == RET_OK data为包含全局状态的字典，含义如下</p>
<p>ret != RET_OK data为错误描述字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>key</p></th>
<th class="head"><p>value类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>market_sz</p></td>
<td><p>str</p></td>
<td><p>深圳市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></p></td>
</tr>
<tr class="row-odd"><td><p>market_sh</p></td>
<td><p>str</p></td>
<td><p>上海市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></p></td>
</tr>
<tr class="row-even"><td><p>market_hk</p></td>
<td><p>str</p></td>
<td><p>香港市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></p></td>
</tr>
<tr class="row-odd"><td><p>market_hkfuture</p></td>
<td><p>str</p></td>
<td><p>香港期货市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></p></td>
</tr>
<tr class="row-even"><td><p>market_us</p></td>
<td><p>str</p></td>
<td><p>美国市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></p></td>
</tr>
<tr class="row-odd"><td><p>server_ver</p></td>
<td><p>str</p></td>
<td><p>FutuOpenD版本号</p></td>
</tr>
<tr class="row-even"><td><p>trd_logined</p></td>
<td><p>bool</p></td>
<td><p>True：已登录交易服务器，False: 未登录交易服务器</p></td>
</tr>
<tr class="row-odd"><td><p>qot_logined</p></td>
<td><p>bool</p></td>
<td><p>True：已登录行情服务器，False: 未登录行情服务器</p></td>
</tr>
<tr class="row-even"><td><p>timestamp</p></td>
<td><p>str</p></td>
<td><p>当前格林威治时间戳(秒）</p></td>
</tr>
<tr class="row-odd"><td><p>local_timestamp</p></td>
<td><p>float</p></td>
<td><p>FutuOpenD运行机器的当前时间戳(秒)</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_global_state</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-stock-quote">
<h4>get_stock_quote<a class="headerlink" href="#get-stock-quote" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_quote">
<code class="sig-name descname">get_stock_quote</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_quote" title="Permalink to this definition">¶</a></dt>
<dd><p>获取订阅股票报价的实时数据，有订阅要求限制</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code_list</strong> – 股票代码列表，必须确保code_list中的股票均订阅成功后才能够执行</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 11%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>data_date</p></td>
<td><p>str</p></td>
<td><p>日期</p></td>
</tr>
<tr class="row-even"><td><p>data_time</p></td>
<td><p>str</p></td>
<td><p>时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-odd"><td><p>last_price</p></td>
<td><p>float</p></td>
<td><p>最新价格</p></td>
</tr>
<tr class="row-even"><td><p>open_price</p></td>
<td><p>float</p></td>
<td><p>今日开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>high_price</p></td>
<td><p>float</p></td>
<td><p>最高价格</p></td>
</tr>
<tr class="row-even"><td><p>low_price</p></td>
<td><p>float</p></td>
<td><p>最低价格</p></td>
</tr>
<tr class="row-odd"><td><p>prev_close_price</p></td>
<td><p>float</p></td>
<td><p>昨收盘价格</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交数量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交金额</p></td>
</tr>
<tr class="row-even"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>amplitude</p></td>
<td><p>int</p></td>
<td><p>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>suspension</p></td>
<td><p>bool</p></td>
<td><p>是否停牌(True表示停牌)</p></td>
</tr>
<tr class="row-odd"><td><p>listing_date</p></td>
<td><p>str</p></td>
<td><p>上市日期 (yyyy-MM-dd)</p></td>
</tr>
<tr class="row-even"><td><p>price_spread</p></td>
<td><p>float</p></td>
<td><p>当前向上的价差，亦即摆盘数据的卖档的相邻档位的报价差</p></td>
</tr>
<tr class="row-odd"><td><p>dark_status</p></td>
<td><p>str</p></td>
<td><p>暗盘交易状态，见 <a class="reference external" href="Base_API.html#darkstatus">DarkStatus</a></p></td>
</tr>
<tr class="row-even"><td><p>sec_status</p></td>
<td><p>str</p></td>
<td><p>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></p></td>
</tr>
<tr class="row-odd"><td><p>strike_price</p></td>
<td><p>float</p></td>
<td><p>行权价</p></td>
</tr>
<tr class="row-even"><td><p>contract_size</p></td>
<td><p>int</p></td>
<td><p>每份合约数</p></td>
</tr>
<tr class="row-odd"><td><p>open_interest</p></td>
<td><p>int</p></td>
<td><p>未平仓合约数</p></td>
</tr>
<tr class="row-even"><td><p>implied_volatility</p></td>
<td><p>float</p></td>
<td><p>隐含波动率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>premium</p></td>
<td><p>float</p></td>
<td><p>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>delta</p></td>
<td><p>float</p></td>
<td><p>希腊值 Delta</p></td>
</tr>
<tr class="row-odd"><td><p>gamma</p></td>
<td><p>float</p></td>
<td><p>希腊值 Gamma</p></td>
</tr>
<tr class="row-even"><td><p>vega</p></td>
<td><p>float</p></td>
<td><p>希腊值 Vega</p></td>
</tr>
<tr class="row-odd"><td><p>theta</p></td>
<td><p>float</p></td>
<td><p>希腊值 Theta</p></td>
</tr>
<tr class="row-even"><td><p>rho</p></td>
<td><p>float</p></td>
<td><p>希腊值 Rho</p></td>
</tr>
<tr class="row-odd"><td><p>net_open_interest</p></td>
<td><p>int</p></td>
<td><p>净未平仓合约数</p></td>
</tr>
<tr class="row-even"><td><p>expiry_date_distance</p></td>
<td><p>int</p></td>
<td><p>距离到期日天数，负数表示已过期</p></td>
</tr>
<tr class="row-odd"><td><p>contract_nominal_value</p></td>
<td><p>float</p></td>
<td><p>合约名义金额</p></td>
</tr>
<tr class="row-even"><td><p>owner_lot_multiplier</p></td>
<td><p>float</p></td>
<td><p>相等正股手数，指数期权无该字段</p></td>
</tr>
<tr class="row-odd"><td><p>option_area_type</p></td>
<td><p>str</p></td>
<td><p>期权地区类型，见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></p></td>
</tr>
<tr class="row-even"><td><p>contract_multiplier</p></td>
<td><p>float</p></td>
<td><p>合约乘数，指数期权特有字段</p></td>
</tr>
<tr class="row-odd"><td><p>pre_price</p></td>
<td><p>float</p></td>
<td><p>盘前价格</p></td>
</tr>
<tr class="row-even"><td><p>pre_high_price</p></td>
<td><p>float</p></td>
<td><p>盘前最高价</p></td>
</tr>
<tr class="row-odd"><td><p>pre_low_price</p></td>
<td><p>float</p></td>
<td><p>盘前最低价</p></td>
</tr>
<tr class="row-even"><td><p>pre_volume</p></td>
<td><p>int</p></td>
<td><p>盘前成交量</p></td>
</tr>
<tr class="row-odd"><td><p>pre_turnover</p></td>
<td><p>float</p></td>
<td><p>盘前成交额</p></td>
</tr>
<tr class="row-even"><td><p>pre_change_val</p></td>
<td><p>float</p></td>
<td><p>盘前涨跌额</p></td>
</tr>
<tr class="row-odd"><td><p>pre_change_rate</p></td>
<td><p>float</p></td>
<td><p>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>pre_amplitude</p></td>
<td><p>float</p></td>
<td><p>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>after_price</p></td>
<td><p>float</p></td>
<td><p>盘后价格</p></td>
</tr>
<tr class="row-even"><td><p>after_high_price</p></td>
<td><p>float</p></td>
<td><p>盘后最高价</p></td>
</tr>
<tr class="row-odd"><td><p>after_low_price</p></td>
<td><p>float</p></td>
<td><p>盘后最低价</p></td>
</tr>
<tr class="row-even"><td><p>after_volume</p></td>
<td><p>int</p></td>
<td><p>盘后成交量，科创板支持此数据。</p></td>
</tr>
<tr class="row-odd"><td><p>after_turnover</p></td>
<td><p>float</p></td>
<td><p>盘后成交额，科创板支持此数据。</p></td>
</tr>
<tr class="row-even"><td><p>after_change_val</p></td>
<td><p>float</p></td>
<td><p>盘后涨跌额</p></td>
</tr>
<tr class="row-odd"><td><p>after_change_rate</p></td>
<td><p>float</p></td>
<td><p>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>after_amplitude</p></td>
<td><p>float</p></td>
<td><p>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>last_settle_price</p></td>
<td><p>float</p></td>
<td><p>昨结，期货特有字段</p></td>
</tr>
<tr class="row-even"><td><p>position</p></td>
<td><p>float</p></td>
<td><p>持仓量，期货特有字段</p></td>
</tr>
<tr class="row-odd"><td><p>position_change</p></td>
<td><p>float</p></td>
<td><p>日增仓，期货特有字段</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">code_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;US.AAPL210115C185000&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">code_list</span><span class="p">,</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_quote</span><span class="p">(</span><span class="n">code_list</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-rt-ticker">
<h4>get_rt_ticker<a class="headerlink" href="#get-rt-ticker" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rt_ticker">
<code class="sig-name descname">get_rt_ticker</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em>, <em class="sig-param">num=500</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_ticker" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定股票的实时逐笔。取最近num个逐笔</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码</p></li>
<li><p><strong>num</strong> – 最近ticker个数，最多可获取1000个</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>sequence</p></td>
<td><p>int</p></td>
<td><p>逐笔序号</p></td>
</tr>
<tr class="row-even"><td><p>time</p></td>
<td><p>str</p></td>
<td><p>成交时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-odd"><td><p>price</p></td>
<td><p>float</p></td>
<td><p>成交价格</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交数量（股数）</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交金额</p></td>
</tr>
<tr class="row-even"><td><p>ticker_direction</p></td>
<td><p>str</p></td>
<td><p>逐笔方向</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>str</p></td>
<td><p>逐笔类型，参见 <a class="reference external" href="Base_API.html#tickertype">TickerType</a></p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_ticker</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rt-ticker-limit"><span class="std std-ref">获取逐笔限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-cur-kline">
<h4>get_cur_kline<a class="headerlink" href="#get-cur-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_cur_kline">
<code class="sig-name descname">get_cur_kline</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em>, <em class="sig-param">num</em>, <em class="sig-param">ktype=SubType.K_DAY</em>, <em class="sig-param">autype=AuType.QFQ</em><span class="sig-paren">)</span><a class="headerlink" href="#get_cur_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>实时获取指定股票最近num个K线数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码</p></li>
<li><p><strong>num</strong> – k线数据个数，最多1000根</p></li>
<li><p><strong>ktype</strong> – k线类型，参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></p></li>
<li><p><strong>autype</strong> – 复权类型，参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time_key</p></td>
<td><p>str</p></td>
<td><p>时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>float</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>float</p></td>
<td><p>收盘价</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，展示为小数表示）</p></td>
</tr>
<tr class="row-even"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨收价（即前一个时间的收盘价。为了效率原因，第一个数据的昨收价可能为0）</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_cur_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-cur-kline-limit"><span class="std std-ref">获取K线限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-order-book">
<h4>get_order_book<a class="headerlink" href="#get-order-book" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_order_book">
<code class="sig-name descname">get_order_book</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_order_book" title="Permalink to this definition">¶</a></dt>
<dd><p>获取实时摆盘数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 股票代码</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ret, data)</p>
</dd>
</dl>
<p>ret == RET_OK 返回字典，数据格式如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
&#39;code&#39;: 股票代码
&#39;svr_recv_time_bid&#39;: 富途服务器从交易所收到数据的时间(for bid) 部分数据的接收时间为零，例如服务器重启或第一次推送的缓存数据。
&#39;svr_recv_time_ask&#39;: 富途服务器从交易所收到数据的时间(for ask)
&#39;Ask&#39;: [ (ask_price1, ask_volume1，order_num), (ask_price2, ask_volume2, order_num),…]
&#39;Bid&#39;: [ (bid_price1, bid_volume1, order_num), (bid_price2, bid_volume2, order_num),…]
}
</pre></div>
</div>
<div class="line-block">
<div class="line">‘Ask’：卖盘</div>
<div class="line">‘Bid’: 买盘</div>
<div class="line">每个元组的含义是(委托价格，委托数量，委托订单数)</div>
</div>
<p>ret != RET_OK 返回错误字符串</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_order_book</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-multi-points-history-kline">
<h4><span class="strike">get_multi_points_history_kline</span><a class="headerlink" href="#get-multi-points-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_multi_points_history_kline">
<code class="sig-name descname">get_multi_points_history_kline</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em>, <em class="sig-param">dates</em>, <em class="sig-param">fields</em>, <em class="sig-param">ktype=KLType.K_DAY</em>, <em class="sig-param">autype=AuType.QFQ</em>, <em class="sig-param">no_data_mode=KLNoDataMode.FORWARD</em><span class="sig-paren">)</span><a class="headerlink" href="#get_multi_points_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>从本地历史K线中获取多支股票多个时间点的指定数据列</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code_list</strong> – 单个或多个股票 ‘HK.00700’  or  [‘HK.00700’, ‘HK.00001’]</p></li>
<li><p><strong>dates</strong> – 单个或多个日期 ‘2017-01-01’ or [‘2017-01-01’, ‘2017-01-02’]，最多5个时间点</p></li>
<li><p><strong>fields</strong> – 单个或多个数据列 KL_FIELD.ALL or [KL_FIELD.DATE_TIME, KL_FIELD.OPEN]</p></li>
<li><p><strong>ktype</strong> – K线类型 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></p></li>
<li><p><strong>autype</strong> – 复权类型 <a class="reference external" href="Base_API.html#autype-k">AuType</a></p></li>
<li><p><strong>no_data_mode</strong> – 指定时间为非交易日时，对应的k线数据取值模式，参见 <a class="reference external" href="Base_API.html#klnodatamode-k">KLNoDataMode</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，固定表头包括’code’(代码) ‘time_point’(指定的日期) ‘data_status’ (KLDataStatus)。数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>time_point</p></td>
<td><p>str</p></td>
<td><p>请求的时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>data_status</p></td>
<td><p>str</p></td>
<td><p>数据点是否有效，参见 <a class="reference external" href="Base_API.html#kldatastatus-k">KLDataStatus</a></p></td>
</tr>
<tr class="row-odd"><td><p>time_key</p></td>
<td><p>str</p></td>
<td><p>k线时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>float</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>float</p></td>
<td><p>收盘价</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>pe_ratio</p></td>
<td><p>float</p></td>
<td><p>市盈率</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-even"><td><p>change_rate</p></td>
<td><p>float</p></td>
<td><p>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>last_close</p></td>
<td><p>float</p></td>
<td><p>昨收价</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_multi_points_history_kline</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-06-25&#39;</span><span class="p">],</span> <span class="n">KL_FIELD</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">KLType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-referencestock-list">
<h4>get_referencestock_list<a class="headerlink" href="#get-referencestock-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_referencestock_list">
<code class="sig-name descname">get_referencestock_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em>, <em class="sig-param">reference_type</em><span class="sig-paren">)</span><a class="headerlink" href="#get_referencestock_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取证券的关联数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 证券id，str，例如HK.00700</p></li>
<li><p><strong>reference_type</strong> – 要获得的相关数据，参见 <a class="reference external" href="Base_API.html#securityreferencetype">SecurityReferenceType</a> 。例如WARRANT，表示获取正股相关的窝轮</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 10%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>证券代码</p></td>
</tr>
<tr class="row-odd"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期货表示合约乘数</p></td>
</tr>
<tr class="row-even"><td><p>stock_type</p></td>
<td><p>str</p></td>
<td><p>证券类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></p></td>
</tr>
<tr class="row-odd"><td><p>stock_name</p></td>
<td><p>str</p></td>
<td><p>证券名字</p></td>
</tr>
<tr class="row-even"><td><p>list_time</p></td>
<td><p>str</p></td>
<td><p>上市时间（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-odd"><td><p>wrt_valid</p></td>
<td><p>bool</p></td>
<td><p>是否是窝轮，如果为True，下面wrt开头的字段有效</p></td>
</tr>
<tr class="row-even"><td><p>wrt_type</p></td>
<td><p>str</p></td>
<td><p>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>wrt_code</p></td>
<td><p>str</p></td>
<td><p>所属正股</p></td>
</tr>
<tr class="row-even"><td><p>future_valid</p></td>
<td><p>bool</p></td>
<td><p>是否是期货，如果为True，下面future开头的字段有效</p></td>
</tr>
<tr class="row-odd"><td><p>future_main_contract</p></td>
<td><p>bool</p></td>
<td><p>是否主连合约（期货特有字段）</p></td>
</tr>
<tr class="row-even"><td><p>future_last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间（期货特有字段，主连，当月，下月等无该字段）</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_referencestock_list</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">SecurityReferenceType</span><span class="o">.</span><span class="n">WARRANT</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-referencestock-list-limit"><span class="std std-ref">获取股票关联数据限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-owner-plate">
<h4>get_owner_plate<a class="headerlink" href="#get-owner-plate" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_owner_plate">
<code class="sig-name descname">get_owner_plate</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_owner_plate" title="Permalink to this definition">¶</a></dt>
<dd><p>获取单支或多支股票的所属板块信息列表</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code_list</strong> – 股票代码列表，仅支持正股、指数。list或str。例如：[‘HK.00700’, ‘HK.00001’]或者’HK.00700,HK.00001’，最多可传入200只股票</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>证券代码</p></td>
</tr>
<tr class="row-odd"><td><p>plate_code</p></td>
<td><p>str</p></td>
<td><p>板块代码</p></td>
</tr>
<tr class="row-even"><td><p>plate_name</p></td>
<td><p>str</p></td>
<td><p>板块名字</p></td>
</tr>
<tr class="row-odd"><td><p>plate_type</p></td>
<td><p>str</p></td>
<td><p>板块类型（行业板块或概念板块），查看 <a class="reference external" href="Base_API.html#plate">Plate</a></p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">code_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00001&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_owner_plate</span><span class="p">(</span><span class="n">code_list</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-owner-plate-limit"><span class="std std-ref">获取股票所属板块限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-holding-change-list">
<h4>get_holding_change_list<a class="headerlink" href="#get-holding-change-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_holding_change_list">
<code class="sig-name descname">get_holding_change_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em>, <em class="sig-param">holder_type</em>, <em class="sig-param">start</em>, <em class="sig-param">end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_holding_change_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取大股东持股变动列表,只提供美股数据,并最多只返回前100个</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码. 例如：’US.AAPL’</p></li>
<li><p><strong>holder_type</strong> – 持有者类别，查看 <a class="reference external" href="Base_API.html#stockholder">StockHolder</a></p></li>
<li><p><strong>start</strong> – 开始时间. 例如：’2016-10-01’</p></li>
<li><p><strong>end</strong> – <p>结束时间，例如：’2017-10-01’。
start与end的组合如下：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前365天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后365天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>end为当前日期，start为end往前365天</p></td>
</tr>
</tbody>
</table>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>holder_name</p></td>
<td><p>str</p></td>
<td><p>高管名称</p></td>
</tr>
<tr class="row-odd"><td><p>holding_qty</p></td>
<td><p>float</p></td>
<td><p>持股数</p></td>
</tr>
<tr class="row-even"><td><p>holding_ratio</p></td>
<td><p>float</p></td>
<td><p>持股比例（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>change_qty</p></td>
<td><p>float</p></td>
<td><p>变动数</p></td>
</tr>
<tr class="row-even"><td><p>change_ratio</p></td>
<td><p>float</p></td>
<td><p>变动比例（该字段为百分比字段，默认不展示%，如20实际对应20%。是相对于自身的比例，而不是总的。如总股本1万股，持有100股，持股百分比是1%，卖掉50股，变动比例是50%，而不是0.5%）</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>str</p></td>
<td><p>发布时间（美股的时间默认是美东）</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_holding_change_list</span><span class="p">(</span><span class="s1">&#39;US.AAPL&#39;</span><span class="p">,</span> <span class="n">StockHolder</span><span class="o">.</span><span class="n">INSTITUTE</span><span class="p">,</span> <span class="s1">&#39;2018-10-01&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-holding-change-list-limit"><span class="std std-ref">获取持股变化列表限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-option-chain">
<h4>get_option_chain<a class="headerlink" href="#get-option-chain" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_option_chain">
<code class="sig-name descname">get_option_chain</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em>, <em class="sig-param">index_option_type=IndexOptionType.NORMAL</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em>, <em class="sig-param">option_type=OptionType.ALL</em>, <em class="sig-param">option_cond_type=OptionCondType.ALL</em><span class="sig-paren">)</span><a class="headerlink" href="#get_option_chain" title="Permalink to this definition">¶</a></dt>
<dd><p>通过标的股查询期权</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> – 股票代码,例如：’HK.02318’</p></li>
<li><p><strong>index_option_type</strong> – 指数期权类型，查看 <a class="reference external" href="Base_API.html#indexoptiontype">IndexOptionType</a>。正股和其它类型股票忽略该参数。</p></li>
<li><p><strong>start</strong> – 开始日期，该日期指到期日，例如’2017-08-01’</p></li>
<li><p><strong>end</strong> – <p>结束日期（包括这一天），该日期指到期日，例如’2017-08-30’。 注意，时间范围最多30天。
start和end的组合如下：</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前30天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后30天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>start为当前日期，end往后30天</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p></li>
<li><p><strong>option_type</strong> – 期权类型,,默认全部,全部/看涨/看跌，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></p></li>
<li><p><strong>option_cond_type</strong> – 默认全部,全部/价内/价外，查看 <a class="reference external" href="Base_API.html#optioncondtype">OptionCondType</a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 12%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>str</p></td>
<td><p>名字</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期权表示每份合约股数（指数期权无该字段）</p></td>
</tr>
<tr class="row-odd"><td><p>stock_type</p></td>
<td><p>str</p></td>
<td><p>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></p></td>
</tr>
<tr class="row-even"><td><p>option_type</p></td>
<td><p>str</p></td>
<td><p>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></p></td>
</tr>
<tr class="row-odd"><td><p>stock_owner</p></td>
<td><p>str</p></td>
<td><p>标的股</p></td>
</tr>
<tr class="row-even"><td><p>strike_time</p></td>
<td><p>str</p></td>
<td><p>行权日（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-odd"><td><p>strike_price</p></td>
<td><p>float</p></td>
<td><p>行权价</p></td>
</tr>
<tr class="row-even"><td><p>suspension</p></td>
<td><p>bool</p></td>
<td><p>是否停牌(True表示停牌)</p></td>
</tr>
<tr class="row-odd"><td><p>stock_id</p></td>
<td><p>int</p></td>
<td><p>股票id</p></td>
</tr>
<tr class="row-even"><td><p>index_option_type</p></td>
<td><p>str</p></td>
<td><p>指数期权类型</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
</dl>
</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_option_chain</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">IndexOptionType</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span><span class="s1">&#39;2018-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-08-18&#39;</span><span class="p">,</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">OptionCondType</span><span class="o">.</span><span class="n">OUTSIDE</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-option-chain-limit"><span class="std std-ref">获取期权链限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-history-kl-quota">
<h4>get_history_kl_quota<a class="headerlink" href="#get-history-kl-quota" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_history_kl_quota">
<code class="sig-name descname">get_history_kl_quota</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">get_detail=False</em><span class="sig-paren">)</span><a class="headerlink" href="#get_history_kl_quota" title="Permalink to this definition">¶</a></dt>
<dd><p>获取已使用过的额度，即当前周期内已经下载过多少只股票</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>get_detail</strong> – <p>是否返回详细拉取过的历史纪录</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>拉取的股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>request_time</p></td>
<td><p>str</p></td>
<td><p>最后一次拉取的时间字符串</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回(used_quota, remain_quota, detail_list)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>used_quota</p></td>
<td><p>int32</p></td>
<td><p>已使用过的额度，即当前周期内已经下载过多少只股票</p></td>
</tr>
<tr class="row-odd"><td><p>remain_quota</p></td>
<td><p>int32</p></td>
<td><p>剩余额度，30天后额度会恢复</p></td>
</tr>
<tr class="row-even"><td><p>detail_list</p></td>
<td><p>dict list</p></td>
<td><p>get_detail为True时返回，每只拉取过的股票的下载时间</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_history_kl_quota</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-rehab">
<h4>get_rehab<a class="headerlink" href="#get-rehab" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rehab">
<code class="sig-name descname">get_rehab</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rehab" title="Permalink to this definition">¶</a></dt>
<dd><p>获取给定股票的复权因子</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 需要查询的股票代码.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 9%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ex_div_date</p></td>
<td><p>str</p></td>
<td><p>除权除息日</p></td>
</tr>
<tr class="row-odd"><td><p>split_ratio</p></td>
<td><p>float</p></td>
<td><p>拆合股比例（该字段为比例字段，展示为小数表示）例如，对于5股合1股为5.0，对于1股拆5股为0.2</p></td>
</tr>
<tr class="row-even"><td><p>per_cash_div</p></td>
<td><p>float</p></td>
<td><p>每股派现</p></td>
</tr>
<tr class="row-odd"><td><p>per_share_div_ratio</p></td>
<td><p>float</p></td>
<td><p>每股送股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-even"><td><p>per_share_trans_ratio</p></td>
<td><p>float</p></td>
<td><p>每股转增股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-odd"><td><p>allotment_ratio</p></td>
<td><p>float</p></td>
<td><p>每股配股比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-even"><td><p>allotment_price</p></td>
<td><p>float</p></td>
<td><p>配股价</p></td>
</tr>
<tr class="row-odd"><td><p>stk_spo_ratio</p></td>
<td><p>float</p></td>
<td><p>增发比例（该字段为比例字段，展示为小数表示）</p></td>
</tr>
<tr class="row-even"><td><p>stk_spo_price</p></td>
<td><p>float</p></td>
<td><p>增发价格</p></td>
</tr>
<tr class="row-odd"><td><p>forward_adj_factorA</p></td>
<td><p>float</p></td>
<td><p>前复权因子A</p></td>
</tr>
<tr class="row-even"><td><p>forward_adj_factorB</p></td>
<td><p>float</p></td>
<td><p>前复权因子B</p></td>
</tr>
<tr class="row-odd"><td><p>backward_adj_factorA</p></td>
<td><p>float</p></td>
<td><p>后复权因子A</p></td>
</tr>
<tr class="row-even"><td><p>backward_adj_factorB</p></td>
<td><p>float</p></td>
<td><p>后复权因子B</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rehab</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rehab-limit"><span class="std std-ref">在线获取单只股票复权信息限制</span></a></p></li>
<li><p>复权后价格 = 复权前价格 * 复权因子a + 复权因子b</p></li>
</ul>
</div>
</div>
<div class="section" id="get-warrant">
<h4>get_warrant<a class="headerlink" href="#get-warrant" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_warrant">
<code class="sig-name descname">get_warrant</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">stock_owner=''</em>, <em class="sig-param">req=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_warrant" title="Permalink to this definition">¶</a></dt>
<dd><p>通过标的股查询窝轮</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stock_owner</strong> – 所属正股的股票代码,例如：’HK.00700’，会去找腾讯的窝轮，注意有些股票没有对应窝轮牛熊。</p></li>
<li><p><strong>req</strong> – 请求参数组合，from futu.quote.quote_get_warrant import Request</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 10%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>begin</p></td>
<td><p>int</p></td>
<td><p>数据起始点</p></td>
</tr>
<tr class="row-odd"><td><p>num</p></td>
<td><p>int</p></td>
<td><p>请求数据个数，最大200</p></td>
</tr>
<tr class="row-even"><td><p>sort_field</p></td>
<td><p>SortField</p></td>
<td><p>根据哪个字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></p></td>
</tr>
<tr class="row-odd"><td><p>ascend</p></td>
<td><p>bool</p></td>
<td><p>升序True, 降序False</p></td>
</tr>
<tr class="row-even"><td><p>type_list</p></td>
<td><p>list</p></td>
<td><p>窝轮类型过滤列表 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>issuer_list</p></td>
<td><p>list</p></td>
<td><p>发行人过滤列表 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></p></td>
</tr>
<tr class="row-even"><td><p>maturity_time_min</p></td>
<td><p>str</p></td>
<td><p>到期日, 到期日范围的开始时间</p></td>
</tr>
<tr class="row-odd"><td><p>maturity_time_max</p></td>
<td><p>str</p></td>
<td><p>到期日范围的结束时间</p></td>
</tr>
<tr class="row-even"><td><p>ipo_period</p></td>
<td><p>str</p></td>
<td><p>上市日 参见 <a class="reference external" href="Base_API.html#ipoperiod">IpoPeriod</a></p></td>
</tr>
<tr class="row-odd"><td><p>price_type</p></td>
<td><p>str</p></td>
<td><p>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> , 界内证暂不支持界内外筛选</p></td>
</tr>
<tr class="row-even"><td><p>status</p></td>
<td><p>str</p></td>
<td><p>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></p></td>
</tr>
<tr class="row-odd"><td><p>cur_price_min</p></td>
<td><p>float</p></td>
<td><p>最新价过滤起点</p></td>
</tr>
<tr class="row-even"><td><p>cur_price_max</p></td>
<td><p>float</p></td>
<td><p>最新价过滤终点</p></td>
</tr>
<tr class="row-odd"><td><p>strike_price_min</p></td>
<td><p>float</p></td>
<td><p>行使价过滤起点</p></td>
</tr>
<tr class="row-even"><td><p>strike_price_max</p></td>
<td><p>float</p></td>
<td><p>行使价过滤终点</p></td>
</tr>
<tr class="row-odd"><td><p>street_min</p></td>
<td><p>float</p></td>
<td><p>街货占比, 过滤起点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>street_max</p></td>
<td><p>float</p></td>
<td><p>街货占比, 过滤终点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>conversion_min</p></td>
<td><p>float</p></td>
<td><p>换股比率过滤起点</p></td>
</tr>
<tr class="row-even"><td><p>conversion_max</p></td>
<td><p>float</p></td>
<td><p>换股比率过滤终点</p></td>
</tr>
<tr class="row-odd"><td><p>vol_min</p></td>
<td><p>unsigned int</p></td>
<td><p>成交量过滤起点</p></td>
</tr>
<tr class="row-even"><td><p>vol_max</p></td>
<td><p>unsigned int</p></td>
<td><p>成交量过滤终点</p></td>
</tr>
<tr class="row-odd"><td><p>premium_min</p></td>
<td><p>float</p></td>
<td><p>溢价, 过滤起点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>premium_max</p></td>
<td><p>float</p></td>
<td><p>溢价, 过滤终点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>leverage_ratio_min</p></td>
<td><p>float</p></td>
<td><p>杠杆比率过滤起点</p></td>
</tr>
<tr class="row-even"><td><p>leverage_ratio_max</p></td>
<td><p>float</p></td>
<td><p>杠杆比率过滤终点</p></td>
</tr>
<tr class="row-odd"><td><p>delta_min</p></td>
<td><p>float</p></td>
<td><p>对冲值过滤起点, 仅认购认沽支持该字段过滤</p></td>
</tr>
<tr class="row-even"><td><p>delta_max</p></td>
<td><p>float</p></td>
<td><p>对冲值过滤终点, 仅认购认沽支持该字段过滤</p></td>
</tr>
<tr class="row-odd"><td><p>implied_min</p></td>
<td><p>float</p></td>
<td><p>引伸波幅过滤起点, 仅认购认沽支持该字段过滤</p></td>
</tr>
<tr class="row-even"><td><p>implied_max</p></td>
<td><p>float</p></td>
<td><p>引伸波幅过滤终点, 仅认购认沽支持该字段过滤</p></td>
</tr>
<tr class="row-odd"><td><p>recovery_price_min</p></td>
<td><p>float</p></td>
<td><p>收回价过滤起点, 仅牛熊证支持该字段过滤</p></td>
</tr>
<tr class="row-even"><td><p>recovery_price_max</p></td>
<td><p>float</p></td>
<td><p>收回价过滤终点, 仅牛熊证支持该字段过滤</p></td>
</tr>
<tr class="row-odd"><td><p>price_recovery_ratio_min</p></td>
<td><p>float</p></td>
<td><p>正股距收回价, 过滤起点, 仅牛熊证支持该字段过滤（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>price_recovery_ratio_max</p></td>
<td><p>float</p></td>
<td><p>正股距收回价, 过滤终点, 仅牛熊证支持该字段过滤（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回（warrant_data_list,last_page, all_count）</p>
<p>warrant_data_list pd dataframe数据，数据列格式如下:</p>
<p>last_page 是否是最后一页</p>
<p>all_count 列表总数量</p>
</dd>
</dl>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 13%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stock</p></td>
<td><p>str</p></td>
<td><p>窝轮代码</p></td>
</tr>
<tr class="row-odd"><td><p>stock_owner</p></td>
<td><p>str</p></td>
<td><p>所属正股</p></td>
</tr>
<tr class="row-even"><td><p>type</p></td>
<td><p>str</p></td>
<td><p>窝轮类型 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>issuer</p></td>
<td><p>Issuer</p></td>
<td><p>发行人 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></p></td>
</tr>
<tr class="row-even"><td><p>maturity_time</p></td>
<td><p>str</p></td>
<td><p>到期日</p></td>
</tr>
<tr class="row-odd"><td><p>maturity_timestamp</p></td>
<td><p>float</p></td>
<td><p><span class="strike">到期日时间戳</span></p></td>
</tr>
<tr class="row-even"><td><p>list_time</p></td>
<td><p>str</p></td>
<td><p>上市时间</p></td>
</tr>
<tr class="row-odd"><td><p>list_timestamp</p></td>
<td><p>float</p></td>
<td><p><span class="strike">上市时间戳</span></p></td>
</tr>
<tr class="row-even"><td><p>last_trade_time</p></td>
<td><p>str</p></td>
<td><p>最后交易日</p></td>
</tr>
<tr class="row-odd"><td><p>last_trade_timestamp</p></td>
<td><p>float</p></td>
<td><p><span class="strike">最后交易日时间戳</span></p></td>
</tr>
<tr class="row-even"><td><p>recovery_price</p></td>
<td><p>float</p></td>
<td><p>收回价，仅牛熊证支持该字段</p></td>
</tr>
<tr class="row-odd"><td><p>conversion_ratio</p></td>
<td><p>float</p></td>
<td><p>换股比率</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手数量</p></td>
</tr>
<tr class="row-odd"><td><p>strike_price</p></td>
<td><p>float</p></td>
<td><p>行使价</p></td>
</tr>
<tr class="row-even"><td><p>last_close_price</p></td>
<td><p>float</p></td>
<td><p>昨收价</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>str</p></td>
<td><p>名称</p></td>
</tr>
<tr class="row-even"><td><p>cur_price</p></td>
<td><p>float</p></td>
<td><p>当前价</p></td>
</tr>
<tr class="row-odd"><td><p>price_change_val</p></td>
<td><p>float</p></td>
<td><p>涨跌额</p></td>
</tr>
<tr class="row-even"><td><p>status</p></td>
<td><p>str</p></td>
<td><p>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></p></td>
</tr>
<tr class="row-odd"><td><p>bid_price</p></td>
<td><p>float</p></td>
<td><p>买入价</p></td>
</tr>
<tr class="row-even"><td><p>ask_price</p></td>
<td><p>float</p></td>
<td><p>卖出价</p></td>
</tr>
<tr class="row-odd"><td><p>bid_vol</p></td>
<td><p>int</p></td>
<td><p>买量</p></td>
</tr>
<tr class="row-even"><td><p>ask_vol</p></td>
<td><p>int</p></td>
<td><p>卖量</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>unsigned int</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>成交额</p></td>
</tr>
<tr class="row-odd"><td><p>score</p></td>
<td><p>float</p></td>
<td><p>综合评分</p></td>
</tr>
<tr class="row-even"><td><p>premium</p></td>
<td><p>float</p></td>
<td><p>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>break_even_point</p></td>
<td><p>float</p></td>
<td><p>打和点</p></td>
</tr>
<tr class="row-even"><td><p>leverage</p></td>
<td><p>float</p></td>
<td><p>杠杆比率（倍）</p></td>
</tr>
<tr class="row-odd"><td><p>ipop</p></td>
<td><p>float</p></td>
<td><p>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>price_recovery_ratio</p></td>
<td><p>float</p></td>
<td><p>正股距收回价，仅牛熊证支持该字段（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>conversion_price</p></td>
<td><p>float</p></td>
<td><p>换股价</p></td>
</tr>
<tr class="row-even"><td><p>street_rate</p></td>
<td><p>float</p></td>
<td><p>街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>street_vol</p></td>
<td><p>int</p></td>
<td><p>街货量</p></td>
</tr>
<tr class="row-even"><td><p>amplitude</p></td>
<td><p>float</p></td>
<td><p>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>issue_size</p></td>
<td><p>int</p></td>
<td><p>发行量</p></td>
</tr>
<tr class="row-even"><td><p>high_price</p></td>
<td><p>float</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-odd"><td><p>low_price</p></td>
<td><p>float</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-even"><td><p>implied_volatility</p></td>
<td><p>float</p></td>
<td><p>引伸波幅，仅认购认沽支持该字段</p></td>
</tr>
<tr class="row-odd"><td><p>delta</p></td>
<td><p>float</p></td>
<td><p>对冲值，仅认购认沽支持该字段</p></td>
</tr>
<tr class="row-even"><td><p>effective_leverage</p></td>
<td><p>float</p></td>
<td><p>有效杠杆</p></td>
</tr>
<tr class="row-odd"><td><p>upper_strike_price</p></td>
<td><p>float</p></td>
<td><p>上限价，仅界内证支持该字段</p></td>
</tr>
<tr class="row-even"><td><p>lower_strike_price</p></td>
<td><p>float</p></td>
<td><p>下限价，仅界内证支持该字段</p></td>
</tr>
<tr class="row-odd"><td><p>inline_price_status</p></td>
<td><p>str</p></td>
<td><p>界内界外 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">futu.quote.quote_get_warrant</span> <span class="kn">import</span> <span class="n">Request</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">req</span><span class="o">=</span><span class="n">Request</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">sort_field</span><span class="o">=</span><span class="n">SortField</span><span class="o">.</span><span class="n">TURNOVER</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_warrant</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">,</span><span class="n">req</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-warrant-limit"><span class="std std-ref">获取窝轮限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-flow">
<h4>get_capital_flow<a class="headerlink" href="#get-capital-flow" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_capital_flow">
<code class="sig-name descname">get_capital_flow</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>获取个股资金流向</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 需要查询的股票代码.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 9%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>in_flow</p></td>
<td><p>float</p></td>
<td><p>净流入的资金额度</p></td>
</tr>
<tr class="row-odd"><td><p>capital_flow_item_time</p></td>
<td><p>string</p></td>
<td><p>开始时间字符串,以分钟为单位</p></td>
</tr>
<tr class="row-even"><td><p>last_valid_time</p></td>
<td><p>string</p></td>
<td><p>数据最后有效时间字符串</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_flow</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-flow-limit"><span class="std std-ref">获取资金流向限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-distribution">
<h4>get_capital_distribution<a class="headerlink" href="#get-capital-distribution" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_capital_distribution">
<code class="sig-name descname">get_capital_distribution</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>获取个股资金分布</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> – 需要查询的股票代码.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>capital_in_big</p></td>
<td><p>float</p></td>
<td><p>流入资金额度，大单</p></td>
</tr>
<tr class="row-odd"><td><p>capital_in_mid</p></td>
<td><p>float</p></td>
<td><p>流入资金额度，中单</p></td>
</tr>
<tr class="row-even"><td><p>capital_in_small</p></td>
<td><p>float</p></td>
<td><p>流入资金额度，小单</p></td>
</tr>
<tr class="row-odd"><td><p>capital_out_big</p></td>
<td><p>float</p></td>
<td><p>流出资金额度，大单</p></td>
</tr>
<tr class="row-even"><td><p>capital_out_mid</p></td>
<td><p>float</p></td>
<td><p>流出资金额度，中单</p></td>
</tr>
<tr class="row-odd"><td><p>capital_out_small</p></td>
<td><p>float</p></td>
<td><p>流出资金额度，小单</p></td>
</tr>
<tr class="row-even"><td><p>update_time</p></td>
<td><p>str</p></td>
<td><p>更新时间字符串</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_distribution</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-distribution-limit"><span class="std std-ref">获取资金分布限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-user-security">
<h4>get_user_security<a class="headerlink" href="#get-user-security" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_user_security">
<code class="sig-name descname">get_user_security</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">group_name</em><span class="sig-paren">)</span><a class="headerlink" href="#get_user_security" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定分组的自选股列表（不支持持仓分组）</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group_name</strong> – 需要查询的自选股分组名称.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>str</p></td>
<td><p>名字</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数，期权表示每份合约股数，期货表示合约乘数</p></td>
</tr>
<tr class="row-odd"><td><p>stock_type</p></td>
<td><p>str</p></td>
<td><p>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></p></td>
</tr>
<tr class="row-even"><td><p>stock_child_type</p></td>
<td><p>str</p></td>
<td><p>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></p></td>
</tr>
<tr class="row-odd"><td><p>stock_owner</p></td>
<td><p>str</p></td>
<td><p>窝轮所属正股的代码，或期权标的股的代码</p></td>
</tr>
<tr class="row-even"><td><p>option_type</p></td>
<td><p>str</p></td>
<td><p>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></p></td>
</tr>
<tr class="row-odd"><td><p>strike_time</p></td>
<td><p>str</p></td>
<td><p>期权行权日（港股A股默认是北京时间）</p></td>
</tr>
<tr class="row-even"><td><p>strike_price</p></td>
<td><p>float</p></td>
<td><p>期权行权价</p></td>
</tr>
<tr class="row-odd"><td><p>suspension</p></td>
<td><p>bool</p></td>
<td><p>期权是否停牌(True表示停牌)</p></td>
</tr>
<tr class="row-even"><td><p>listing_date</p></td>
<td><p>str</p></td>
<td><p>上市时间</p></td>
</tr>
<tr class="row-odd"><td><p>stock_id</p></td>
<td><p>int</p></td>
<td><p>股票id</p></td>
</tr>
<tr class="row-even"><td><p>delisting</p></td>
<td><p>bool</p></td>
<td><p>是否退市</p></td>
</tr>
<tr class="row-odd"><td><p>main_contract</p></td>
<td><p>bool</p></td>
<td><p>是否主连合约</p></td>
</tr>
<tr class="row-even"><td><p>last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间，主连，当月，下月等期货没有该字段</p></td>
</tr>
</tbody>
</table>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_user_security</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-user-security-limit"><span class="std std-ref">获取指定分组的自选股列表</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="modify-user-security">
<h4>modify_user_security<a class="headerlink" href="#modify-user-security" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="modify_user_security">
<code class="sig-name descname">modify_user_security</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">group_name</em>, <em class="sig-param">op</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#modify_user_security" title="Permalink to this definition">¶</a></dt>
<dd><p>修改指定分组的自选股列表（不支持系统分组）</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group_name</strong> – 需要修改的自选股分组名称.</p></li>
<li><p><strong>op</strong> – 操作枚举值.查看 <a class="reference external" href="Base_API.html#modifyusersecurityop">ModifyUserSecurityOp</a></p></li>
<li><p><strong>code_list</strong> – 股票列表，[‘HK.00700’,’HK.00701’]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK ‘success’</p>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">modify_user_security</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">,</span> <span class="n">ModifyUserSecurityOp</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#modify-user-security-limit"><span class="std std-ref">修改指定分组的自选股列表</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-stock-filter">
<h4>get_stock_filter<a class="headerlink" href="#get-stock-filter" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_filter">
<code class="sig-name descname">get_stock_filter</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em>, <em class="sig-param">filter_list</em>, <em class="sig-param">plate_code=None</em>, <em class="sig-param">begin=0</em>, <em class="sig-param">num=200</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>获取条件选股</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market</strong> – 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></p></li>
<li><p><strong>filter_list</strong> – <div class="line-block">
<div class="line">简单属性筛选条件的枚举值，筛选条件是SimpleFilter，AccumulateFilter或FinancialFilter类型数据的list对象field。</div>
</div>
<div class="line-block">
<div class="line">SimpleFilter对象field的相关参数如下：</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 8%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stock_field</p></td>
<td><p>str</p></td>
<td><p>StockField 简单属性，取值见 <a class="reference external" href="Base_API.html#stockfield-simplefilter">StockField</a></p></td>
</tr>
<tr class="row-odd"><td><p>filter_min</p></td>
<td><p>float</p></td>
<td><p>区间下限，闭区间</p></td>
</tr>
<tr class="row-even"><td><p>filter_max</p></td>
<td><p>float</p></td>
<td><p>区间上限，闭区间</p></td>
</tr>
<tr class="row-odd"><td><p>is_no_filter</p></td>
<td><p>bool</p></td>
<td><p>该字段是否需要筛选。</p></td>
</tr>
<tr class="row-even"><td><p>sort</p></td>
<td><p>str</p></td>
<td><p>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">AccumulateFilter对象field的相关参数如下：</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 8%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stock_field</p></td>
<td><p>str</p></td>
<td><p>StockField 累积字段，取值见 <a class="reference external" href="Base_API.html#stockfield-accumulatefilter">StockField</a></p></td>
</tr>
<tr class="row-odd"><td><p>filter_min</p></td>
<td><p>float</p></td>
<td><p>区间下限，闭区间</p></td>
</tr>
<tr class="row-even"><td><p>filter_max</p></td>
<td><p>float</p></td>
<td><p>区间上限，闭区间</p></td>
</tr>
<tr class="row-odd"><td><p>is_no_filter</p></td>
<td><p>bool</p></td>
<td><p>该字段是否需要筛选。</p></td>
</tr>
<tr class="row-even"><td><p>sort</p></td>
<td><p>str</p></td>
<td><p>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></p></td>
</tr>
<tr class="row-odd"><td><p>days</p></td>
<td><p>int</p></td>
<td><p>所筛选的数据的累计天数</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">FinancialFilter对象field的相关参数如下：</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 8%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stock_field</p></td>
<td><p>str</p></td>
<td><p>StockField 财务字段，取值见 <a class="reference external" href="Base_API.html#stockfield-financialfilter">StockField</a></p></td>
</tr>
<tr class="row-odd"><td><p>filter_min</p></td>
<td><p>float</p></td>
<td><p>区间下限，闭区间</p></td>
</tr>
<tr class="row-even"><td><p>filter_max</p></td>
<td><p>float</p></td>
<td><p>区间上限，闭区间</p></td>
</tr>
<tr class="row-odd"><td><p>is_no_filter</p></td>
<td><p>bool</p></td>
<td><p>该字段是否需要筛选。</p></td>
</tr>
<tr class="row-even"><td><p>sort</p></td>
<td><p>str</p></td>
<td><p>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></p></td>
</tr>
<tr class="row-odd"><td><p>quarter</p></td>
<td><p>str</p></td>
<td><p>财报累积时间，取值见 <a class="reference external" href="Base_API.html#financialquarter">FinancialQuarter</a></p></td>
</tr>
</tbody>
</table>
</p></li>
<li><p><strong>plate_code</strong> – 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码。支持的板块代码详情请查看下面的Note。</p></li>
<li><p><strong>begin</strong> – 数据起始点</p></li>
<li><p><strong>num</strong> – 请求数据个数，最大200</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><div class="line-block">
<div class="line">(ret, data)</div>
<div class="line"><strong>ret</strong> - ret != RET_OK 返回错误字符串, ret == RET_OK 返回（last_page, all_count, stock_list）。对于不支持的板块，返回的数据是(True, 0, [])。</div>
<div class="line"><strong>last_page</strong> - 是否是最后一页</div>
<div class="line"><strong>all_count</strong> - 列表总数量</div>
<div class="line"><strong>stock_list</strong> - 返回的是SimpleFilter类型数据的list对象ret_list，对象ret_list中stock_code和stock_name默认都会返回，同时filter_list中设置的字段也会返回。返回的数据列字段如下:</div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 8%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>stock_code</p></td>
<td><p>str</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>stock_name</p></td>
<td><p>str</p></td>
<td><p>股票名字</p></td>
</tr>
<tr class="row-even"><td><p>cur_price</p></td>
<td><p>float</p></td>
<td><p>最新价</p></td>
</tr>
<tr class="row-odd"><td><p>cur_price_to_highest_52weeks_ratio</p></td>
<td><p>float</p></td>
<td><p>(现价 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>cur_price_to_lowest_52weeks_ratio</p></td>
<td><p>float</p></td>
<td><p>(现价 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>high_price_to_highest_52weeks_ratio</p></td>
<td><p>float</p></td>
<td><p>(今日最高 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>low_price_to_lowest_52weeks_ratio</p></td>
<td><p>float</p></td>
<td><p>(今日最低 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>volume_ratio</p></td>
<td><p>float</p></td>
<td><p>量比</p></td>
</tr>
<tr class="row-even"><td><p>bid_ask_ratio</p></td>
<td><p>float</p></td>
<td><p>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>lot_price</p></td>
<td><p>float</p></td>
<td><p>每手价格</p></td>
</tr>
<tr class="row-even"><td><p>market_val</p></td>
<td><p>float</p></td>
<td><p>市值</p></td>
</tr>
<tr class="row-odd"><td><p>pe_annual</p></td>
<td><p>float</p></td>
<td><p>市盈率</p></td>
</tr>
<tr class="row-even"><td><p>pe_ttm</p></td>
<td><p>float</p></td>
<td><p>市盈率TTM</p></td>
</tr>
<tr class="row-odd"><td><p>pb_rate</p></td>
<td><p>float</p></td>
<td><p>市净率</p></td>
</tr>
<tr class="row-even"><td><p>change_rate_5min</p></td>
<td><p>float</p></td>
<td><p>五分钟价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>change_rate_begin_year</p></td>
<td><p>float</p></td>
<td><p>年初至今价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>change_rate</p></td>
<td><p>float</p></td>
<td><p>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>amplitude</p></td>
<td><p>float</p></td>
<td><p>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>float</p></td>
<td><p>日均成交量</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>float</p></td>
<td><p>日均成交额</p></td>
</tr>
<tr class="row-odd"><td><p>turnover_rate</p></td>
<td><p>float</p></td>
<td><p>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>net_profit</p></td>
<td><p>float</p></td>
<td><p>净利润</p></td>
</tr>
<tr class="row-even"><td><p>net_profix_growth</p></td>
<td><p>float</p></td>
<td><p>净利润增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>sum_of_business</p></td>
<td><p>float</p></td>
<td><p>营业收入</p></td>
</tr>
<tr class="row-even"><td><p>sum_of_business_growth</p></td>
<td><p>float</p></td>
<td><p>营业同比增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>net_profit_rate</p></td>
<td><p>float</p></td>
<td><p>净利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>gross_profit_rate</p></td>
<td><p>float</p></td>
<td><p>毛利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-odd"><td><p>debt_asset_rate</p></td>
<td><p>float</p></td>
<td><p>资产负债率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
<tr class="row-even"><td><p>return_on_equity_rate</p></td>
<td><p>float</p></td>
<td><p>净资产收益率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">futu.quote.quote_stockfilter_info</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">simple_filter</span> <span class="o">=</span> <span class="n">SimpleFilter</span><span class="p">()</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_min</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_max</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">stock_field</span> <span class="o">=</span> <span class="n">StockField</span><span class="o">.</span><span class="n">CUR_PRICE</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">is_no_filter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">SortDir</span><span class="o">.</span><span class="n">ASCEND</span>

<span class="n">acc_filter</span> <span class="o">=</span> <span class="n">AccumulateFilter</span><span class="p">()</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">filter_min</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">filter_max</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">days</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">stock_field</span> <span class="o">=</span> <span class="n">StockField</span><span class="o">.</span><span class="n">CHANGE_RATE</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">is_no_filter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">SortDir</span><span class="o">.</span><span class="n">None</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">ls</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_filter</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="p">[</span><span class="n">simple_filter</span><span class="p">,</span> <span class="n">acc_filter</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="n">last_page</span><span class="p">,</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span> <span class="o">=</span> <span class="n">ls</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ret_list</span><span class="p">),</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error: &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<blockquote>
<div><ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-stock-filter-limit"><span class="std std-ref">获取条件选股</span></a></p></li>
</ul>
</div></blockquote>
<ul>
<li><p>条件选股支持的板块或指数代码如下:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>代码</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HK.Motherboard</p></td>
<td><p>港股主板</p></td>
</tr>
<tr class="row-odd"><td><p>HK.GEM</p></td>
<td><p>港股创业板</p></td>
</tr>
<tr class="row-even"><td><p>HK.BK1911</p></td>
<td><p>主板H股</p></td>
</tr>
<tr class="row-odd"><td><p>HK.BK1912</p></td>
<td><p>创业板H股</p></td>
</tr>
<tr class="row-even"><td><p>US.NYSE</p></td>
<td><p>纽交所</p></td>
</tr>
<tr class="row-odd"><td><p>US.AMEX</p></td>
<td><p>美交所</p></td>
</tr>
<tr class="row-even"><td><p>US.NASDAQ</p></td>
<td><p>纳斯达克</p></td>
</tr>
<tr class="row-odd"><td><p>SH.3000000</p></td>
<td><p>上海主板</p></td>
</tr>
<tr class="row-even"><td><p>SZ.3000001</p></td>
<td><p>深证主板</p></td>
</tr>
<tr class="row-odd"><td><p>SZ.3000004</p></td>
<td><p>深证创业板</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>利用获取子板块列表函数get_plate_list获取子板块代码，条件选股支持的板块分别为1.港股的行业板块和概念板块。2.美股的行业板块。3.沪深的行业板块，概念板块和地域板块。</p></li>
</ul>
</div>
</div>
<div class="section" id="get-ipo-list">
<h4>get_ipo_list<a class="headerlink" href="#get-ipo-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_ipo_list">
<code class="sig-name descname">get_ipo_list</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em><span class="sig-paren">)</span><a class="headerlink" href="#get_ipo_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定市场的ipo列表</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>market</strong> – 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 5%" />
<col style="width: 75%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>str</p></td>
<td><p>股票代码，例如’HK.12345’</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>str</p></td>
<td><p>股票名称</p></td>
</tr>
<tr class="row-even"><td><p>list_time</p></td>
<td><p>str</p></td>
<td><p>上市日期，美股是预计上市日期</p></td>
</tr>
<tr class="row-odd"><td><p>list_timestamp</p></td>
<td><p>float</p></td>
<td><p>上市日期时间戳，美股是预计上市日期时间戳</p></td>
</tr>
<tr class="row-even"><td><p>apply_code</p></td>
<td><p>str</p></td>
<td><p>申购代码，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>issue_size</p></td>
<td><p>int</p></td>
<td><p>发行总数，A股适用；发行量，美股适用</p></td>
</tr>
<tr class="row-even"><td><p>online_issue_size</p></td>
<td><p>int</p></td>
<td><p>网上发行量，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>apply_upper_limit</p></td>
<td><p>int</p></td>
<td><p>申购上限，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>apply_limit_market_value</p></td>
<td><p>int</p></td>
<td><p>顶格申购需配市值，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>is_estimate_ipo_price</p></td>
<td><p>bool</p></td>
<td><p>是否预估发行价，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>ipo_price</p></td>
<td><p>float</p></td>
<td><p>发行价 预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>industry_pe_rate</p></td>
<td><p>float</p></td>
<td><p>行业市盈率，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>is_estimate_winning_ratio</p></td>
<td><p>bool</p></td>
<td><p>是否预估中签率，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>winning_ratio</p></td>
<td><p>float</p></td>
<td><p>中签率 该字段为百分比字段，默认不展示%，如20实际对应20%。预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</p></td>
</tr>
<tr class="row-even"><td><p>issue_pe_rate</p></td>
<td><p>float</p></td>
<td><p>发行市盈率，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>apply_time</p></td>
<td><p>str</p></td>
<td><p>申购日期字符串，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>apply_timestamp</p></td>
<td><p>float</p></td>
<td><p>申购日期时间戳，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>winning_time</p></td>
<td><p>str</p></td>
<td><p>公布中签日期字符串，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>winning_timestamp</p></td>
<td><p>float</p></td>
<td><p>公布中签日期时间戳，A股适用</p></td>
</tr>
<tr class="row-odd"><td><p>is_has_won</p></td>
<td><p>bool</p></td>
<td><p>是否已经公布中签号，A股适用</p></td>
</tr>
<tr class="row-even"><td><p>winning_num_data</p></td>
<td><p>str</p></td>
<td><p>中签号，A股适用。格式为类似：末”五”位数:12345,12346n末”六”位数:123456</p></td>
</tr>
<tr class="row-odd"><td><p>ipo_price_min</p></td>
<td><p>float</p></td>
<td><p>最低发售价，港股适用；最低发行价，美股适用</p></td>
</tr>
<tr class="row-even"><td><p>ipo_price_max</p></td>
<td><p>float</p></td>
<td><p>最高发售价，港股适用；最高发行价，美股适用</p></td>
</tr>
<tr class="row-odd"><td><p>list_price</p></td>
<td><p>float</p></td>
<td><p>上市价，港股适用</p></td>
</tr>
<tr class="row-even"><td><p>lot_size</p></td>
<td><p>int</p></td>
<td><p>每手股数</p></td>
</tr>
<tr class="row-odd"><td><p>entrance_price</p></td>
<td><p>float</p></td>
<td><p>入场费，港股适用</p></td>
</tr>
<tr class="row-even"><td><p>is_subscribe_status</p></td>
<td><p>bool</p></td>
<td><p>是否为认购状态，True-认购中，False-待上市</p></td>
</tr>
<tr class="row-odd"><td><p>apply_end_time</p></td>
<td><p>str</p></td>
<td><p>截止认购日期字符串，港股适用</p></td>
</tr>
<tr class="row-even"><td><p>apply_end_timestamp</p></td>
<td><p>float</p></td>
<td><p>截止认购日期时间戳 因需处理认购手续，富途认购截止时间会早于交易所公布的日期，港股适用</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_ipo_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-ipo-list-limit"><span class="std std-ref">获取IPO列表的限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="get-future-info">
<h4>get_future_info<a class="headerlink" href="#get-future-info" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_future_info">
<code class="sig-name descname">get_future_info</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_future_info" title="Permalink to this definition">¶</a></dt>
<dd><p>获取期货合约资料</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code_list</strong> – 期货</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 12%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>string</p></td>
<td><p>股票代码</p></td>
</tr>
<tr class="row-odd"><td><p>name</p></td>
<td><p>string</p></td>
<td><p>股票名称</p></td>
</tr>
<tr class="row-even"><td><p>owner</p></td>
<td><p>string</p></td>
<td><p>标的</p></td>
</tr>
<tr class="row-odd"><td><p>exchange</p></td>
<td><p>string</p></td>
<td><p>交易所</p></td>
</tr>
<tr class="row-even"><td><p>type</p></td>
<td><p>string</p></td>
<td><p>合约类型</p></td>
</tr>
<tr class="row-odd"><td><p>size</p></td>
<td><p>float</p></td>
<td><p>合约规模</p></td>
</tr>
<tr class="row-even"><td><p>size_unit</p></td>
<td><p>string</p></td>
<td><p>合约规模单位</p></td>
</tr>
<tr class="row-odd"><td><p>price_currency</p></td>
<td><p>string</p></td>
<td><p>报价货币</p></td>
</tr>
<tr class="row-even"><td><p>price_unit</p></td>
<td><p>string</p></td>
<td><p>报价单位</p></td>
</tr>
<tr class="row-odd"><td><p>min_change</p></td>
<td><p>float</p></td>
<td><p>最小变动</p></td>
</tr>
<tr class="row-even"><td><p>min_change_unit</p></td>
<td><p>string</p></td>
<td><p>最小变动的单位</p></td>
</tr>
<tr class="row-odd"><td><p>trade_time</p></td>
<td><p>string</p></td>
<td><p>交易时间</p></td>
</tr>
<tr class="row-even"><td><p>time_zone</p></td>
<td><p>string</p></td>
<td><p>时区</p></td>
</tr>
<tr class="row-odd"><td><p>last_trade_time</p></td>
<td><p>string</p></td>
<td><p>最后交易时间，主连，当月，下月等期货没有该字段</p></td>
</tr>
<tr class="row-even"><td><p>exchange_format_url</p></td>
<td><p>string</p></td>
<td><p>交易所规格url</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_future_info</span><span class="p">([</span><span class="s2">&quot;HK.MPImain&quot;</span><span class="p">,</span> <span class="s2">&quot;HK.HOImain&quot;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-future-info-limit"><span class="std std-ref">获取期货合约资料限制</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="request-trading-days">
<h4>request_trading_days<a class="headerlink" href="#request-trading-days" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="request_trading_days">
<code class="sig-name descname">request_trading_days</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">market</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#request_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>在线请求交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market</strong> – 市场类型，<a class="reference external" href="Base_API.html#tradedatemarket">TradeDateMarket</a></p></li>
<li><p><strong>start</strong> – 起始日期。例如’2018-01-01’。</p></li>
<li><p><strong>end</strong> – <p>结束日期。例如’2018-01-01’。
start和end的组合如下：</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>start类型</p></th>
<th class="head"><p>end类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>str</p></td>
<td><p>str</p></td>
<td><p>start和end分别为指定的日期</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>str</p></td>
<td><p>start为end往前365天</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>None</p></td>
<td><p>end为start往后365天</p></td>
</tr>
<tr class="row-odd"><td><p>None</p></td>
<td><p>None</p></td>
<td><p>end为当前日期，start为end往前365天</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time</p></td>
<td><p>str</p></td>
<td><p>时间</p></td>
</tr>
<tr class="row-odd"><td><p>trade_date_type</p></td>
<td><p>str</p></td>
<td><p>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></p></td>
</tr>
</tbody>
</table>
</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_trading_days</span><span class="p">(</span><span class="n">TradeDateMarket</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-10&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-trading-day-limit"><span class="std std-ref">在线获取交易日</span></a></p></li>
</ul>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="sysnotifyhandlerbase-opend">
<h3>SysNotifyHandlerBase - OpenD通知回调<a class="headerlink" href="#sysnotifyhandlerbase-opend" title="Permalink to this headline">¶</a></h3>
<p>通知OpenD一些重要消息，类似连接断开等。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">SysNotifyTest</span><span class="p">(</span><span class="n">SysNotifyHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SysNotifyTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_pb</span><span class="p">)</span>
        <span class="n">notify_type</span><span class="p">,</span> <span class="n">sub_type</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;SysNotifyTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">SysNotifyTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="on-recv-rsp">
<h4>on_recv_rsp<a class="headerlink" href="#on-recv-rsp" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="on_recv_rsp">
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span><a class="headerlink" href="#on_recv_rsp" title="Permalink to this definition">¶</a></dt>
<dd><p>在收到OpenD通知推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ret_code, notify_type, sub_type, msg</p>
</dd>
</dl>
</dd></dl>

<table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 14%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>参数</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>notify_type</p></td>
<td><p>str</p></td>
<td><p>通知类型，见 <a class="reference external" href="Base_API.html#sysnotifytype">SysNotifyType</a></p></td>
</tr>
<tr class="row-odd"><td><p>sub_type</p></td>
<td><p>str</p></td>
<td><p>消息类型，不同的notify_type，取值也不同，见下表</p></td>
</tr>
<tr class="row-even"><td><p>msg</p></td>
<td><p>str, dict</p></td>
<td><p>消息描述，不同的notify_type，取值也不同，见下表</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 26%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>notify_type</p></th>
<th class="head"><p>sub_type</p></th>
<th class="head"><p>msg</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SysNotifyType.NONE</p></td>
<td><p>None</p></td>
<td><p>None</p></td>
</tr>
<tr class="row-odd"><td><p>SysNotifyType.GTW_EVENT</p></td>
<td><p>str, 取值见 <a class="reference external" href="Base_API.html#gtweventtype">GtwEventType</a></p></td>
<td><p>str，通知描述信息</p></td>
</tr>
<tr class="row-even"><td><p>SysNotifyType.PROGRAM_STATUS</p></td>
<td><p>str, 取值见 <a class="reference external" href="Base_API.html#programstatustype">ProgramStatusType</a></p></td>
<td><p>str，通知描述信息</p></td>
</tr>
<tr class="row-odd"><td><p>SysNotifyType.CONN_STATUS</p></td>
<td><p>None</p></td>
<td><div class="line-block">
<div class="line">{‘qot_logined’: bool, 是否已登录行情连接</div>
<div class="line">‘trd_logined’: bool} 是否已登录交易连接</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>SysNotifyType.QOT_RIGHT</p></td>
<td><p>None</p></td>
<td><div class="line-block">
<div class="line">{‘hk_qot_right’: str, 港股行情权限</div>
<div class="line">‘cn_qot_right’: str, A股行情权限</div>
<div class="line">‘us_qot_right’: str, 美股行情权限</div>
<div class="line">‘hk_option_qot_right’: str, 港股期权行情权限</div>
<div class="line">‘has_us_option_qot_right’: bool, 是否有美股期权行情权限</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>SysNotifyType.API_LEVEL</p></td>
<td><p>None</p></td>
<td><p>str, API用户等级</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="stockquotehandlerbase">
<h3>StockQuoteHandlerBase - 实时报价回调<a class="headerlink" href="#stockquotehandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的订阅股票的报价。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">StockQuoteTest</span><span class="p">(</span><span class="n">StockQuoteHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">StockQuoteTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># StockQuoteTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">StockQuoteTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id6">
<h4>on_recv_rsp<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时报价推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>参见 <a class="reference internal" href="#get_stock_quote">get_stock_quote</a> 的返回值</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="orderbookhandlerbase">
<h3>OrderBookHandlerBase - 实时摆盘回调<a class="headerlink" href="#orderbookhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的实时摆盘。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">OrderBookTest</span><span class="p">(</span><span class="n">OrderBookHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">OrderBookTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># OrderBookTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">OrderBookTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id7">
<h4>on_recv_rsp<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实摆盘数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>参见 <a class="reference internal" href="#get_order_book">get_order_book</a> 的返回值</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="curklinehandlerbase-k">
<h3>CurKlineHandlerBase - 实时k线推送回调<a class="headerlink" href="#curklinehandlerbase-k" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的k线数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">CurKlineTest</span><span class="p">(</span><span class="n">CurKlineHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CurKlineTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># CurKlineTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">CurKlineTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_1M</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id8">
<h4>on_recv_rsp<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时k线数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>参见 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 的返回值，推送回调比 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 少了市盈率和换手率字段</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="tickerhandlerbase">
<h3>TickerHandlerBase - 实时逐笔推送回调<a class="headerlink" href="#tickerhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的逐笔数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">TickerTest</span><span class="p">(</span><span class="n">TickerHandlerBase</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
                <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TickerTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># TickerTest自己的处理逻辑</span>

                <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">TickerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>行情连接断开重连后，OpenD拉取断开期间的逐笔数据（最多50根）并推送，可通过push_data_type字段区分</p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id9">
<h4>on_recv_rsp<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>参见 <a class="reference internal" href="#get_rt_ticker">get_rt_ticker</a> 的返回值，回调比get_rt_ticker多返回一个字段：push_data_type，该字段指明数据来源，参见 <a class="reference external" href="Base_API.html#pushdatatype">PushDataType</a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="rtdatahandlerbase">
<h3>RTDataHandlerBase - 实时分时推送回调<a class="headerlink" href="#rtdatahandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的分时数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">RTDataTest</span><span class="p">(</span><span class="n">RTDataHandlerBase</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
                <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">RTDataTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># RTDataTest自己的处理逻辑</span>

                <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">RTDataTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id10">
<h4>on_recv_rsp<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>参见 <a class="reference internal" href="#get_rt_data">get_rt_data</a> 的返回值</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="brokerhandlerbase">
<h3>BrokerHandlerBase - 实时经纪推送回调<a class="headerlink" href="#brokerhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的经纪数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BrokerTest</span><span class="p">(</span><span class="n">BrokerHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">BrokerTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: stock: {} data: {} &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>  <span class="c1"># BrokerTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>


<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">BrokerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id11">
<h4>on_recv_rsp<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="sig-name descname">on_recv_rsp</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时经纪数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rsp_pb</strong> – 派生类中不需要直接处理该参数</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>成功时返回(RET_OK, stock_code, [bid_frame_table, ask_frame_table]), 相关frame table含义见 <a class="reference internal" href="#get_broker_queue">get_broker_queue</a> 的返回值说明</p>
<p>失败时返回(RET_ERROR, ERR_MSG, None)</p>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Trade_API.html" class="btn btn-neutral float-right" title="交易API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Base_API.html" class="btn btn-neutral" title="基础API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, futu.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.18',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
    console.log("Layout By futu-api");
</script>


</body>
</html>