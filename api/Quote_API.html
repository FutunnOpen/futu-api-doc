

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>行情API &mdash; futu-api-doc 3.24 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  

  
    <link rel="top" title="futu-api-doc 3.24 文档" href="../index.html"/>
        <link rel="next" title="交易API" href="Trade_API.html"/>
        <link rel="prev" title="基础API" href="Base_API.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> futu-api-doc
          

          
          </a>

          
            
            
              <div class="version">
                3.24
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">基础</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/FutuOpenDGuide.html">FutuOpenD使用说明</a></li>
</ul>
<p class="caption"><span class="caption-text">PROTOCOL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../protocol/intro.html">协议接口</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/base_define.html">基础定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/quote_protocol.html">行情协议</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/trade_protocol.html">交易协议</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="Base_API.html">基础API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">行情API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">一分钟上手</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">接口类对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openquotecontext">OpenQuoteContext - 行情上下文</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#init">__init__</a></li>
<li class="toctree-l4"><a class="reference internal" href="#close">close</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stop">stop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-handler">set_handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trading-days"><span class="strike">get_trading_days</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-basicinfo">get_stock_basicinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-history-kline">request_history_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-market-snapshot">get_market_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-data">get_rt_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-stock">get_plate_stock</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-list">get_plate_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-broker-queue">get_broker_queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsubscribe">unsubscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">unsubscribe_all</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-subscription">query_subscription</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-global-state">get_global_state</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-quote">get_stock_quote</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-ticker">get_rt_ticker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cur-kline">get_cur_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-order-book">get_order_book</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-referencestock-list">get_referencestock_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-owner-plate">get_owner_plate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-holding-change-list">get_holding_change_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-option-chain">get_option_chain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-history-kl-quota">get_history_kl_quota</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rehab">get_rehab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-warrant">get_warrant</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-flow">get_capital_flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-distribution">get_capital_distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-user-security">get_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modify-user-security">modify_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-filter">get_stock_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-ipo-list">get_ipo_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-future-info">get_future_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-trading-days">request_trading_days</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-price-reminder">set_price_reminder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-price-reminder">get_price_reminder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-user-security-group">get_user_security_group</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sysnotifyhandlerbase-opend">SysNotifyHandlerBase - OpenD通知回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-recv-rsp">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stockquotehandlerbase">StockQuoteHandlerBase - 实时报价回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#orderbookhandlerbase">OrderBookHandlerBase - 实时摆盘回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#curklinehandlerbase-k">CurKlineHandlerBase - 实时k线推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tickerhandlerbase">TickerHandlerBase - 实时逐笔推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rtdatahandlerbase">RTDataHandlerBase - 实时分时推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#brokerhandlerbase">BrokerHandlerBase - 实时经纪推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pricereminderhandlerbase">PriceReminderHandlerBase - 到价提醒通知回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">on_recv_rsp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Trade_API.html">交易API</a></li>
</ul>
<p class="caption"><span class="caption-text">.Net API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../net/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">.Java API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">CPP API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/base.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/qot.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/trd.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">JavaScript API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javascript/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">Q&amp;A</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../q&amp;a/Q&amp;A.html">Q&amp;A</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">futu-api-doc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>行情API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/Quote_API.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="api">
<h1>行情API<a class="headerlink" href="#api" title="永久链接至标题">¶</a></h1>
<blockquote>
<div></div></blockquote>
<div class="section" id="id1">
<h2>一分钟上手<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>如下范例，创建api行情对象，调用get_market_snapshot获取港股腾讯00700的报价快照数据,最后关闭对象</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="id2">
<h2>接口类对象<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<div class="section" id="openquotecontext">
<h3>OpenQuoteContext - 行情上下文<a class="headerlink" href="#openquotecontext" title="永久链接至标题">¶</a></h3>
<div class="section" id="init">
<h4>__init__<a class="headerlink" href="#init" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>host='127.0.0.1'</em>, <em>port=11111</em>, <em>is_encrypt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#__init__" title="永久链接至目标">¶</a></dt>
<dd><p>构造函数</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> &#8211; str FutuOpenD监听的IP地址</li>
<li><strong>port</strong> &#8211; int FutuOpenD监听的IP端口</li>
<li><strong>is_encrypt</strong> &#8211; bool 是否启用加密。默认为None，表示使用 <a class="reference external" href="Base_API.html#enable_proto_encrypt">SysConfig.enable_proto_encrypt</a> 的设置。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">,</span> <span class="n">is_encrypt</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="close">
<h4>close<a class="headerlink" href="#close" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>关闭上下文对象。默认情况下，futu-api内部创建的线程会阻止进程退出，只有当所有context都close后，进程才能正常退出。但通过SysConfig.set_all_thread_daemon可以设置所有内部线程为daemon线程，这时即使没有调用context的close，进程也可以正常退出。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="start">
<h4>start<a class="headerlink" href="#start" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>启动异步接收推送数据</p>
</div>
<div class="section" id="stop">
<h4>stop<a class="headerlink" href="#stop" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>停止异步接收推送数据</p>
</div>
<div class="section" id="set-handler">
<h4>set_handler<a class="headerlink" href="#set-handler" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="set_handler">
<code class="descname">set_handler</code><span class="sig-paren">(</span><em>self</em>, <em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#set_handler" title="永久链接至目标">¶</a></dt>
<dd><p>设置异步回调处理对象</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><p class="first"><strong>handler</strong> &#8211; <p>回调处理对象，必须是以下类的子类实例</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">类名</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SysNotifyHandlerBase</td>
<td>OpenD通知处理基类</td>
</tr>
<tr class="row-odd"><td>StockQuoteHandlerBase</td>
<td>报价处理基类</td>
</tr>
<tr class="row-even"><td>OrderBookHandlerBase</td>
<td>摆盘处理基类</td>
</tr>
<tr class="row-odd"><td>CurKlineHandlerBase</td>
<td>实时k线处理基类</td>
</tr>
<tr class="row-even"><td>TickerHandlerBase</td>
<td>逐笔处理基类</td>
</tr>
<tr class="row-odd"><td>RTDataHandlerBase</td>
<td>分时数据处理基类</td>
</tr>
<tr class="row-even"><td>BrokerHandlerBase</td>
<td>经济队列处理基类</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return ret:</th><td class="field-body"><p class="first">RET_OK: 设置成功</p>
<p class="last">其它: 设置失败</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-trading-days">
<h4><span class="strike">get_trading_days</span><a class="headerlink" href="#get-trading-days" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_trading_days">
<code class="descname">get_trading_days</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>start=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_trading_days" title="永久链接至目标">¶</a></dt>
<dd><p>获取交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型，<a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>start</strong> &#8211; 起始日期。例如&#8216;2018-01-01&#8217;。</li>
<li><strong>end</strong> &#8211; <p>结束日期。例如&#8216;2018-01-01&#8217;。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last"><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>str</td>
<td>时间</td>
</tr>
<tr class="row-odd"><td>trade_date_type</td>
<td>str</td>
<td>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-10&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-stock-basicinfo">
<h4>get_stock_basicinfo<a class="headerlink" href="#get-stock-basicinfo" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_stock_basicinfo">
<code class="descname">get_stock_basicinfo</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>stock_type=SecurityType.STOCK</em>, <em>code_list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_basicinfo" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定市场中特定类型的股票基本信息</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>stock_type</strong> &#8211; 股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a>，但不支持SecurityType.DRVT</li>
<li><strong>code_list</strong> &#8211; 如果不为None，应该是股票code的iterable类型，将只返回指定的股票信息</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret_code, content)</p>
<p>ret_code 等于RET_OK时， content为Pandas.DataFrame数据, 否则为错误原因字符串, 数据列格式如下</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>stock_child_type</td>
<td>str</td>
<td>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码，或期权标的股的代码</td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>strike_price</td>
<td>float</td>
<td>期权行权价</td>
</tr>
<tr class="row-odd"><td>suspension</td>
<td>bool</td>
<td>期权是否停牌(True表示停牌)</td>
</tr>
<tr class="row-even"><td>listing_date</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>delisting</td>
<td>bool</td>
<td>是否退市</td>
</tr>
<tr class="row-odd"><td>index_option_type</td>
<td>str</td>
<td>指数期权类型</td>
</tr>
<tr class="row-even"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">STOCK</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;******************************************&#39;</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">STOCK</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;HK.00647&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># 取第一条的股票名称</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>  <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>       code             name  lot_size stock_type stock_child_type stock_owner option_type strike_time strike_price suspension listing_date        stock_id  delisting index_option_type  main_contract last_trade_time
0      HK.00001               长和       500      STOCK              N/A                                              N/A        N/A   2015-03-18   4440996184065      False               N/A          False
...         ...              ...       ...        ...              ...         ...         ...         ...          ...        ...          ...             ...        ...               ...            ...             ...
2592   HK.84602  ICBC CNHPREF1-R     10000      STOCK              N/A                                              N/A        N/A   2014-12-11  70497593281146      False               N/A          False

[2593 rows x 16 columns]
******************************************
       code            name  lot_size stock_type stock_child_type stock_owner option_type strike_time strike_price suspension listing_date        stock_id  delisting index_option_type  main_contract last_trade_time
0  HK.00647  JOYCE BOUTIQUE      2000      STOCK              N/A                                              N/A        N/A   2019-08-27  32607391711879      False               N/A          False
1  HK.00700            腾讯控股       100      STOCK              N/A                                              N/A        N/A   2004-06-16  54047868453564      False               N/A          False
JOYCE BOUTIQUE
[&#39;JOYCE BOUTIQUE&#39;, &#39;腾讯控股&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>当传入程序无法识别的股票时（包括很久之前退市的股票和不存在的股票），仍然返回股票信息，用静态信息标志来该股票不存在。统一处理为：code正常显示，name显示为“未知股票”，delisting显示为“true”，其他字段均为默认值（整型默认是0，字符串默认是空字符串）。</li>
<li>跟其他的行情接口不同，其他接口遇到程序无法识别的股票时，会拒绝请求并返回错误描述“未知股票”。</li>
</ul>
</div>
</div>
<div class="section" id="request-history-kline">
<h4>request_history_kline<a class="headerlink" href="#request-history-kline" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="request_history_kline">
<code class="descname">request_history_kline</code><span class="sig-paren">(</span><em>self, code, start=None, end=None, ktype=KLType.K_DAY, autype=AuType.QFQ, fields=[KL_FIELD.ALL], max_count=1000, page_req_key=None, extended_time=False</em><span class="sig-paren">)</span><a class="headerlink" href="#request_history_kline" title="永久链接至目标">¶</a></dt>
<dd><p>获取k线，不需要事先下载k线数据。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>start</strong> &#8211; 开始时间，例如&#8216;2017-06-20&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束时间，例如&#8216;2017-07-20&#8217;。
start和end的组合如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</li>
<li><strong>ktype</strong> &#8211; k线类型， 参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a> 定义</li>
<li><strong>autype</strong> &#8211; 复权类型, 参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a> 定义</li>
<li><strong>fields</strong> &#8211; 需返回的字段列表，参见 <a class="reference external" href="Base_API.html#kl-field-k">KL_FIELD</a> 定义 KL_FIELD.ALL  KL_FIELD.OPEN ....</li>
<li><strong>max_count</strong> &#8211; 本次请求最大返回的数据点个数，传None表示返回start和end之间所有的数据。注意：OpenD 是把所有数据请求到再下发给脚本的，如果K线个数过多，建议选择分页，因为超过10秒仍未获取完会提示超时。</li>
<li><strong>page_req_key</strong> &#8211; 分页请求的key。如果start和end之间的数据点多于max_count，那么后续请求时，要传入上次调用返回的page_req_key。初始请求时应该传None。</li>
<li><strong>extended_time</strong> &#8211; 是否允许美股盘前盘后数据，bool，False不允许，True允许。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data, page_req_key)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下。page_req_key在分页请求时（即max_count&gt;0）可能返回，并且需要在后续的请求中传入。如果没有更多数据，page_req_key返回None。</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>k线时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨收价</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2019-09-11&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2019-09-18&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 每页5个，请求第一页</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;close&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 第一页收盘价转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">while</span> <span class="n">page_req_key</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>  <span class="c1"># 请求后面的所有结果</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;*************************************&#39;</span><span class="p">)</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2019-09-11&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2019-09-18&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">page_req_key</span><span class="o">=</span><span class="n">page_req_key</span><span class="p">)</span> <span class="c1"># 请求翻页后的数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;All pages are finished!&#39;</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code             time_key   open  close   high    low  pe_ratio  turnover_rate    volume      turnover  change_rate  last_close
0   HK.00700  2019-09-11 00:00:00  341.0  346.0  347.8  339.4    36.405        0.00165  15794903  5.437023e+09     1.466276       340.2
..       ...                  ...    ...    ...    ...    ...       ...            ...       ...           ...          ...         ...
4   HK.00700  2019-09-17 00:00:00  343.2  343.6  345.4  340.6    36.153        0.00097   9225687  3.165508e+09    -0.865551       346.6

[5 rows x 12 columns]
HK.00700
[346.0, 349.4, 349.6, 346.6, 343.6]
*************************************
   code             time_key   open  close   high    low  pe_ratio  turnover_rate   volume      turnover  change_rate  last_close
0  HK.00700  2019-09-18 00:00:00  344.0  343.0  345.6  341.6     36.09        0.00077  7335407  2.516701e+09    -0.290698       343.6
All pages are finished!
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-history-kline-limit"><span class="std std-ref">在线获取单只股票一段历史K线限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-market-snapshot">
<h4>get_market_snapshot<a class="headerlink" href="#get-market-snapshot" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_market_snapshot">
<code class="descname">get_market_snapshot</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_market_snapshot" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<p>获取市场快照</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param code_list:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">股票列表，股票个数最多400</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body"><p class="first">(ret, data)</p>
<p>ret == RET_OK ,返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p class="last">ret != RET_OK 返回错误字符串</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="11%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>update_time</td>
<td>str</td>
<td>当前价更新时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>last_price</td>
<td>float</td>
<td>最新价格</td>
</tr>
<tr class="row-odd"><td>open_price</td>
<td>float</td>
<td>今日开盘价</td>
</tr>
<tr class="row-even"><td>high_price</td>
<td>float</td>
<td>最高价格</td>
</tr>
<tr class="row-odd"><td>low_price</td>
<td>float</td>
<td>最低价格</td>
</tr>
<tr class="row-even"><td>prev_close_price</td>
<td>float</td>
<td>昨收盘价格</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>int</td>
<td>成交数量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>listing_date</td>
<td>str</td>
<td>上市日期 (yyyy-MM-dd)</td>
</tr>
<tr class="row-even"><td>equity_valid</td>
<td>bool</td>
<td>是否正股（为true时以下正股相关字段才有合法数值）</td>
</tr>
<tr class="row-odd"><td>issued_shares</td>
<td>int</td>
<td>发行股本</td>
</tr>
<tr class="row-even"><td>total_market_val</td>
<td>float</td>
<td>总市值（单位：元）</td>
</tr>
<tr class="row-odd"><td>net_asset</td>
<td>int</td>
<td>资产净值</td>
</tr>
<tr class="row-even"><td>net_profit</td>
<td>int</td>
<td>净利润</td>
</tr>
<tr class="row-odd"><td>earning_per_share</td>
<td>float</td>
<td>每股盈利</td>
</tr>
<tr class="row-even"><td>outstanding_shares</td>
<td>int</td>
<td>流通股本</td>
</tr>
<tr class="row-odd"><td>net_asset_per_share</td>
<td>float</td>
<td>每股净资产</td>
</tr>
<tr class="row-even"><td>circular_market_val</td>
<td>float</td>
<td>流通市值（单位：元）</td>
</tr>
<tr class="row-odd"><td>ey_ratio</td>
<td>float</td>
<td>收益率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>pb_ratio</td>
<td>float</td>
<td>市净率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-even"><td>pe_ttm_ratio</td>
<td>float</td>
<td>市盈率TTM（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>dividend_ttm</td>
<td>float</td>
<td>股息TTM，派息</td>
</tr>
<tr class="row-even"><td>dividend_ratio_ttm</td>
<td>float</td>
<td>股息率TTM（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>dividend_lfy</td>
<td>float</td>
<td>股息LFY，上一年度派息</td>
</tr>
<tr class="row-even"><td>dividend_lfy_ratio</td>
<td>float</td>
<td>股息率LFY（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码或期权的标的股代码</td>
</tr>
<tr class="row-even"><td>wrt_valid</td>
<td>bool</td>
<td>是否是窝轮（为true时以下窝轮相关的字段才有合法数据）</td>
</tr>
<tr class="row-odd"><td>wrt_conversion_ratio</td>
<td>float</td>
<td>换股比率</td>
</tr>
<tr class="row-even"><td>wrt_type</td>
<td>str</td>
<td>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>wrt_strike_price</td>
<td>float</td>
<td>行使价格</td>
</tr>
<tr class="row-even"><td>wrt_maturity_date</td>
<td>str</td>
<td>格式化窝轮到期时间</td>
</tr>
<tr class="row-odd"><td>wrt_end_trade</td>
<td>str</td>
<td>格式化窝轮最后交易时间</td>
</tr>
<tr class="row-even"><td>wrt_leverage</td>
<td>float</td>
<td>杠杆比率（倍）</td>
</tr>
<tr class="row-odd"><td>wrt_ipop</td>
<td>float</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>wrt_break_even_point</td>
<td>float</td>
<td>打和点</td>
</tr>
<tr class="row-odd"><td>wrt_conversion_price</td>
<td>float</td>
<td>换股价</td>
</tr>
<tr class="row-even"><td>wrt_price_recovery_ratio</td>
<td>float</td>
<td>正股距收回价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>wrt_score</td>
<td>float</td>
<td>窝轮综合评分</td>
</tr>
<tr class="row-even"><td>wrt_code</td>
<td>str</td>
<td>窝轮对应的正股（此字段已废除,修改为stock_owner）</td>
</tr>
<tr class="row-odd"><td>wrt_recovery_price</td>
<td>float</td>
<td>窝轮收回价</td>
</tr>
<tr class="row-even"><td>wrt_street_vol</td>
<td>float</td>
<td>窝轮街货量</td>
</tr>
<tr class="row-odd"><td>wrt_issue_vol</td>
<td>float</td>
<td>窝轮发行量</td>
</tr>
<tr class="row-even"><td>wrt_street_ratio</td>
<td>float</td>
<td>窝轮街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>wrt_delta</td>
<td>float</td>
<td>窝轮对冲值</td>
</tr>
<tr class="row-even"><td>wrt_implied_volatility</td>
<td>float</td>
<td>窝轮引伸波幅</td>
</tr>
<tr class="row-odd"><td>wrt_premium</td>
<td>float</td>
<td>窝轮溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>wrt_upper_strike_price</td>
<td>float</td>
<td>上限价，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>wrt_lower_strike_price</td>
<td>float</td>
<td>下限价，仅界内证支持该字段</td>
</tr>
<tr class="row-even"><td>wrt_inline_price_status</td>
<td>str</td>
<td>界内界外, 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>wrt_issuer_code</td>
<td>str</td>
<td>发行人代码</td>
</tr>
<tr class="row-even"><td>option_valid</td>
<td>bool</td>
<td>是否是期权（为true时以下期权相关的字段才有合法数值）</td>
</tr>
<tr class="row-odd"><td>option_type</td>
<td>str</td>
<td>期权类型，参见 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-even"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>option_strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-even"><td>option_contract_size</td>
<td>float</td>
<td>每份合约数</td>
</tr>
<tr class="row-odd"><td>option_open_interest</td>
<td>int</td>
<td>总未平仓合约数</td>
</tr>
<tr class="row-even"><td>option_implied_volatility</td>
<td>float</td>
<td>隐含波动率</td>
</tr>
<tr class="row-odd"><td>option_premium</td>
<td>float</td>
<td>溢价</td>
</tr>
<tr class="row-even"><td>option_delta</td>
<td>float</td>
<td>希腊值 Delta</td>
</tr>
<tr class="row-odd"><td>option_gamma</td>
<td>float</td>
<td>希腊值 Gamma</td>
</tr>
<tr class="row-even"><td>option_vega</td>
<td>float</td>
<td>希腊值 Vega</td>
</tr>
<tr class="row-odd"><td>option_theta</td>
<td>float</td>
<td>希腊值 Theta</td>
</tr>
<tr class="row-even"><td>option_rho</td>
<td>float</td>
<td>希腊值 Rho</td>
</tr>
<tr class="row-odd"><td>option_net_open_interest</td>
<td>int</td>
<td>净未平仓合约数</td>
</tr>
<tr class="row-even"><td>option_expiry_date_distance</td>
<td>int</td>
<td>距离到期日天数，负数表示已过期</td>
</tr>
<tr class="row-odd"><td>option_contract_nominal_value</td>
<td>float</td>
<td>合约名义金额</td>
</tr>
<tr class="row-even"><td>option_owner_lot_multiplier</td>
<td>float</td>
<td>相等正股手数，指数期权无该字段</td>
</tr>
<tr class="row-odd"><td>option_area_type</td>
<td>str</td>
<td>期权类型（按行权时间），见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></td>
</tr>
<tr class="row-even"><td>option_contract_multiplier</td>
<td>float</td>
<td>合约乘数，指数期权特有字段</td>
</tr>
<tr class="row-odd"><td>plate_valid</td>
<td>bool</td>
<td>是否为板块类型（为true时以下板块类型字段才有合法数值）</td>
</tr>
<tr class="row-even"><td>plate_raise_count</td>
<td>int</td>
<td>板块类型上涨支数</td>
</tr>
<tr class="row-odd"><td>plate_fall_count</td>
<td>int</td>
<td>板块类型下跌支数</td>
</tr>
<tr class="row-even"><td>plate_equal_count</td>
<td>int</td>
<td>板块类型平盘支数</td>
</tr>
<tr class="row-odd"><td>index_valid</td>
<td>bool</td>
<td>是否有指数类型（为true时以下指数类型字段才有合法数值）</td>
</tr>
<tr class="row-even"><td>index_raise_count</td>
<td>int</td>
<td>指数类型上涨支数</td>
</tr>
<tr class="row-odd"><td>index_fall_count</td>
<td>int</td>
<td>指数类型下跌支数</td>
</tr>
<tr class="row-even"><td>index_equal_count</td>
<td>int</td>
<td>指数类型平盘支数</td>
</tr>
<tr class="row-odd"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</td>
</tr>
<tr class="row-even"><td>price_spread</td>
<td>float</td>
<td>当前向上的摆盘价差,亦即摆盘数据的卖档的相邻档位的报价差</td>
</tr>
<tr class="row-odd"><td>ask_price</td>
<td>float</td>
<td>卖价</td>
</tr>
<tr class="row-even"><td>bid_price</td>
<td>float</td>
<td>买价</td>
</tr>
<tr class="row-odd"><td>ask_vol</td>
<td>float</td>
<td>卖量</td>
</tr>
<tr class="row-even"><td>bid_vol</td>
<td>float</td>
<td>买量</td>
</tr>
<tr class="row-odd"><td>enable_margin</td>
<td>bool</td>
<td>是否可融资，如果为true，后两个字段才有意义</td>
</tr>
<tr class="row-even"><td>mortgage_ratio</td>
<td>float</td>
<td>股票抵押率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>long_margin_initial_ratio</td>
<td>float</td>
<td>融资初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>enable_short_sell</td>
<td>bool</td>
<td>是否可卖空，如果为true，后三个字段才有意义</td>
</tr>
<tr class="row-odd"><td>short_sell_rate</td>
<td>float</td>
<td>卖空参考利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>short_available_volume</td>
<td>int</td>
<td>剩余可卖空数量</td>
</tr>
<tr class="row-odd"><td>short_margin_initial_ratio</td>
<td>float</td>
<td>卖空（融券）初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>sec_status</td>
<td>str</td>
<td>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></td>
</tr>
<tr class="row-odd"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>avg_price</td>
<td>float</td>
<td>平均价</td>
</tr>
<tr class="row-odd"><td>bid_ask_ratio</td>
<td>float</td>
<td>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>volume_ratio</td>
<td>float</td>
<td>量比</td>
</tr>
<tr class="row-odd"><td>highest52weeks_price</td>
<td>float</td>
<td>52周最高价</td>
</tr>
<tr class="row-even"><td>lowest52weeks_price</td>
<td>float</td>
<td>52周最低价</td>
</tr>
<tr class="row-odd"><td>highest_history_price</td>
<td>float</td>
<td>历史最高价</td>
</tr>
<tr class="row-even"><td>lowest_history_price</td>
<td>float</td>
<td>历史最低价</td>
</tr>
<tr class="row-odd"><td>pre_price</td>
<td>float</td>
<td>盘前价格</td>
</tr>
<tr class="row-even"><td>pre_high_price</td>
<td>float</td>
<td>盘前最高价</td>
</tr>
<tr class="row-odd"><td>pre_low_price</td>
<td>float</td>
<td>盘前最低价</td>
</tr>
<tr class="row-even"><td>pre_volume</td>
<td>int</td>
<td>盘前成交量</td>
</tr>
<tr class="row-odd"><td>pre_turnover</td>
<td>float</td>
<td>盘前成交额</td>
</tr>
<tr class="row-even"><td>pre_change_val</td>
<td>float</td>
<td>盘前涨跌额</td>
</tr>
<tr class="row-odd"><td>pre_change_rate</td>
<td>float</td>
<td>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>pre_amplitude</td>
<td>float</td>
<td>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>after_price</td>
<td>float</td>
<td>盘后价格</td>
</tr>
<tr class="row-even"><td>after_high_price</td>
<td>float</td>
<td>盘后最高价</td>
</tr>
<tr class="row-odd"><td>after_low_price</td>
<td>float</td>
<td>盘后最低价</td>
</tr>
<tr class="row-even"><td>after_volume</td>
<td>int</td>
<td>盘后成交量，科创板支持该数据。</td>
</tr>
<tr class="row-odd"><td>after_turnover</td>
<td>float</td>
<td>盘后成交额，科创板支持该数据。</td>
</tr>
<tr class="row-even"><td>after_change_val</td>
<td>float</td>
<td>盘后涨跌额</td>
</tr>
<tr class="row-odd"><td>after_change_rate</td>
<td>float</td>
<td>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>after_amplitude</td>
<td>float</td>
<td>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>future_valid</td>
<td>bool</td>
<td>是否期货</td>
</tr>
<tr class="row-even"><td>future_last_settle_price</td>
<td>float</td>
<td>昨结</td>
</tr>
<tr class="row-odd"><td>future_position</td>
<td>float</td>
<td>持仓量</td>
</tr>
<tr class="row-even"><td>future_position_change</td>
<td>float</td>
<td>日增仓</td>
</tr>
<tr class="row-odd"><td>future_main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-even"><td>future_last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
<tr class="row-odd"><td>trust_valid</td>
<td>bool</td>
<td>是否基金</td>
</tr>
<tr class="row-even"><td>trust_dividend_yield</td>
<td>float</td>
<td>股息率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>trust_aum</td>
<td>float</td>
<td>资产规模（单位：元）</td>
</tr>
<tr class="row-even"><td>trust_outstanding_units</td>
<td>int</td>
<td>总发行量</td>
</tr>
<tr class="row-odd"><td>trust_netAssetValue</td>
<td>float</td>
<td>单位净值</td>
</tr>
<tr class="row-even"><td>trust_premium</td>
<td>float</td>
<td>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>trust_assetClass</td>
<td>string</td>
<td>资产类别，见 <a class="reference external" href="Base_API.html#assetclass">AssetClass</a></td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">([</span><span class="s1">&#39;SH.600000&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">code</span>          <span class="n">update_time</span>  <span class="n">last_price</span>  <span class="n">open_price</span>  <span class="n">high_price</span>  <span class="n">low_price</span>  <span class="n">prev_close_price</span>    <span class="n">volume</span>      <span class="n">turnover</span>  <span class="n">turnover_rate</span>  <span class="n">suspension</span> <span class="n">listing_date</span>  <span class="n">lot_size</span>  <span class="n">price_spread</span>  <span class="n">stock_owner</span>  <span class="n">ask_price</span>  <span class="n">bid_price</span>  <span class="n">ask_vol</span>  <span class="n">bid_vol</span>  <span class="n">enable_margin</span>  <span class="n">mortgage_ratio</span>  <span class="n">long_margin_initial_ratio</span>  <span class="n">enable_short_sell</span>  <span class="n">short_sell_rate</span>  <span class="n">short_available_volume</span>  <span class="n">short_margin_initial_ratio</span>  <span class="n">amplitude</span>  <span class="n">avg_price</span>  <span class="n">bid_ask_ratio</span>  <span class="n">volume_ratio</span>  <span class="n">highest52weeks_price</span>  <span class="n">lowest52weeks_price</span>  <span class="n">highest_history_price</span>  <span class="n">lowest_history_price</span>  <span class="n">after_volume</span>  <span class="n">after_turnover</span> <span class="n">sec_status</span>  <span class="n">equity_valid</span>  <span class="n">issued_shares</span>  <span class="n">total_market_val</span>     <span class="n">net_asset</span>    <span class="n">net_profit</span>  <span class="n">earning_per_share</span>  <span class="n">outstanding_shares</span>  <span class="n">circular_market_val</span>  <span class="n">net_asset_per_share</span>  <span class="n">ey_ratio</span>  <span class="n">pe_ratio</span>  <span class="n">pb_ratio</span>  <span class="n">pe_ttm_ratio</span>  <span class="o">...</span>  <span class="n">wrt_upper_strike_price</span>  <span class="n">wrt_lowe_strike_price</span>  <span class="n">wrt_inline_price_status</span>  <span class="n">option_valid</span>  <span class="n">option_type</span>  <span class="n">strike_time</span>  <span class="n">option_strike_price</span>  <span class="n">option_contract_size</span>  <span class="n">option_open_interest</span>  <span class="n">option_implied_volatility</span>  <span class="n">option_premium</span>  <span class="n">option_delta</span>  <span class="n">option_gamma</span>  <span class="n">option_vega</span>  <span class="n">option_theta</span>  <span class="n">option_rho</span>  <span class="n">option_net_open_interest</span>  <span class="n">option_expiry_date_distance</span>  <span class="n">option_contract_nominal_value</span>  <span class="n">option_owner_lot_multiplier</span>  <span class="n">option_area_type</span>  \
<span class="mi">0</span>  <span class="n">SH</span><span class="o">.</span><span class="mi">600000</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">15</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>       <span class="mf">10.23</span>        <span class="mf">10.1</span>       <span class="mf">10.37</span>      <span class="mf">10.08</span>             <span class="mf">10.15</span>  <span class="mi">30921803</span>  <span class="mf">3.159604e+08</span>          <span class="mf">0.110</span>       <span class="bp">False</span>   <span class="mi">1999</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span>       <span class="mi">100</span>          <span class="mf">0.01</span>          <span class="n">NaN</span>      <span class="mf">10.23</span>      <span class="mf">10.22</span>    <span class="mi">39048</span>    <span class="mi">12300</span>           <span class="bp">True</span>             <span class="mf">0.0</span>                       <span class="mf">60.0</span>              <span class="bp">False</span>              <span class="n">NaN</span>                     <span class="n">NaN</span>                         <span class="n">NaN</span>      <span class="mf">2.857</span>     <span class="mf">10.218</span>         <span class="o">-</span><span class="mf">1.327</span>         <span class="mf">0.823</span>                 <span class="mf">13.33</span>                 <span class="mf">9.82</span>                  <span class="mf">13.57</span>             <span class="o">-</span><span class="mf">1.408106</span>             <span class="mi">0</span>             <span class="mf">0.0</span>     <span class="n">NORMAL</span>          <span class="bp">True</span>    <span class="mi">29352080397</span>      <span class="mf">3.002718e+11</span>  <span class="mf">4.801707e+11</span>  <span class="mf">5.591571e+10</span>              <span class="mf">1.905</span>         <span class="mi">28103763899</span>         <span class="mf">2.875015e+11</span>               <span class="mf">16.359</span>     <span class="mf">0.127</span>      <span class="mf">5.37</span>     <span class="mf">0.625</span>         <span class="mf">4.918</span>  <span class="o">...</span>                     <span class="n">NaN</span>                    <span class="n">NaN</span>                      <span class="n">NaN</span>         <span class="bp">False</span>          <span class="n">NaN</span>          <span class="n">NaN</span>                  <span class="n">NaN</span>                   <span class="n">NaN</span>                   <span class="n">NaN</span>                        <span class="n">NaN</span>             <span class="n">NaN</span>           <span class="n">NaN</span>           <span class="n">NaN</span>          <span class="n">NaN</span>           <span class="n">NaN</span>         <span class="n">NaN</span>                       <span class="n">NaN</span>                          <span class="n">NaN</span>                            <span class="n">NaN</span>                          <span class="n">NaN</span>               <span class="n">NaN</span>
<span class="mi">1</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mo">06</span>      <span class="mf">381.80</span>       <span class="mf">386.0</span>      <span class="mf">386.00</span>     <span class="mf">376.00</span>            <span class="mf">380.00</span>  <span class="mi">29318892</span>  <span class="mf">1.119300e+10</span>          <span class="mf">0.307</span>       <span class="bp">False</span>   <span class="mi">2004</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">16</span>       <span class="mi">100</span>          <span class="mf">0.20</span>          <span class="n">NaN</span>     <span class="mf">382.00</span>     <span class="mf">381.80</span>   <span class="mi">383400</span>     <span class="mi">5900</span>           <span class="bp">True</span>            <span class="mf">70.0</span>                       <span class="mf">44.0</span>              <span class="bp">False</span>              <span class="n">NaN</span>                     <span class="n">NaN</span>                         <span class="n">NaN</span>      <span class="mf">2.632</span>    <span class="mf">381.767</span>         <span class="mf">30.192</span>         <span class="mf">0.655</span>                <span class="mf">420.00</span>               <span class="mf">312.20</span>                 <span class="mf">474.72</span>             <span class="o">-</span><span class="mf">3.581000</span>             <span class="mi">0</span>             <span class="mf">0.0</span>     <span class="n">NORMAL</span>          <span class="bp">True</span>     <span class="mi">9552936193</span>      <span class="mf">3.647311e+12</span>  <span class="mf">4.776564e+11</span>  <span class="mf">1.029998e+11</span>             <span class="mf">10.782</span>          <span class="mi">9552936193</span>         <span class="mf">3.647311e+12</span>               <span class="mf">50.001</span>     <span class="mf">0.227</span>     <span class="mf">35.41</span>     <span class="mf">7.635</span>        <span class="mf">33.606</span>  <span class="o">...</span>                     <span class="n">NaN</span>                    <span class="n">NaN</span>                      <span class="n">NaN</span>         <span class="bp">False</span>          <span class="n">NaN</span>          <span class="n">NaN</span>                  <span class="n">NaN</span>                   <span class="n">NaN</span>                   <span class="n">NaN</span>                        <span class="n">NaN</span>             <span class="n">NaN</span>           <span class="n">NaN</span>           <span class="n">NaN</span>          <span class="n">NaN</span>           <span class="n">NaN</span>         <span class="n">NaN</span>                       <span class="n">NaN</span>                          <span class="n">NaN</span>                            <span class="n">NaN</span>                          <span class="n">NaN</span>               <span class="n">NaN</span>

   <span class="n">option_contract_multiplier</span>  <span class="n">index_valid</span>  <span class="n">index_raise_count</span>  <span class="n">index_fall_count</span>  <span class="n">index_equal_count</span>  <span class="n">plate_valid</span>  <span class="n">plate_raise_count</span>  <span class="n">plate_fall_count</span>  <span class="n">plate_equal_count</span>  <span class="n">future_valid</span>  <span class="n">future_last_settle_price</span>  <span class="n">future_position</span>  <span class="n">future_position_change</span>  <span class="n">future_main_contract</span>  <span class="n">future_last_trade_time</span>  <span class="n">pre_price</span>  <span class="n">pre_high_price</span>  <span class="n">pre_low_price</span>  <span class="n">pre_volume</span>  <span class="n">pre_turnover</span>  <span class="n">pre_change_val</span>  <span class="n">pre_change_rate</span>  <span class="n">pre_amplitude</span>  <span class="n">after_price</span>  <span class="n">after_high_price</span>  <span class="n">after_low_price</span>  <span class="n">after_change_val</span>  <span class="n">after_change_rate</span>  <span class="n">after_amplitude</span>
<span class="mi">0</span>                         <span class="n">NaN</span>        <span class="bp">False</span>                <span class="n">NaN</span>               <span class="n">NaN</span>                <span class="n">NaN</span>        <span class="bp">False</span>                <span class="n">NaN</span>               <span class="n">NaN</span>                <span class="n">NaN</span>         <span class="bp">False</span>                       <span class="n">NaN</span>              <span class="n">NaN</span>                     <span class="n">NaN</span>                   <span class="n">NaN</span>                     <span class="n">NaN</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>                <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>
<span class="mi">1</span>                         <span class="n">NaN</span>        <span class="bp">False</span>                <span class="n">NaN</span>               <span class="n">NaN</span>                <span class="n">NaN</span>        <span class="bp">False</span>                <span class="n">NaN</span>               <span class="n">NaN</span>                <span class="n">NaN</span>         <span class="bp">False</span>                       <span class="n">NaN</span>              <span class="n">NaN</span>                     <span class="n">NaN</span>                   <span class="n">NaN</span>                     <span class="n">NaN</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>                <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>

<span class="p">[</span><span class="mi">2</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">123</span> <span class="n">columns</span><span class="p">]</span>
<span class="n">SH</span><span class="o">.</span><span class="mi">600000</span>
<span class="p">[</span><span class="s1">&#39;SH.600000&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-market-snapshot-limit"><span class="std std-ref">获取股票快照限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-rt-data">
<h4>get_rt_data<a class="headerlink" href="#get-rt-data" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_rt_data">
<code class="descname">get_rt_data</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_data" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定股票的分时数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><p class="first"><strong>code</strong> &#8211; 股票代码，例如，HK.00700</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd Dataframe数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="11%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time</td>
<td>str</td>
<td>时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>is_blank</td>
<td>bool</td>
<td>数据状态；正常数据为False，伪造数据为True</td>
</tr>
<tr class="row-odd"><td>opened_mins</td>
<td>int</td>
<td>零点到当前多少分钟</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>当前价格</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨天收盘的价格</td>
</tr>
<tr class="row-even"><td>avg_price</td>
<td>float</td>
<td>平均价格（对于期权，该字段为None）</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>float</td>
<td>成交量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅分时数据类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>   <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_data</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">)</span>   <span class="c1"># 获取一次分时数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    <span class="n">code</span>                 <span class="n">time</span>  <span class="n">is_blank</span>  <span class="n">opened_mins</span>  <span class="n">cur_price</span>  <span class="n">last_close</span>   <span class="n">avg_price</span>  <span class="n">volume</span>     <span class="n">turnover</span>
<span class="mi">0</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mi">09</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mo">00</span>     <span class="bp">False</span>          <span class="mi">570</span>      <span class="mf">371.8</span>       <span class="mf">382.4</span>  <span class="mf">371.800000</span>  <span class="mi">923800</span>  <span class="mf">343468840.0</span>
<span class="o">..</span>       <span class="o">...</span>                  <span class="o">...</span>       <span class="o">...</span>          <span class="o">...</span>        <span class="o">...</span>         <span class="o">...</span>         <span class="o">...</span>     <span class="o">...</span>          <span class="o">...</span>
<span class="mi">32</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mi">10</span><span class="p">:</span><span class="mo">02</span><span class="p">:</span><span class="mo">00</span>     <span class="bp">False</span>          <span class="mi">602</span>      <span class="mf">372.8</span>       <span class="mf">382.4</span>  <span class="mf">372.979075</span>    <span class="mi">4100</span>    <span class="mf">1527820.0</span>

<span class="p">[</span><span class="mi">33</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">9</span> <span class="n">columns</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-plate-stock">
<h4>get_plate_stock<a class="headerlink" href="#get-plate-stock" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_plate_stock">
<code class="descname">get_plate_stock</code><span class="sig-paren">(</span><em>self</em>, <em>plate_code</em>, <em>sort_field=SortField.CODE</em>, <em>ascend=True</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_stock" title="永久链接至目标">¶</a></dt>
<dd><p>获取特定板块下的股票列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>plate_code</strong> &#8211; 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码</li>
<li><strong>sort_field</strong> &#8211; 排序字段，SortField，根据哪些字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></li>
<li><strong>ascend</strong> &#8211; 排序方向，bool，True升序，False降序</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>lot_size</td>
<td>int</td>
<td>每手股数，期货表示合约乘数</td>
</tr>
<tr class="row-even"><td>stock_name</td>
<td>str</td>
<td>股票名称</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约（期货特有字段）</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间（期货特有字段，主连，当月，下月等期货没有该字段）</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_stock</span><span class="p">(</span><span class="s1">&#39;HK.BK1001&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;stock_name&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票名称</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;stock_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code  lot_size stock_name  stock_owner  stock_child_type stock_type   list_time        stock_id  main_contract last_trade_time
0   HK.00462      4000       天然乳品          NaN               NaN      STOCK  2005-06-10  55589761712590          False
..       ...       ...        ...          ...               ...        ...         ...             ...            ...             ...
10  HK.06863      1000       辉山乳业          NaN               NaN      STOCK  2013-09-27  68607807593167          False

[11 rows x 10 columns]
天然乳品
[&#39;天然乳品&#39;, &#39;现代牧业&#39;, &#39;雅士利国际&#39;, &#39;原生态牧业&#39;, &#39;中国圣牧&#39;, &#39;中地乳业&#39;, &#39;庄园牧场&#39;, &#39;澳优&#39;, &#39;蒙牛乳业&#39;, &#39;中国飞鹤&#39;, &#39;辉山乳业&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last">
<li><p class="first">该接口也可用于获取指数成份股, 如获取上证指数成份股:</p>
<ul class="simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-stock-limit"><span class="std std-ref">获取板块下的股票限制</span></a></li>
</ul>
</li>
<li><p class="first">部分常用的板块或指数代码如下:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">代码</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HK.HSI Constituent</td>
<td>恒指成份股</td>
</tr>
<tr class="row-odd"><td>HK.HSCEI Stock</td>
<td>国指成份股</td>
</tr>
<tr class="row-even"><td>HK.Motherboard</td>
<td>港股主板</td>
</tr>
<tr class="row-odd"><td>HK.GEM</td>
<td>港股创业板</td>
</tr>
<tr class="row-even"><td>HK.BK1910</td>
<td>所有港股</td>
</tr>
<tr class="row-odd"><td>HK.BK1911</td>
<td>主板H股</td>
</tr>
<tr class="row-even"><td>HK.BK1912</td>
<td>创业板H股</td>
</tr>
<tr class="row-odd"><td>HK.Fund</td>
<td>港股基金</td>
</tr>
<tr class="row-even"><td>HK.BK1600</td>
<td>富途热门(港)</td>
</tr>
<tr class="row-odd"><td>HK.BK1986</td>
<td>港股期货全类型</td>
</tr>
<tr class="row-even"><td>HK.BK1987</td>
<td>港股股指期货</td>
</tr>
<tr class="row-odd"><td>HK.BK1988</td>
<td>港股汇率期货</td>
</tr>
<tr class="row-even"><td>HK.BK1989</td>
<td>港股金属期货</td>
</tr>
<tr class="row-odd"><td>HK.BK1990</td>
<td>港股股票期货</td>
</tr>
<tr class="row-even"><td>HK.BK1921</td>
<td>已上市新股-港股</td>
</tr>
<tr class="row-odd"><td>SH.3000000</td>
<td>上海主板</td>
</tr>
<tr class="row-even"><td>SH.BK0901</td>
<td>上证B股</td>
</tr>
<tr class="row-odd"><td>SH.BK0902</td>
<td>深证B股</td>
</tr>
<tr class="row-even"><td>SH.3000002</td>
<td>沪深指数</td>
</tr>
<tr class="row-odd"><td>SH.3000005</td>
<td>沪深全部A股</td>
</tr>
<tr class="row-even"><td>SH.BK0600</td>
<td>富途热门(沪深)</td>
</tr>
<tr class="row-odd"><td>SH.BK0992</td>
<td>科创板</td>
</tr>
<tr class="row-even"><td>SH.BK0921</td>
<td>已上市新股-A股</td>
</tr>
<tr class="row-odd"><td>SZ.3000001</td>
<td>深证主板</td>
</tr>
<tr class="row-even"><td>SZ.3000003</td>
<td>中小企业板块</td>
</tr>
<tr class="row-odd"><td>SZ.3000004</td>
<td>深证创业板</td>
</tr>
<tr class="row-even"><td>US.USAALL</td>
<td>所有美股</td>
</tr>
<tr class="row-odd"><td>US.BK2989</td>
<td>美股期货全类型</td>
</tr>
<tr class="row-even"><td>US.BK2990</td>
<td>美股农产品期货</td>
</tr>
<tr class="row-odd"><td>US.BK2991</td>
<td>美股利率期货</td>
</tr>
<tr class="row-even"><td>US.BK2992</td>
<td>美股外汇期货</td>
</tr>
<tr class="row-odd"><td>US.BK2993</td>
<td>美股数字货币期货</td>
</tr>
<tr class="row-even"><td>US.BK2994</td>
<td>美股股指期货</td>
</tr>
<tr class="row-odd"><td>US.BK2995</td>
<td>美股能源化工期货</td>
</tr>
<tr class="row-even"><td>US.BK2996</td>
<td>美股贵金属期货</td>
</tr>
<tr class="row-odd"><td>US.BK2921</td>
<td>已上市新股-美股</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
<div class="section" id="get-plate-list">
<h4>get_plate_list<a class="headerlink" href="#get-plate-list" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_plate_list">
<code class="descname">get_plate_list</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>plate_class</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_list" title="永久链接至目标">¶</a></dt>
<dd><p>获取板块集合下的子板块列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的子板块（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>plate_class</strong> &#8211; 板块分类，参见 <a class="reference external" href="Base_API.html#plate">Plate</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd Dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>plate_name</td>
<td>str</td>
<td>板块名字</td>
</tr>
<tr class="row-even"><td>plate_id</td>
<td>str</td>
<td>板块id</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">Plate</span><span class="o">.</span><span class="n">CONCEPT</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;plate_name&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的板块名称</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;plate_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code plate_name plate_id
0   HK.BK1000      做空集合股   BK1000
..        ...        ...      ...
77  HK.BK1999       殡葬概念   BK1999

[78 rows x 3 columns]
做空集合股
[&#39;做空集合股&#39;, &#39;阿里概念股&#39;, &#39;雄安概念股&#39;, &#39;苹果概念&#39;, &#39;一带一路&#39;, &#39;5G概念&#39;, &#39;夜店股&#39;, &#39;粤港澳大湾区&#39;, &#39;特斯拉概念股&#39;, &#39;啤酒&#39;, &#39;疑似财技股&#39;, &#39;体育用品&#39;, &#39;稀土概念&#39;, &#39;人民币升值概念&#39;, &#39;抗疫概念&#39;, &#39;新股与次新股&#39;, &#39;腾讯概念&#39;, &#39;云办公&#39;, &#39;SaaS概念&#39;, &#39;在线教育&#39;, &#39;汽车经销商&#39;, &#39;挪威政府全球养老基金持仓&#39;, &#39;武汉本地概念股&#39;, &#39;核电&#39;, &#39;内地医药股&#39;, &#39;化妆美容股&#39;, &#39;科网股&#39;, &#39;公用股&#39;, &#39;石油股&#39;, &#39;电讯设备&#39;, &#39;电力股&#39;, &#39;手游股&#39;, &#39;婴儿及小童用品股&#39;, &#39;百货业股&#39;, &#39;收租股&#39;, &#39;港口运输股&#39;, &#39;电信股&#39;, &#39;环保&#39;, &#39;煤炭股&#39;, &#39;汽车股&#39;, &#39;电池&#39;, &#39;物流&#39;, &#39;内地物业管理股&#39;, &#39;农业股&#39;, &#39;黄金股&#39;, &#39;奢侈品股&#39;, &#39;电力设备股&#39;, &#39;连锁快餐店&#39;, &#39;重型机械股&#39;, &#39;食品股&#39;, &#39;内险股&#39;, &#39;纸业股&#39;, &#39;水务股&#39;, &#39;奶制品股&#39;, &#39;光伏太阳能股&#39;, &#39;内房股&#39;, &#39;内地教育股&#39;, &#39;家电股&#39;, &#39;风电股&#39;, &#39;蓝筹地产股&#39;, &#39;内银股&#39;, &#39;航空股&#39;, &#39;石化股&#39;, &#39;建材水泥股&#39;, &#39;中资券商股&#39;, &#39;高铁基建股&#39;, &#39;燃气股&#39;, &#39;公路及铁路股&#39;, &#39;钢铁金属股&#39;, &#39;华为概念&#39;, &#39;OLED概念&#39;, &#39;工业大麻&#39;, &#39;香港本地股&#39;, &#39;香港零售股&#39;, &#39;区块链&#39;, &#39;猪肉概念&#39;, &#39;节假日概念&#39;, &#39;殡葬概念&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-list-limit"><span class="std std-ref">获取板块集合下的板块限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-broker-queue">
<h4>get_broker_queue<a class="headerlink" href="#get-broker-queue" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_broker_queue">
<code class="descname">get_broker_queue</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_broker_queue" title="永久链接至目标">¶</a></dt>
<dd><p>获取股票的经纪队列</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code</strong> &#8211; 股票代码</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, bid_frame_table, ask_frame_table)或(ret, err_message, err_message)<p>ret == RET_OK，bid_frame_table，ask_frame_table 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>bid_frame_table 经纪买盘数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>bid_broker_id</td>
<td>int</td>
<td>经纪买盘id</td>
</tr>
<tr class="row-even"><td>bid_broker_name</td>
<td>str</td>
<td>经纪买盘名称</td>
</tr>
<tr class="row-odd"><td>bid_broker_pos</td>
<td>int</td>
<td>经纪档位</td>
</tr>
<tr class="row-even"><td>order_id</td>
<td>int64</td>
<td>交易所订单id，与交易接口返回的订单id并不一样</td>
</tr>
<tr class="row-odd"><td>order_volume</td>
<td>int64</td>
<td>订单股数</td>
</tr>
</tbody>
</table>
<p>ask_frame_table 经纪卖盘数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>ask_broker_id</td>
<td>int</td>
<td>经纪卖盘id</td>
</tr>
<tr class="row-even"><td>ask_broker_name</td>
<td>str</td>
<td>经纪卖盘名称</td>
</tr>
<tr class="row-odd"><td>ask_broker_pos</td>
<td>int</td>
<td>经纪档位</td>
</tr>
<tr class="row-even"><td>order_id</td>
<td>int64</td>
<td>交易所订单id，与交易接口返回的订单id并不一样</td>
</tr>
<tr class="row-odd"><td>order_volume</td>
<td>int64</td>
<td>订单股数</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅经纪队列类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>   <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">bid_frame_table</span><span class="p">,</span> <span class="n">ask_frame_table</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_broker_queue</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">)</span>   <span class="c1"># 获取一次经纪队列数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">bid_frame_table</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">bid_frame_table</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code  bid_broker_id bid_broker_name  bid_broker_pos order_id order_volume
0   HK.00700            140      海通国际证券有限公司               1      N/A          N/A
..       ...            ...             ...             ...      ...          ...
35  HK.00700           4978  法国兴业证券(香港)有限公司               5      N/A          N/A

[36 rows x 6 columns]
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="subscribe">
<h4>subscribe<a class="headerlink" href="#subscribe" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">subscribe</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em>, <em>subtype_list</em>, <em>is_first_push=True</em>, <em>subscribe_push=True</em>, <em>is_detailed_orderbook=False</em><span class="sig-paren">)</span></dt>
<dd><p>订阅注册需要的实时信息，指定股票和订阅的数据类型即可。香港市场（含正股窝轮牛熊期权期货）订阅，需要 LV1 及以上的权限。BMP 权限下不支持订阅。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code_list</strong> &#8211; 需要订阅的股票代码列表</li>
<li><strong>subtype_list</strong> &#8211; 需要订阅的数据类型列表，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></li>
<li><strong>is_first_push</strong> &#8211; 订阅成功之后是否马上推送一次数据</li>
<li><strong>subscribe_push</strong> &#8211; 订阅后推送</li>
<li><strong>is_detailed_orderbook</strong> &#8211; 是否订阅详细的摆盘订单明细，仅用于 SF 行情权限下订阅 ORDER_BOOK 类型</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">class</span> <span class="nc">OrderBookTest</span><span class="p">(</span><span class="n">OrderBookHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">OrderBookTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># OrderBookTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">OrderBookTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时摆盘回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>  <span class="c1"># 订阅买卖摆盘类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1">#  设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">OrderBookTest</span>  <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_bid&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-29 10:40:03.147&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_ask&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-29 10:40:03.147&#39;</span><span class="p">,</span> <span class="s1">&#39;Bid&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">416.8</span><span class="p">,</span> <span class="mi">2600</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.6</span><span class="p">,</span> <span class="mi">13100</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.4</span><span class="p">,</span> <span class="mi">24600</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.2</span><span class="p">,</span> <span class="mi">28000</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.0</span><span class="p">,</span> <span class="mi">46900</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.8</span><span class="p">,</span> <span class="mi">10900</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.6</span><span class="p">,</span> <span class="mi">7100</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.4</span><span class="p">,</span> <span class="mi">13300</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.2</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.0</span><span class="p">,</span> <span class="mi">11200</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="p">{})],</span> <span class="s1">&#39;Ask&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">417.0</span><span class="p">,</span> <span class="mi">17600</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">417.2</span><span class="p">,</span> <span class="mi">17800</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">417.4</span><span class="p">,</span> <span class="mi">15300</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">417.6</span><span class="p">,</span> <span class="mi">28800</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">417.8</span><span class="p">,</span> <span class="mi">20700</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">418.0</span><span class="p">,</span> <span class="mi">114200</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">418.2</span><span class="p">,</span> <span class="mi">20600</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">418.4</span><span class="p">,</span> <span class="mi">24100</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">418.6</span><span class="p">,</span> <span class="mi">42700</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">418.8</span><span class="p">,</span> <span class="mi">181900</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="p">{})]}</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="unsubscribe">
<h4>unsubscribe<a class="headerlink" href="#unsubscribe" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">unsubscribe</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em>, <em>subtype_list</em>, <em>unsubscribe_all=False</em><span class="sig-paren">)</span></dt>
<dd><p>取消订阅</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code_list</strong> &#8211; 取消订阅的股票代码列表</li>
<li><strong>subtype_list</strong> &#8211; 取消订阅的类型，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></li>
<li><strong>unsubscribe_all</strong> &#8211; 取消所有订阅，为True时忽略其他参数，或可使用 <a class="reference external" href="./Quote_API.html#unsubscribe_all">unsubscribe_all</a> 接口</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;current subscription status :&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 查询初始订阅状态</span>
<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span> <span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅了QUOTE和TICKER两个类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>   <span class="c1"># 订阅成功</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscribe successfully！current subscription status :&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 订阅成功后查询订阅状态</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># 订阅之后至少1分钟才能取消订阅</span>
    <span class="n">ret_unsub</span><span class="p">,</span> <span class="n">err_message_unsub</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">ret_unsub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;unsubscribe all successfully！current subscription status:&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 取消订阅后查询订阅状态</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Failed to cancel all subscriptions！&#39;</span><span class="p">,</span> <span class="n">err_message_unsub</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>current subscription status : (0, {&#39;total_used&#39;: 0, &#39;remain&#39;: 1000, &#39;own_used&#39;: 0, &#39;sub_list&#39;: {}})
subscribe successfully！current subscription status : (0, {&#39;total_used&#39;: 2, &#39;remain&#39;: 998, &#39;own_used&#39;: 2, &#39;sub_list&#39;: {&#39;QUOTE&#39;: [&#39;HK.00700&#39;], &#39;TICKER&#39;: [&#39;HK.00700&#39;]}})
unsubscribe all successfully！current subscription status: (0, {&#39;total_used&#39;: 1, &#39;remain&#39;: 999, &#39;own_used&#39;: 1, &#39;sub_list&#39;: {&#39;TICKER&#39;: [&#39;HK.00700&#39;]}})
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="id3">
<h4>unsubscribe_all<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="unsubscribe_all">
<code class="descname">unsubscribe_all</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#unsubscribe_all" title="永久链接至目标">¶</a></dt>
<dd><p>取消所有订阅</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回:</th><td class="field-body">(ret, err_message)<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;current subscription status :&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 查询初始订阅状态</span>
<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">,</span> <span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅了QUOTE和TICKER两个类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 订阅成功</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscribe successfully！current subscription status :&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 订阅成功后查询订阅状态</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># 订阅之后至少1分钟才能取消订阅</span>
    <span class="n">ret_unsub</span><span class="p">,</span> <span class="n">err_message_unsub</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe_all</span><span class="p">()</span>  <span class="c1"># 取消所有订阅</span>
    <span class="k">if</span> <span class="n">ret_unsub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;unsubscribe successfully！current subscription status:&#39;</span><span class="p">,</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>  <span class="c1"># 取消订阅后查询订阅状态</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;unsubscription failed&#39;</span><span class="p">,</span> <span class="n">err_message_unsub</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>current subscription status : (0, {&#39;total_used&#39;: 0, &#39;remain&#39;: 1000, &#39;own_used&#39;: 0, &#39;sub_list&#39;: {}})
subscribe successfully！current subscription status : (0, {&#39;total_used&#39;: 2, &#39;remain&#39;: 998, &#39;own_used&#39;: 2, &#39;sub_list&#39;: {&#39;QUOTE&#39;: [&#39;HK.00700&#39;], &#39;TICKER&#39;: [&#39;HK.00700&#39;]}})
unsubscribe successfully！current subscription status: (0, {&#39;total_used&#39;: 0, &#39;remain&#39;: 1000, &#39;own_used&#39;: 0, &#39;sub_list&#39;: {}})
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="query-subscription">
<h4>query_subscription<a class="headerlink" href="#query-subscription" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="query_subscription">
<code class="descname">query_subscription</code><span class="sig-paren">(</span><em>self</em>, <em>is_all_conn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#query_subscription" title="永久链接至目标">¶</a></dt>
<dd><p>查询已订阅的实时信息</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>is_all_conn</strong> &#8211; 是否返回所有连接的订阅状态,传False只返回当前连接数据</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回 定阅信息的字典数据 ，格式如下:</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;total_used&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>    <span class="c1"># 所有连接已使用的定阅额度</span>
    <span class="s1">&#39;own_used&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>       <span class="c1"># 当前连接已使用的定阅额度</span>
    <span class="s1">&#39;remain&#39;</span><span class="p">:</span> <span class="mi">496</span><span class="p">,</span>       <span class="c1">#  剩余的定阅额度</span>
    <span class="s1">&#39;sub_list&#39;</span><span class="p">:</span>          <span class="c1">#  每种定阅类型对应的股票列表</span>
    <span class="p">{</span>
        <span class="s1">&#39;BROKER&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">],</span>
        <span class="s1">&#39;RT_DATA&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">])</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">()</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;total_used&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;remain&#39;</span><span class="p">:</span> <span class="mi">999</span><span class="p">,</span> <span class="s1">&#39;own_used&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;sub_list&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;QUOTE&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">]}}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-global-state">
<h4>get_global_state<a class="headerlink" href="#get-global-state" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_global_state">
<code class="descname">get_global_state</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#get_global_state" title="永久链接至目标">¶</a></dt>
<dd><p>获取全局状态</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret == RET_OK data为包含全局状态的字典，含义如下</p>
<p>ret != RET_OK data为错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">value类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>market_sz</td>
<td>str</td>
<td>深圳市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>market_sh</td>
<td>str</td>
<td>上海市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-even"><td>market_hk</td>
<td>str</td>
<td>香港市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>market_hkfuture</td>
<td>str</td>
<td>香港期货市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-even"><td>market_usfuture</td>
<td>str</td>
<td>美国期货市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>market_us</td>
<td>str</td>
<td>美国市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-even"><td>server_ver</td>
<td>str</td>
<td>FutuOpenD版本号</td>
</tr>
<tr class="row-odd"><td>trd_logined</td>
<td>bool</td>
<td>True：已登录交易服务器，False: 未登录交易服务器</td>
</tr>
<tr class="row-even"><td>qot_logined</td>
<td>bool</td>
<td>True：已登录行情服务器，False: 未登录行情服务器</td>
</tr>
<tr class="row-odd"><td>timestamp</td>
<td>str</td>
<td>当前格林威治时间戳(秒）</td>
</tr>
<tr class="row-even"><td>local_timestamp</td>
<td>float</td>
<td>FutuOpenD运行机器的当前时间戳(秒)</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_global_state</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-stock-quote">
<h4>get_stock_quote<a class="headerlink" href="#get-stock-quote" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_stock_quote">
<code class="descname">get_stock_quote</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_quote" title="永久链接至目标">¶</a></dt>
<dd><p>获取订阅股票报价的实时数据，有订阅要求限制</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code_list</strong> &#8211; 股票代码列表，必须确保code_list中的股票均订阅成功后才能够执行</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="11%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>data_date</td>
<td>str</td>
<td>日期</td>
</tr>
<tr class="row-even"><td>data_time</td>
<td>str</td>
<td>当前价更新时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>last_price</td>
<td>float</td>
<td>最新价格</td>
</tr>
<tr class="row-even"><td>open_price</td>
<td>float</td>
<td>今日开盘价</td>
</tr>
<tr class="row-odd"><td>high_price</td>
<td>float</td>
<td>最高价格</td>
</tr>
<tr class="row-even"><td>low_price</td>
<td>float</td>
<td>最低价格</td>
</tr>
<tr class="row-odd"><td>prev_close_price</td>
<td>float</td>
<td>昨收盘价格</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交数量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-even"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>amplitude</td>
<td>int</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>listing_date</td>
<td>str</td>
<td>上市日期 (yyyy-MM-dd)</td>
</tr>
<tr class="row-even"><td>price_spread</td>
<td>float</td>
<td>当前向上的价差，亦即摆盘数据的卖档的相邻档位的报价差</td>
</tr>
<tr class="row-odd"><td>dark_status</td>
<td>str</td>
<td>暗盘交易状态，见 <a class="reference external" href="Base_API.html#darkstatus">DarkStatus</a></td>
</tr>
<tr class="row-even"><td>sec_status</td>
<td>str</td>
<td>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-even"><td>contract_size</td>
<td>float</td>
<td>每份合约数</td>
</tr>
<tr class="row-odd"><td>open_interest</td>
<td>int</td>
<td>未平仓合约数</td>
</tr>
<tr class="row-even"><td>implied_volatility</td>
<td>float</td>
<td>隐含波动率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>premium</td>
<td>float</td>
<td>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>delta</td>
<td>float</td>
<td>希腊值 Delta</td>
</tr>
<tr class="row-odd"><td>gamma</td>
<td>float</td>
<td>希腊值 Gamma</td>
</tr>
<tr class="row-even"><td>vega</td>
<td>float</td>
<td>希腊值 Vega</td>
</tr>
<tr class="row-odd"><td>theta</td>
<td>float</td>
<td>希腊值 Theta</td>
</tr>
<tr class="row-even"><td>rho</td>
<td>float</td>
<td>希腊值 Rho</td>
</tr>
<tr class="row-odd"><td>net_open_interest</td>
<td>int</td>
<td>净未平仓合约数</td>
</tr>
<tr class="row-even"><td>expiry_date_distance</td>
<td>int</td>
<td>距离到期日天数，负数表示已过期</td>
</tr>
<tr class="row-odd"><td>contract_nominal_value</td>
<td>float</td>
<td>合约名义金额</td>
</tr>
<tr class="row-even"><td>owner_lot_multiplier</td>
<td>float</td>
<td>相等正股手数，指数期权无该字段</td>
</tr>
<tr class="row-odd"><td>option_area_type</td>
<td>str</td>
<td>期权类型（按行权时间），见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></td>
</tr>
<tr class="row-even"><td>contract_multiplier</td>
<td>float</td>
<td>合约乘数，指数期权特有字段</td>
</tr>
<tr class="row-odd"><td>pre_price</td>
<td>float</td>
<td>盘前价格</td>
</tr>
<tr class="row-even"><td>pre_high_price</td>
<td>float</td>
<td>盘前最高价</td>
</tr>
<tr class="row-odd"><td>pre_low_price</td>
<td>float</td>
<td>盘前最低价</td>
</tr>
<tr class="row-even"><td>pre_volume</td>
<td>int</td>
<td>盘前成交量</td>
</tr>
<tr class="row-odd"><td>pre_turnover</td>
<td>float</td>
<td>盘前成交额</td>
</tr>
<tr class="row-even"><td>pre_change_val</td>
<td>float</td>
<td>盘前涨跌额</td>
</tr>
<tr class="row-odd"><td>pre_change_rate</td>
<td>float</td>
<td>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>pre_amplitude</td>
<td>float</td>
<td>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>after_price</td>
<td>float</td>
<td>盘后价格</td>
</tr>
<tr class="row-even"><td>after_high_price</td>
<td>float</td>
<td>盘后最高价</td>
</tr>
<tr class="row-odd"><td>after_low_price</td>
<td>float</td>
<td>盘后最低价</td>
</tr>
<tr class="row-even"><td>after_volume</td>
<td>int</td>
<td>盘后成交量，科创板支持此数据。</td>
</tr>
<tr class="row-odd"><td>after_turnover</td>
<td>float</td>
<td>盘后成交额，科创板支持此数据。</td>
</tr>
<tr class="row-even"><td>after_change_val</td>
<td>float</td>
<td>盘后涨跌额</td>
</tr>
<tr class="row-odd"><td>after_change_rate</td>
<td>float</td>
<td>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>after_amplitude</td>
<td>float</td>
<td>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>last_settle_price</td>
<td>float</td>
<td>昨结，期货特有字段</td>
</tr>
<tr class="row-even"><td>position</td>
<td>float</td>
<td>持仓量，期货特有字段</td>
</tr>
<tr class="row-odd"><td>position_change</td>
<td>float</td>
<td>日增仓，期货特有字段</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅k线类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_quote</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">])</span>  <span class="c1"># 获取订阅股票报价的实时数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>   <span class="c1"># 取第一条的股票代码</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">code</span>   <span class="n">data_date</span> <span class="n">data_time</span>  <span class="n">last_price</span>  <span class="n">open_price</span>  <span class="n">high_price</span>  <span class="n">low_price</span>  <span class="n">prev_close_price</span>    <span class="n">volume</span>      <span class="n">turnover</span>  <span class="n">turnover_rate</span>  <span class="n">amplitude</span>  <span class="n">suspension</span> <span class="n">listing_date</span>  <span class="n">price_spread</span> <span class="n">dark_status</span> <span class="n">sec_status</span> <span class="n">strike_price</span> <span class="n">contract_size</span> <span class="n">open_interest</span> <span class="n">implied_volatility</span> <span class="n">premium</span> <span class="n">delta</span> <span class="n">gamma</span> <span class="n">vega</span> <span class="n">theta</span>  <span class="n">rho</span> <span class="n">net_open_interest</span> <span class="n">expiry_date_distance</span> <span class="n">contract_nominal_value</span> <span class="n">owner_lot_multiplier</span> <span class="n">option_area_type</span> <span class="n">contract_multiplier</span> <span class="n">last_settle_price</span> <span class="n">position</span> <span class="n">position_change</span> <span class="n">pre_price</span> <span class="n">pre_high_price</span> <span class="n">pre_low_price</span> <span class="n">pre_volume</span> <span class="n">pre_turnover</span> <span class="n">pre_change_val</span> <span class="n">pre_change_rate</span> <span class="n">pre_amplitude</span> <span class="n">after_price</span> <span class="n">after_high_price</span> <span class="n">after_low_price</span> <span class="n">after_volume</span> <span class="n">after_turnover</span> <span class="n">after_change_val</span> <span class="n">after_change_rate</span> <span class="n">after_amplitude</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span>  <span class="mi">15</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">19</span>       <span class="mf">376.8</span>       <span class="mf">371.8</span>       <span class="mf">380.0</span>      <span class="mf">371.6</span>             <span class="mf">382.4</span>  <span class="mi">18829170</span>  <span class="mf">7.055425e+09</span>          <span class="mf">0.197</span>      <span class="mf">2.197</span>       <span class="bp">False</span>   <span class="mi">2004</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">16</span>           <span class="mf">0.2</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="n">NORMAL</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>                <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>                  <span class="n">N</span><span class="o">/</span><span class="n">A</span>                    <span class="n">N</span><span class="o">/</span><span class="n">A</span>                  <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>                 <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>      <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>       <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>
<span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>
<span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-rt-ticker">
<h4>get_rt_ticker<a class="headerlink" href="#get-rt-ticker" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_rt_ticker">
<code class="descname">get_rt_ticker</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>num=500</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_ticker" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定股票的实时逐笔。取最近num个逐笔</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>num</strong> &#8211; 最近ticker个数，最多可获取1000个</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>sequence</td>
<td>int</td>
<td>逐笔序号</td>
</tr>
<tr class="row-even"><td>time</td>
<td>str</td>
<td>成交时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>price</td>
<td>float</td>
<td>成交价格</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交数量（股数）</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-even"><td>ticker_direction</td>
<td>str</td>
<td>逐笔方向</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>str</td>
<td>逐笔类型，参见 <a class="reference external" href="Base_API.html#tickertype">TickerType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅逐笔类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_ticker</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># 获取港股00700最近2个逐笔</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;turnover&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>   <span class="c1"># 取第一条的成交金额</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;turnover&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">code</span>                 <span class="n">time</span>  <span class="n">price</span>   <span class="n">volume</span>     <span class="n">turnover</span> <span class="n">ticker_direction</span>             <span class="n">sequence</span>     <span class="nb">type</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mi">16</span><span class="p">:</span><span class="mo">04</span><span class="p">:</span><span class="mi">41</span>  <span class="mf">372.4</span>       <span class="mi">60</span>      <span class="mf">22344.0</span>          <span class="n">NEUTRAL</span>  <span class="mi">6809908936888567318</span>  <span class="n">ODD_LOT</span>
<span class="mi">1</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mi">16</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mi">17</span>  <span class="mf">376.6</span>  <span class="mi">2198400</span>  <span class="mf">827917440.0</span>          <span class="n">NEUTRAL</span>  <span class="mi">6809909864601503255</span>  <span class="n">AUCTION</span>
<span class="mf">22344.0</span>
<span class="p">[</span><span class="mf">22344.0</span><span class="p">,</span> <span class="mf">827917440.0</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rt-ticker-limit"><span class="std std-ref">获取逐笔限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-cur-kline">
<h4>get_cur_kline<a class="headerlink" href="#get-cur-kline" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_cur_kline">
<code class="descname">get_cur_kline</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>num</em>, <em>ktype=SubType.K_DAY</em>, <em>autype=AuType.QFQ</em><span class="sig-paren">)</span><a class="headerlink" href="#get_cur_kline" title="永久链接至目标">¶</a></dt>
<dd><p>实时获取指定股票最近num个K线数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>num</strong> &#8211; k线数据个数，最多1000根</li>
<li><strong>ktype</strong> &#8211; k线类型，参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></li>
<li><strong>autype</strong> &#8211; 复权类型，参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="10%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>last_close</td>
<td>float</td>
<td>昨收价（即前一个时间的收盘价。为了效率原因，第一个数据的昨收价可能为0）</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret_sub</span><span class="p">,</span> <span class="n">err_message</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c1"># 先订阅k线类型。订阅成功后OpenD将持续收到服务器的推送，False代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_cur_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">)</span>  <span class="c1"># 获取港股00700最近2个K线数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;turnover_rate&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>   <span class="c1"># 取第一条的换手率</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;turnover_rate&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">,</span> <span class="n">err_message</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">code</span>             <span class="n">time_key</span>   <span class="nb">open</span>  <span class="n">close</span>   <span class="n">high</span>    <span class="n">low</span>    <span class="n">volume</span>      <span class="n">turnover</span>  <span class="n">pe_ratio</span>  <span class="n">turnover_rate</span>  <span class="n">last_close</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">27</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>  <span class="mf">390.0</span>  <span class="mf">382.4</span>  <span class="mf">390.0</span>  <span class="mf">381.8</span>  <span class="mi">28738698</span>  <span class="mf">1.103966e+10</span>    <span class="mf">35.466</span>        <span class="mf">0.00301</span>       <span class="mf">381.8</span>
<span class="mi">1</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>  <span class="mf">371.8</span>  <span class="mf">376.6</span>  <span class="mf">380.0</span>  <span class="mf">371.6</span>  <span class="mi">21838731</span>  <span class="mf">8.188543e+09</span>    <span class="mf">34.928</span>        <span class="mf">0.00229</span>       <span class="mf">382.4</span>
<span class="mf">0.00301</span>
<span class="p">[</span><span class="mf">0.00301</span><span class="p">,</span> <span class="mf">0.00229</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-cur-kline-limit"><span class="std std-ref">获取K线限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-order-book">
<h4>get_order_book<a class="headerlink" href="#get-order-book" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_order_book">
<code class="descname">get_order_book</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>num = 10</em><span class="sig-paren">)</span><a class="headerlink" href="#get_order_book" title="永久链接至目标">¶</a></dt>
<dd><p>获取实时摆盘数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>num</strong> &#8211; 请求摆盘档数，摆盘档数获取上限请参见 <a class="reference external" href="../q&amp;a/Q&amp;A.html#q11-orderbook">摆盘档数明细</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last">(ret, data)</p>
</td>
</tr>
</tbody>
</table>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回字典，数据格式如下:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>{
&#39;code&#39;: 股票代码
&#39;svr_recv_time_bid&#39;: 富途服务器从交易所收到数据的时间(for bid) 部分数据的接收时间为零，例如服务器重启或第一次推送的缓存数据。
&#39;svr_recv_time_ask&#39;: 富途服务器从交易所收到数据的时间(for ask)
&#39;Ask&#39;: [ (ask_price1, ask_volume1，order_num, {&#39;orderid1&#39;: order_volume1, &#39;orderid2&#39;: order_volume2, …… }), (ask_price2, ask_volume2, order_num, {&#39;orderid1&#39;: order_volume1, &#39;orderid2&#39;: order_volume2, …… }),…]
&#39;Bid&#39;: [ (bid_price1, bid_volume1, order_num, {&#39;orderid1&#39;: order_volume1, &#39;orderid2&#39;: order_volume2, …… }), (bid_price2, bid_volume2, order_num,  {&#39;orderid1&#39;: order_volume1, &#39;orderid2&#39;: order_volume2, …… }),…]
}
</pre></div>
</div>
<div class="line-block">
<div class="line">&#8216;Ask&#8217;：卖盘</div>
<div class="line">&#8216;Bid&#8217;: 买盘</div>
<div class="line">每个元组的含义是:</div>
<div class="line">委托价格</div>
<div class="line">委托数量</div>
<div class="line">委托订单数</div>
<div class="line">委托订单明细（仅港股SF行情支持此字段，最多支持1000笔委托订单明细）</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret_sub</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">],</span> <span class="n">subscribe_push</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># 先订阅买卖摆盘类型。订阅成功后 OpenD 将持续收到服务器的推送，False 代表暂时不需要推送给脚本</span>
<span class="k">if</span> <span class="n">ret_sub</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 订阅成功</span>
    <span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_order_book</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># 获取一次 3 档实时摆盘数据</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;subscription failed&#39;</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD 会在 1 分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_bid&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_ask&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;Bid&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">384.2</span><span class="p">,</span> <span class="mi">15400</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">384.0</span><span class="p">,</span> <span class="mi">3700</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">383.8</span><span class="p">,</span> <span class="mi">6600</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="p">{})],</span> <span class="s1">&#39;Ask&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">384.4</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">384.6</span><span class="p">,</span> <span class="mi">25800</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">384.8</span><span class="p">,</span> <span class="mi">19100</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="p">{})]}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-referencestock-list">
<h4>get_referencestock_list<a class="headerlink" href="#get-referencestock-list" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_referencestock_list">
<code class="descname">get_referencestock_list</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>reference_type</em><span class="sig-paren">)</span><a class="headerlink" href="#get_referencestock_list" title="永久链接至目标">¶</a></dt>
<dd><p>获取证券的关联数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 证券id，str，例如HK.00700</li>
<li><strong>reference_type</strong> &#8211; 要获得的相关数据，参见 <a class="reference external" href="Base_API.html#securityreferencetype">SecurityReferenceType</a> 。例如WARRANT，表示获取正股相关的窝轮</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="10%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>证券代码</td>
</tr>
<tr class="row-odd"><td>lot_size</td>
<td>int</td>
<td>每手股数，期货表示合约乘数</td>
</tr>
<tr class="row-even"><td>stock_type</td>
<td>str</td>
<td>证券类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-odd"><td>stock_name</td>
<td>str</td>
<td>证券名字</td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>wrt_valid</td>
<td>bool</td>
<td>是否是窝轮，如果为True，下面wrt开头的字段有效</td>
</tr>
<tr class="row-even"><td>wrt_type</td>
<td>str</td>
<td>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>wrt_code</td>
<td>str</td>
<td>所属正股</td>
</tr>
<tr class="row-even"><td>future_valid</td>
<td>bool</td>
<td>是否是期货，如果为True，下面future开头的字段有效</td>
</tr>
<tr class="row-odd"><td>future_main_contract</td>
<td>bool</td>
<td>是否主连合约（期货特有字段）</td>
</tr>
<tr class="row-even"><td>future_last_trade_time</td>
<td>string</td>
<td>最后交易时间（期货特有字段，主连，当月，下月等无该字段）</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="c1"># 获取正股相关的窝轮</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_referencestock_list</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">SecurityReferenceType</span><span class="o">.</span><span class="n">WARRANT</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;******************************************&#39;</span><span class="p">)</span>
<span class="c1"># 港期相关合约</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_referencestock_list</span><span class="p">(</span><span class="s1">&#39;HK.A50main&#39;</span><span class="p">,</span> <span class="n">SecurityReferenceType</span><span class="o">.</span><span class="n">FUTURE</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>      code  lot_size stock_type stock_name   list_time  wrt_valid wrt_type  wrt_code  future_valid  future_main_contract  future_last_trade_time
0     HK.47096      1000    WARRANT   腾讯摩通零三界A  2019-07-25       True   INLINE  HK.00700         False                   NaN                     NaN
...        ...       ...        ...        ...         ...        ...      ...       ...           ...                   ...                     ...
1396  HK.58533     10000    WARRANT   腾讯高盛零九熊A  2020-04-01       True     BEAR  HK.00700         False                   NaN                     NaN

[1397 rows x 11 columns]
HK.47096
[&#39;HK.47096&#39;, &#39;HK.24512&#39;, &#39;HK.24719&#39;, &#39;HK.27886&#39;, &#39;HK.28043&#39;, &#39;HK.28152&#39;, &#39;HK.28621&#39;, &#39;HK.14339&#39;, &#39;HK.17017&#39;,
...        ...       ...        ...        ...         ...        ...      ...       ...
 &#39;HK.58474&#39;, &#39;HK.58533&#39;]
******************************************
      code  lot_size stock_type         stock_name list_time  wrt_valid  wrt_type  wrt_code  future_valid  future_main_contract future_last_trade_time
0   HK.A50main      5000     FUTURE  安硕富时 A50 ETF 期货主连                False       NaN       NaN          True                  True
..         ...       ...        ...                ...       ...        ...       ...       ...           ...                   ...                    ...
5   HK.A502009      5000     FUTURE  安硕富时 A50 ETF 2009                False       NaN       NaN          True                 False             2020-09-29

[6 rows x 11 columns]
HK.A50main
[&#39;HK.A50main&#39;, &#39;HK.A502003&#39;, &#39;HK.A502004&#39;, &#39;HK.A502005&#39;, &#39;HK.A502006&#39;, &#39;HK.A502009&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-referencestock-list-limit"><span class="std std-ref">获取股票关联数据限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-owner-plate">
<h4>get_owner_plate<a class="headerlink" href="#get-owner-plate" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_owner_plate">
<code class="descname">get_owner_plate</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_owner_plate" title="永久链接至目标">¶</a></dt>
<dd><p>获取单支或多支股票的所属板块信息列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code_list</strong> &#8211; 股票代码列表，仅支持正股、指数。list或str。例如：[&#8216;HK.00700&#8217;, &#8216;HK.00001&#8217;]或者&#8217;HK.00700,HK.00001&#8217;，最多可传入200只股票</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>证券代码</td>
</tr>
<tr class="row-odd"><td>plate_code</td>
<td>str</td>
<td>板块代码</td>
</tr>
<tr class="row-even"><td>plate_name</td>
<td>str</td>
<td>板块名字</td>
</tr>
<tr class="row-odd"><td>plate_type</td>
<td>str</td>
<td>板块类型（行业板块或概念板块），查看 <a class="reference external" href="Base_API.html#plate">Plate</a></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">code_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HK.00001&#39;</span><span class="p">]</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_owner_plate</span><span class="p">(</span><span class="n">code_list</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;plate_code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 板块代码转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code          plate_code plate_name plate_type
0   HK.00001  HK.HSI Constituent      恒指成份股      OTHER
..       ...                 ...        ...        ...
10  HK.00001           HK.BK1993      香港本地股    CONCEPT

[11 rows x 4 columns]
HK.00001
[&#39;HK.HSI Constituent&#39;, &#39;HK.GangGuTong&#39;, &#39;HK.BK1000&#39;, &#39;HK.BK1061&#39;, &#39;HK.BK1107&#39;, &#39;HK.BK1197&#39;, &#39;HK.BK1249&#39;, &#39;HK.BK1600&#39;, &#39;HK.BK1609&#39;, &#39;HK.BK1922&#39;, &#39;HK.BK1983&#39;, &#39;HK.BK1993&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-owner-plate-limit"><span class="std std-ref">获取股票所属板块限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-holding-change-list">
<h4>get_holding_change_list<a class="headerlink" href="#get-holding-change-list" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_holding_change_list">
<code class="descname">get_holding_change_list</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>holder_type</em>, <em>start</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_holding_change_list" title="永久链接至目标">¶</a></dt>
<dd><p>获取大股东持股变动列表,只提供美股数据,并最多只返回前100个</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码. 例如：&#8217;US.AAPL&#8217;</li>
<li><strong>holder_type</strong> &#8211; 持有者类别，查看 <a class="reference external" href="Base_API.html#stockholder">StockHolder</a></li>
<li><strong>start</strong> &#8211; 开始时间. 例如：&#8216;2016-10-01&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束时间，例如：&#8216;2017-10-01&#8217;。
start与end的组合如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="5%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>holder_name</td>
<td>str</td>
<td>高管名称</td>
</tr>
<tr class="row-odd"><td>holding_qty</td>
<td>float</td>
<td>持股数</td>
</tr>
<tr class="row-even"><td>holding_ratio</td>
<td>float</td>
<td>持股比例（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>change_qty</td>
<td>float</td>
<td>变动数</td>
</tr>
<tr class="row-even"><td>change_ratio</td>
<td>float</td>
<td>变动比例（该字段为百分比字段，默认不展示%，如20实际对应20%。是相对于自身的比例，而不是总的。如总股本1万股，持有100股，持股百分比是1%，卖掉50股，变动比例是50%，而不是0.5%）</td>
</tr>
<tr class="row-odd"><td>time</td>
<td>str</td>
<td>发布时间（美股的时间默认是美东）</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_holding_change_list</span><span class="p">(</span><span class="s1">&#39;US.AAPL&#39;</span><span class="p">,</span> <span class="n">StockHolder</span><span class="o">.</span><span class="n">INSTITUTE</span><span class="p">,</span> <span class="s1">&#39;2018-10-01&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;holding_ratio&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>   <span class="c1"># 取第一条的持股比例</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;holding_ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    <span class="n">holder_name</span>  <span class="n">holding_qty</span>  <span class="n">holding_ratio</span>  <span class="n">change_qty</span>  <span class="n">change_ratio</span>                 <span class="n">time</span>
<span class="mi">0</span>                            <span class="n">The</span> <span class="n">Vanguard</span> <span class="n">Group</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>  <span class="mf">331132509.0</span>         <span class="mf">7.4525</span>  <span class="o">-</span><span class="mf">3981157.0</span>         <span class="o">-</span><span class="mf">1.19</span>  <span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>
<span class="o">..</span>                                                <span class="o">...</span>          <span class="o">...</span>            <span class="o">...</span>         <span class="o">...</span>           <span class="o">...</span>                  <span class="o">...</span>
<span class="mi">92</span>  <span class="n">Los</span> <span class="n">Angeles</span> <span class="n">Capital</span> <span class="n">Management</span> <span class="n">And</span> <span class="n">Equity</span> <span class="n">Rese</span><span class="o">...</span>    <span class="mf">4007663.0</span>         <span class="mf">0.0902</span>    <span class="o">-</span><span class="mf">57784.0</span>         <span class="o">-</span><span class="mf">1.42</span>  <span class="mi">2019</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>

<span class="p">[</span><span class="mi">93</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">6</span> <span class="n">columns</span><span class="p">]</span>
<span class="mf">7.4525</span>
<span class="p">[</span><span class="mf">7.4525</span><span class="p">,</span> <span class="mf">5.6004</span><span class="p">,</span> <span class="mf">4.3059</span><span class="p">,</span> <span class="mf">4.1463</span><span class="p">,</span> <span class="mf">2.1087</span><span class="p">,</span> <span class="mf">1.3884</span><span class="p">,</span> <span class="mf">1.0522</span><span class="p">,</span> <span class="mf">0.905</span><span class="p">,</span> <span class="mf">0.7931</span><span class="p">,</span> <span class="mf">0.7871</span><span class="p">,</span> <span class="mf">0.7782</span><span class="p">,</span> <span class="mf">0.6872</span><span class="p">,</span> <span class="mf">0.6687</span><span class="p">,</span> <span class="mf">0.666</span><span class="p">,</span> <span class="mf">0.6186</span><span class="p">,</span> <span class="mf">0.0956</span><span class="p">,</span> <span class="mf">0.0954</span><span class="p">,</span> <span class="mf">0.0903</span><span class="p">,</span>
<span class="o">..</span>                                                <span class="o">...</span>          <span class="o">...</span>            <span class="o">...</span>         <span class="o">...</span>           <span class="o">...</span>                  <span class="o">...</span>
<span class="mf">0.0903</span><span class="p">,</span> <span class="mf">0.0902</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-holding-change-list-limit"><span class="std std-ref">获取持股变化列表限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-option-chain">
<h4>get_option_chain<a class="headerlink" href="#get-option-chain" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_option_chain">
<code class="descname">get_option_chain</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>index_option_type=IndexOptionType.NORMAL</em>, <em>start=None</em>, <em>end=None</em>, <em>option_type=OptionType.ALL</em>, <em>option_cond_type=OptionCondType.ALL</em>, <em>data_filter=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_option_chain" title="永久链接至目标">¶</a></dt>
<dd><p>通过标的股查询期权</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码,例如：&#8217;HK.02318&#8217;</li>
<li><strong>index_option_type</strong> &#8211; 指数期权类型，查看 <a class="reference external" href="Base_API.html#indexoptiontype">IndexOptionType</a>。正股和其它类型股票忽略该参数。</li>
<li><strong>start</strong> &#8211; 开始日期，该日期指到期日，例如&#8216;2017-08-01&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束日期（包括这一天），该日期指到期日，例如&#8216;2017-08-30&#8217;。 注意，时间范围最多30天。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前30天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后30天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>start为当前日期，end往后30天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><strong>option_type</strong> &#8211; 期权类型,,默认全部,全部/看涨/看跌，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></li>
<li><strong>option_cond_type</strong> &#8211; 默认全部,全部/价内/价外，查看 <a class="reference external" href="Base_API.html#optioncondtype">OptionCondType</a></li>
<li><strong>data_filter</strong> &#8211; <p>数据筛选条件，默认不筛选，参考OptionDataFilter。
OptionDataFilter字段如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="13%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">字段</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>implied_volatility_min</td>
<td>float</td>
<td>隐含波动率过滤起点 %</td>
</tr>
<tr class="row-odd"><td>implied_volatility_max</td>
<td>float</td>
<td>隐含波动率过滤终点 %</td>
</tr>
<tr class="row-even"><td>delta_min</td>
<td>float</td>
<td>希腊值 Delta过滤起点</td>
</tr>
<tr class="row-odd"><td>delta_max</td>
<td>float</td>
<td>希腊值 Delta过滤终点</td>
</tr>
<tr class="row-even"><td>gamma_min</td>
<td>float</td>
<td>希腊值 Gamma过滤起点</td>
</tr>
<tr class="row-odd"><td>gamma_max</td>
<td>float</td>
<td>希腊值 Gamma过滤终点</td>
</tr>
<tr class="row-even"><td>vega_min</td>
<td>float</td>
<td>希腊值 Vega过滤起点</td>
</tr>
<tr class="row-odd"><td>vega_max</td>
<td>float</td>
<td>希腊值 Vega过滤终点</td>
</tr>
<tr class="row-even"><td>theta_min</td>
<td>float</td>
<td>希腊值 Theta过滤起点</td>
</tr>
<tr class="row-odd"><td>theta_max</td>
<td>float</td>
<td>希腊值 Theta过滤终点</td>
</tr>
<tr class="row-even"><td>rho_min</td>
<td>float</td>
<td>希腊值 Rho过滤起点</td>
</tr>
<tr class="row-odd"><td>rho_max</td>
<td>float</td>
<td>希腊值 Rho过滤终点</td>
</tr>
<tr class="row-even"><td>net_open_interest_min</td>
<td>float</td>
<td>净未平仓合约数过滤起点</td>
</tr>
<tr class="row-odd"><td>net_open_interest_max</td>
<td>float</td>
<td>净未平仓合约数过滤终点</td>
</tr>
<tr class="row-even"><td>open_interest_min</td>
<td>float</td>
<td>未平仓合约数过滤起点</td>
</tr>
<tr class="row-odd"><td>open_interest_max</td>
<td>float</td>
<td>未平仓合约数过滤终点</td>
</tr>
<tr class="row-even"><td>vol_min</td>
<td>float</td>
<td>成交量过滤起点</td>
</tr>
<tr class="row-odd"><td>vol_max</td>
<td>float</td>
<td>成交量过滤终点</td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="12%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段）</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>标的股</td>
</tr>
<tr class="row-even"><td>strike_time</td>
<td>str</td>
<td>行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>index_option_type</td>
<td>str</td>
<td>指数期权类型</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_option_chain</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">IndexOptionType</span><span class="o">.</span><span class="n">SMALL</span><span class="p">,</span> <span class="s1">&#39;2020-03-28&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-04-02&#39;</span><span class="p">,</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">CALL</span><span class="p">,</span> <span class="n">OptionCondType</span><span class="o">.</span><span class="n">WITHIN</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    code                name  lot_size stock_type option_type stock_owner strike_time  strike_price  suspension  stock_id index_option_type
0   HK.TCH200330C250000  腾讯 200330 250.00 购       100       DRVT        CALL    HK.00700  2020-03-30         250.0       False  80049079               N/A
..                  ...                 ...       ...        ...         ...         ...         ...           ...         ...       ...               ...
18  HK.TCH200330C380000  腾讯 200330 380.00 购       100       DRVT        CALL    HK.00700  2020-03-30         380.0       False  80031978               N/A

[19 rows x 11 columns]
HK.TCH200330C250000
[&#39;HK.TCH200330C250000&#39;, &#39;HK.TCH200330C255000&#39;, &#39;HK.TCH200330C260000&#39;, &#39;HK.TCH200330C265000&#39;, &#39;HK.TCH200330C270000&#39;, &#39;HK.TCH200330C275000&#39;,
..                  ...                 ...       ...        ...         ...         ...         ...           ...
 &#39;HK.TCH200330C380000&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-option-chain-limit"><span class="std std-ref">获取期权链限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-history-kl-quota">
<h4>get_history_kl_quota<a class="headerlink" href="#get-history-kl-quota" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_history_kl_quota">
<code class="descname">get_history_kl_quota</code><span class="sig-paren">(</span><em>self</em>, <em>get_detail=False</em><span class="sig-paren">)</span><a class="headerlink" href="#get_history_kl_quota" title="永久链接至目标">¶</a></dt>
<dd><p>获取已使用过的额度，即当前周期内已经下载过多少只股票</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>get_detail</strong> &#8211; <p>是否返回详细拉取过的历史纪录</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>拉取的股票代码</td>
</tr>
<tr class="row-odd"><td>request_time</td>
<td>str</td>
<td>最后一次拉取的时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回(used_quota, remain_quota, detail_list)</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>used_quota</td>
<td>int32</td>
<td>已使用过的额度，即当前周期内已经下载过多少只股票</td>
</tr>
<tr class="row-odd"><td>remain_quota</td>
<td>int32</td>
<td>剩余额度，30天后额度会恢复</td>
</tr>
<tr class="row-even"><td>detail_list</td>
<td>dict list</td>
<td>get_detail为True时返回，每只拉取过的股票的下载时间</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_history_kl_quota</span><span class="p">(</span><span class="n">get_detail</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  <span class="c1"># 设置True代表需要返回详细的拉取历史K线的记录</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="p">[{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;request_time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-03-27 19:15:57&#39;</span><span class="p">}])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-rehab">
<h4>get_rehab<a class="headerlink" href="#get-rehab" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_rehab">
<code class="descname">get_rehab</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rehab" title="永久链接至目标">¶</a></dt>
<dd><p>获取给定股票的复权因子</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ex_div_date</td>
<td>str</td>
<td>除权除息日</td>
</tr>
<tr class="row-odd"><td>split_ratio</td>
<td>float</td>
<td>拆合股比例（该字段为比例字段，展示为小数表示）例如，对于5股合1股为5.0，对于1股拆5股为0.2</td>
</tr>
<tr class="row-even"><td>per_cash_div</td>
<td>float</td>
<td>每股派现</td>
</tr>
<tr class="row-odd"><td>per_share_div_ratio</td>
<td>float</td>
<td>每股送股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>per_share_trans_ratio</td>
<td>float</td>
<td>每股转增股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-odd"><td>allotment_ratio</td>
<td>float</td>
<td>每股配股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>allotment_price</td>
<td>float</td>
<td>配股价</td>
</tr>
<tr class="row-odd"><td>stk_spo_ratio</td>
<td>float</td>
<td>增发比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>stk_spo_price</td>
<td>float</td>
<td>增发价格</td>
</tr>
<tr class="row-odd"><td>forward_adj_factorA</td>
<td>float</td>
<td>前复权因子A</td>
</tr>
<tr class="row-even"><td>forward_adj_factorB</td>
<td>float</td>
<td>前复权因子B</td>
</tr>
<tr class="row-odd"><td>backward_adj_factorA</td>
<td>float</td>
<td>后复权因子A</td>
</tr>
<tr class="row-even"><td>backward_adj_factorB</td>
<td>float</td>
<td>后复权因子B</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rehab</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;ex_div_date&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的除权除息日</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;ex_div_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    <span class="n">ex_div_date</span>  <span class="n">split_ratio</span>  <span class="n">per_cash_div</span>  <span class="n">per_share_div_ratio</span>  <span class="n">per_share_trans_ratio</span>  <span class="n">allotment_ratio</span>  <span class="n">allotment_price</span>  <span class="n">stk_spo_ratio</span>  <span class="n">stk_spo_price</span>  <span class="n">forward_adj_factorA</span>  <span class="n">forward_adj_factorB</span>  <span class="n">backward_adj_factorA</span>  <span class="n">backward_adj_factorB</span>
<span class="mi">0</span>   <span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">19</span>          <span class="n">NaN</span>          <span class="mf">0.07</span>                  <span class="n">NaN</span>                    <span class="n">NaN</span>              <span class="n">NaN</span>              <span class="n">NaN</span>            <span class="n">NaN</span>            <span class="n">NaN</span>                  <span class="mf">1.0</span>                <span class="o">-</span><span class="mf">0.07</span>                   <span class="mf">1.0</span>                  <span class="mf">0.07</span>
<span class="o">..</span>         <span class="o">...</span>          <span class="o">...</span>           <span class="o">...</span>                  <span class="o">...</span>                    <span class="o">...</span>              <span class="o">...</span>              <span class="o">...</span>            <span class="o">...</span>            <span class="o">...</span>                  <span class="o">...</span>                  <span class="o">...</span>                   <span class="o">...</span>                   <span class="o">...</span>
<span class="mi">15</span>  <span class="mi">2019</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">17</span>          <span class="n">NaN</span>          <span class="mf">1.00</span>                  <span class="n">NaN</span>                    <span class="n">NaN</span>              <span class="n">NaN</span>              <span class="n">NaN</span>            <span class="n">NaN</span>            <span class="n">NaN</span>                  <span class="mf">1.0</span>                <span class="o">-</span><span class="mf">1.00</span>                   <span class="mf">1.0</span>                  <span class="mf">1.00</span>

<span class="p">[</span><span class="mi">16</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">13</span> <span class="n">columns</span><span class="p">]</span>
<span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">19</span>
<span class="p">[</span><span class="s1">&#39;2005-04-19&#39;</span><span class="p">,</span> <span class="s1">&#39;2006-05-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2007-05-09&#39;</span><span class="p">,</span> <span class="s1">&#39;2008-05-06&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-05-06&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-05-05&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-05-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-05-18&#39;</span><span class="p">,</span> <span class="s1">&#39;2013-05-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-05-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-05-16&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-05-15&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-05-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-05-19&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-05-18&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-05-17&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rehab-limit"><span class="std std-ref">在线获取单只股票复权信息限制</span></a></li>
<li>复权后价格 = 复权前价格 * 复权因子a + 复权因子b</li>
</ul>
</div>
</div>
<div class="section" id="get-warrant">
<h4>get_warrant<a class="headerlink" href="#get-warrant" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_warrant">
<code class="descname">get_warrant</code><span class="sig-paren">(</span><em>self</em>, <em>stock_owner=''</em>, <em>req=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_warrant" title="永久链接至目标">¶</a></dt>
<dd><p>通过标的股查询窝轮，港股 BMP 权限不支持查询窝轮功能。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first last simple">
<li><strong>stock_owner</strong> &#8211; 所属正股的股票代码,例如：&#8217;HK.00700&#8217;，会去找腾讯的窝轮，注意有些股票没有对应窝轮牛熊。</li>
<li><strong>req</strong> &#8211; 请求参数组合</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="8%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>begin</td>
<td>int</td>
<td>数据起始点</td>
</tr>
<tr class="row-odd"><td>num</td>
<td>int</td>
<td>请求数据个数，最大200</td>
</tr>
<tr class="row-even"><td>sort_field</td>
<td>SortField</td>
<td>根据哪个字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></td>
</tr>
<tr class="row-odd"><td>ascend</td>
<td>bool</td>
<td>升序True, 降序False</td>
</tr>
<tr class="row-even"><td>type_list</td>
<td>list</td>
<td>窝轮类型过滤列表 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>issuer_list</td>
<td>list</td>
<td>发行人过滤列表 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></td>
</tr>
<tr class="row-even"><td>maturity_time_min</td>
<td>str</td>
<td>到期日, 到期日范围的开始时间</td>
</tr>
<tr class="row-odd"><td>maturity_time_max</td>
<td>str</td>
<td>到期日范围的结束时间</td>
</tr>
<tr class="row-even"><td>ipo_period</td>
<td>str</td>
<td>上市日 参见 <a class="reference external" href="Base_API.html#ipoperiod">IpoPeriod</a></td>
</tr>
<tr class="row-odd"><td>price_type</td>
<td>str</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> , 界内证暂不支持界内外筛选</td>
</tr>
<tr class="row-even"><td>status</td>
<td>str</td>
<td>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></td>
</tr>
<tr class="row-odd"><td>cur_price_min</td>
<td>float</td>
<td>最新价的过滤下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>cur_price_max</td>
<td>float</td>
<td>最新价的过滤上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>strike_price_min</td>
<td>float</td>
<td>行使价的过滤下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>strike_price_max</td>
<td>float</td>
<td>行使价的过滤上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>street_min</td>
<td>float</td>
<td>街货占比的过滤下限（闭区间），该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>street_max</td>
<td>float</td>
<td>街货占比的过滤上限（闭区间），该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>conversion_min</td>
<td>float</td>
<td>换股比率的过滤下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>conversion_max</td>
<td>float</td>
<td>换股比率的过滤上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>vol_min</td>
<td>unsigned int</td>
<td>成交量的过滤下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>vol_max</td>
<td>unsigned int</td>
<td>成交量的过滤上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>premium_min</td>
<td>float</td>
<td>溢价的过滤下限（闭区间），该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>premium_max</td>
<td>float</td>
<td>溢价的过滤上限（闭区间），该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>leverage_ratio_min</td>
<td>float</td>
<td>杠杆比率的过滤下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>leverage_ratio_max</td>
<td>float</td>
<td>杠杆比率的过滤上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>delta_min</td>
<td>float</td>
<td>对冲值的过滤下限（闭区间）, 仅认购认沽支持该字段过滤，不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>delta_max</td>
<td>float</td>
<td>对冲值的过滤上限（闭区间）, 仅认购认沽支持该字段过滤，不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>implied_min</td>
<td>float</td>
<td>引伸波幅的过滤下限（闭区间）, 仅认购认沽支持该字段过滤，不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>implied_max</td>
<td>float</td>
<td>引伸波幅的过滤上限（闭区间）, 仅认购认沽支持该字段过滤，不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>recovery_price_min</td>
<td>float</td>
<td>收回价的过滤下限（闭区间）, 仅牛熊证支持该字段过滤，不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>recovery_price_max</td>
<td>float</td>
<td>收回价的过滤上限（闭区间）, 仅牛熊证支持该字段过滤，不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>price_recovery_ratio_min</td>
<td>float</td>
<td>正股距收回价, 的过滤下限（闭区间）, 仅牛熊证支持该字段过滤。该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>price_recovery_ratio_max</td>
<td>float</td>
<td>正股距收回价, 的过滤上限（闭区间）, 仅牛熊证支持该字段过滤。该字段为百分比字段，默认不展示%，如20实际对应20%。不传代表上限为+∞</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body"><p class="first">(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回（warrant_data_list,last_page, all_count）</p>
<p>warrant_data_list pd dataframe数据，数据列格式如下:</p>
<p>last_page 是否是最后一页</p>
<p class="last">all_count 列表总数量</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="13%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock</td>
<td>str</td>
<td>窝轮代码</td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>所属正股</td>
</tr>
<tr class="row-even"><td>type</td>
<td>str</td>
<td>窝轮类型 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>issuer</td>
<td>Issuer</td>
<td>发行人 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></td>
</tr>
<tr class="row-even"><td>maturity_time</td>
<td>str</td>
<td>到期日</td>
</tr>
<tr class="row-odd"><td>maturity_timestamp</td>
<td>float</td>
<td><span class="strike">到期日时间戳</span></td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>list_timestamp</td>
<td>float</td>
<td><span class="strike">上市时间戳</span></td>
</tr>
<tr class="row-even"><td>last_trade_time</td>
<td>str</td>
<td>最后交易日</td>
</tr>
<tr class="row-odd"><td>last_trade_timestamp</td>
<td>float</td>
<td><span class="strike">最后交易日时间戳</span></td>
</tr>
<tr class="row-even"><td>recovery_price</td>
<td>float</td>
<td>收回价，仅牛熊证支持该字段</td>
</tr>
<tr class="row-odd"><td>conversion_ratio</td>
<td>float</td>
<td>换股比率</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手数量</td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行使价</td>
</tr>
<tr class="row-even"><td>last_close_price</td>
<td>float</td>
<td>昨收价</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名称</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>当前价</td>
</tr>
<tr class="row-odd"><td>price_change_val</td>
<td>float</td>
<td>涨跌额</td>
</tr>
<tr class="row-even"><td>status</td>
<td>str</td>
<td>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></td>
</tr>
<tr class="row-odd"><td>bid_price</td>
<td>float</td>
<td>买入价</td>
</tr>
<tr class="row-even"><td>ask_price</td>
<td>float</td>
<td>卖出价</td>
</tr>
<tr class="row-odd"><td>bid_vol</td>
<td>int</td>
<td>买量</td>
</tr>
<tr class="row-even"><td>ask_vol</td>
<td>int</td>
<td>卖量</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>unsigned int</td>
<td>成交量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-odd"><td>score</td>
<td>float</td>
<td>综合评分</td>
</tr>
<tr class="row-even"><td>premium</td>
<td>float</td>
<td>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>break_even_point</td>
<td>float</td>
<td>打和点</td>
</tr>
<tr class="row-even"><td>leverage</td>
<td>float</td>
<td>杠杆比率（倍）</td>
</tr>
<tr class="row-odd"><td>ipop</td>
<td>float</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>price_recovery_ratio</td>
<td>float</td>
<td>正股距收回价，仅牛熊证支持该字段（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>conversion_price</td>
<td>float</td>
<td>换股价</td>
</tr>
<tr class="row-even"><td>street_rate</td>
<td>float</td>
<td>街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>street_vol</td>
<td>int</td>
<td>街货量</td>
</tr>
<tr class="row-even"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>issue_size</td>
<td>int</td>
<td>发行量</td>
</tr>
<tr class="row-even"><td>high_price</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low_price</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>implied_volatility</td>
<td>float</td>
<td>引伸波幅，仅认购认沽支持该字段</td>
</tr>
<tr class="row-odd"><td>delta</td>
<td>float</td>
<td>对冲值，仅认购认沽支持该字段</td>
</tr>
<tr class="row-even"><td>effective_leverage</td>
<td>float</td>
<td>有效杠杆</td>
</tr>
<tr class="row-odd"><td>upper_strike_price</td>
<td>float</td>
<td>上限价，仅界内证支持该字段</td>
</tr>
<tr class="row-even"><td>lower_strike_price</td>
<td>float</td>
<td>下限价，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>inline_price_status</td>
<td>str</td>
<td>界内界外 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">WarrantRequest</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">sort_field</span> <span class="o">=</span> <span class="n">SortField</span><span class="o">.</span><span class="n">TURNOVER</span>
<span class="n">req</span><span class="o">.</span><span class="n">type_list</span> <span class="o">=</span> <span class="n">WrtType</span><span class="o">.</span><span class="n">CALL</span>
<span class="n">req</span><span class="o">.</span><span class="n">cur_price_min</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">req</span><span class="o">.</span><span class="n">cur_price_max</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">ls</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_warrant</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>  <span class="c1"># 所有接口先判断是否正常，再取数据</span>
    <span class="n">warrant_data_list</span><span class="p">,</span> <span class="n">last_page</span><span class="p">,</span> <span class="n">all_count</span> <span class="o">=</span> <span class="n">ls</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">warrant_data_list</span><span class="p">),</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">warrant_data_list</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">warrant_data_list</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的窝轮代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">warrant_data_list</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error: &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">WarrantRequest</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">sort_field</span> <span class="o">=</span> <span class="n">SortField</span><span class="o">.</span><span class="n">TURNOVER</span>
<span class="n">req</span><span class="o">.</span><span class="n">issuer_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;UB&#39;</span><span class="p">,</span><span class="s1">&#39;CS&#39;</span><span class="p">,</span><span class="s1">&#39;BI&#39;</span><span class="p">]</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">ls</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_warrant</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="n">warrant_data_list</span><span class="p">,</span> <span class="n">last_page</span><span class="p">,</span> <span class="n">all_count</span> <span class="o">=</span> <span class="n">ls</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">warrant_data_list</span><span class="p">),</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">warrant_data_list</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error: &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>

<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 所有接口结尾加上这条close，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>2 2
   stock        name stock_owner  type issuer maturity_time   list_time last_trade_time  recovery_price  conversion_ratio  lot_size  strike_price  last_close_price  cur_price  price_change_val  change_rate  status  bid_price  ask_price   bid_vol  ask_vol    volume   turnover   score  premium  break_even_point  leverage    ipop  price_recovery_ratio  conversion_price  street_rate  street_vol  amplitude  issue_size  high_price  low_price  implied_volatility  delta  effective_leverage  list_timestamp  last_trade_timestamp  maturity_timestamp  upper_strike_price  lower_strike_price  inline_price_status
0  HK.19692  腾讯法巴零八购B.C    HK.00700  CALL     BP    2020-08-04  2020-01-15      2020-07-29             NaN             100.0     10000        430.50             0.234      0.201            -0.033   -14.102564  NORMAL      0.198      0.201   5000000  5000000   2360000   496360.0  77.402   18.019            450.60    18.995 -11.312                   NaN              20.1         0.33      264000      2.137    80000000       0.214      0.209              41.154  0.358               6.800    1.579018e+09          1.595952e+09        1.596470e+09                 NaN                 NaN                  NaN
1  HK.18854  腾讯瑞信零七购A.C    HK.00700  CALL     CS    2020-07-09  2020-01-08      2020-07-03             NaN             100.0     10000        401.28             0.212      0.200            -0.012    -5.660377  NORMAL      0.199      0.200  10000000   100000  12200000  2581320.0  72.970   10.340            421.28    19.090  -4.854                   NaN              20.0         4.98    12450000     17.453   250000000       0.220      0.183              34.305  0.429               8.189    1.578413e+09          1.593706e+09        1.594224e+09                 NaN                 NaN                  NaN
HK.19692
[&#39;HK.19692&#39;, &#39;HK.18854&#39;]

200 358
stock        name stock_owner    type issuer maturity_time   list_time last_trade_time  recovery_price  conversion_ratio  lot_size  strike_price  last_close_price  cur_price  price_change_val  change_rate      status  bid_price  ask_price   bid_vol   ask_vol  volume  turnover   score  premium  break_even_point  leverage     ipop  price_recovery_ratio  conversion_price  street_rate  street_vol  amplitude  issue_size  high_price  low_price  implied_volatility  delta  effective_leverage  list_timestamp  last_trade_timestamp  maturity_timestamp  upper_strike_price  lower_strike_price inline_price_status
0    HK.19792  平安瑞信零乙购A.C    HK.02318    CALL     CS    2020-12-31  2017-12-07      2020-12-24             NaN           100.000     50000        83.880             0.064      0.066             0.002     3.125000      NORMAL      0.066      0.068  12000000  12000000       0       0.0   0.075    4.420            90.480    13.128    3.302                   NaN          6.600000       11.230    22460000        0.0   200000000         0.0        0.0              22.509  0.614               8.060    1.512576e+09          1.608739e+09        1.609344e+09                 NaN                 NaN                 NaN
1    HK.19839  平安瑞银零乙购A.C    HK.02318    CALL     UB    2020-12-31  2017-12-11      2020-12-24             NaN           100.000     50000        83.880             0.066      0.067             0.001     1.515152      NORMAL      0.067      0.069  30000000  30000000       0       0.0  57.931    4.535            90.580    12.932    3.302                   NaN          6.700000        3.100    15500000        0.0   500000000         0.0        0.0              22.961  0.613               7.927    1.512922e+09          1.608739e+09        1.609344e+09                 NaN                 NaN                 NaN
......
198  HK.18645  铁塔瑞银零七购A.C    HK.00788    CALL     UB    2020-07-10  2020-01-07      2020-07-06             NaN             1.000      2000         1.870             0.010      0.010             0.000     0.000000  STOP_TRADE      0.000      0.000         0         0       0       0.0   0.059   27.027             1.880   148.000  -20.855                   NaN          0.010000        4.960     3472000        0.0    70000000         0.0        0.0               0.000  0.000               0.000    1.578326e+09          1.593965e+09        1.594310e+09                 NaN                 NaN                 NaN
199  HK.18705  小米瑞信零七购B.C    HK.01810    CALL     CS    2020-07-30  2020-01-07      2020-07-24             NaN             5.000      1000        11.580             0.990      0.990             0.000     0.000000      NORMAL      0.990      1.070    461000    100000       0       0.0  50.234   -0.661            16.530     3.361   43.696                   NaN          4.950000        5.030     5030000        0.0   100000000         0.0        0.0               0.000  0.000               0.000    1.578326e+09          1.595520e+09        1.596038e+09                 NaN                 NaN                 NaN
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-warrant-limit"><span class="std std-ref">获取窝轮限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-flow">
<h4>get_capital_flow<a class="headerlink" href="#get-capital-flow" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_capital_flow">
<code class="descname">get_capital_flow</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_flow" title="永久链接至目标">¶</a></dt>
<dd><p>获取个股资金流向</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="9%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>in_flow</td>
<td>float</td>
<td>净流入的资金额度</td>
</tr>
<tr class="row-odd"><td>capital_flow_item_time</td>
<td>string</td>
<td>开始时间字符串,以分钟为单位</td>
</tr>
<tr class="row-even"><td>last_valid_time</td>
<td>string</td>
<td>数据最后有效时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_flow</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;in_flow&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的净流入的资金额度</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;in_flow&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>     <span class="n">last_valid_time</span>       <span class="n">in_flow</span> <span class="n">capital_flow_item_time</span>
<span class="mi">0</span>    <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="o">-</span><span class="mf">3.162472e+07</span>    <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">09</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mo">00</span>
<span class="o">..</span>                   <span class="o">...</span>           <span class="o">...</span>                    <span class="o">...</span>
<span class="mi">330</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="o">-</span><span class="mf">1.433742e+09</span>    <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>

<span class="p">[</span><span class="mi">331</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">3</span> <span class="n">columns</span><span class="p">]</span>
<span class="o">-</span><span class="mf">31624720.0</span>
<span class="p">[</span><span class="o">-</span><span class="mf">31624720.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">64132100.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">70575660.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">65573840.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">43585860.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">80639800.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">80546540.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">107078020.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">117504440.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">111991620.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">118827340.0</span><span class="p">,</span>
<span class="o">..</span>                   <span class="o">...</span>           <span class="o">...</span>                    <span class="o">...</span>
<span class="o">-</span><span class="mf">1419125560.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1415245360.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1437747220.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1433741860.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1433741860.0</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-flow-limit"><span class="std std-ref">获取资金流向限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-distribution">
<h4>get_capital_distribution<a class="headerlink" href="#get-capital-distribution" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_capital_distribution">
<code class="descname">get_capital_distribution</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_distribution" title="永久链接至目标">¶</a></dt>
<dd><p>获取个股资金分布</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>capital_in_big</td>
<td>float</td>
<td>流入资金额度，大单</td>
</tr>
<tr class="row-odd"><td>capital_in_mid</td>
<td>float</td>
<td>流入资金额度，中单</td>
</tr>
<tr class="row-even"><td>capital_in_small</td>
<td>float</td>
<td>流入资金额度，小单</td>
</tr>
<tr class="row-odd"><td>capital_out_big</td>
<td>float</td>
<td>流出资金额度，大单</td>
</tr>
<tr class="row-even"><td>capital_out_mid</td>
<td>float</td>
<td>流出资金额度，中单</td>
</tr>
<tr class="row-odd"><td>capital_out_small</td>
<td>float</td>
<td>流出资金额度，小单</td>
</tr>
<tr class="row-even"><td>update_time</td>
<td>str</td>
<td>更新时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_distribution</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;capital_in_big&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的流入资金额度，大单</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;capital_in_big&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>      <span class="n">capital_in_big</span>  <span class="n">capital_in_mid</span>  <span class="n">capital_in_small</span>  <span class="n">capital_out_big</span>  <span class="n">capital_out_mid</span>  <span class="n">capital_out_small</span>          <span class="n">update_time</span>
<span class="mi">0</span>     <span class="mf">227797260.0</span>     <span class="mf">438703020.0</span>       <span class="mf">114061560.0</span>      <span class="mf">209093300.0</span>      <span class="mf">578002980.0</span>        <span class="mf">141638900.0</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">27</span> <span class="mi">09</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">36</span>
<span class="mf">227797260.0</span>
<span class="p">[</span><span class="mf">227797260.0</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-distribution-limit"><span class="std std-ref">获取资金分布限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-user-security">
<h4>get_user_security<a class="headerlink" href="#get-user-security" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_user_security">
<code class="descname">get_user_security</code><span class="sig-paren">(</span><em>self</em>, <em>group_name</em><span class="sig-paren">)</span><a class="headerlink" href="#get_user_security" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定分组的自选股列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>group_name</strong> &#8211; <p>需要查询的自选股分组名称。</p>
<p>系统分组的中英文对应名称如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">中文</th>
<th class="head">英文</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>全部</td>
<td>All</td>
</tr>
<tr class="row-odd"><td>沪深</td>
<td>CN</td>
</tr>
<tr class="row-even"><td>港股</td>
<td>HK</td>
</tr>
<tr class="row-odd"><td>美股</td>
<td>US</td>
</tr>
<tr class="row-even"><td>期权</td>
<td>Options</td>
</tr>
<tr class="row-odd"><td>港股期权</td>
<td>HK options</td>
</tr>
<tr class="row-even"><td>美股期权</td>
<td>US options</td>
</tr>
<tr class="row-odd"><td>特别关注</td>
<td>Starred</td>
</tr>
<tr class="row-even"><td>期货</td>
<td>Futures</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数，期货表示合约乘数</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>stock_child_type</td>
<td>str</td>
<td>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码，或期权标的股的代码</td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>strike_price</td>
<td>float</td>
<td>期权行权价</td>
</tr>
<tr class="row-odd"><td>suspension</td>
<td>bool</td>
<td>期权是否停牌(True表示停牌)</td>
</tr>
<tr class="row-even"><td>listing_date</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>delisting</td>
<td>bool</td>
<td>是否退市</td>
</tr>
<tr class="row-odd"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-even"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_user_security</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   code    name  lot_size stock_type stock_child_type stock_owner option_type strike_time strike_price suspension listing_date        stock_id  delisting  main_contract last_trade_time
0  HK.HSImain  恒指期货主连        50     FUTURE              N/A                                              N/A        N/A                     71000662      False           True
1  HK.00700    腾讯控股       100      STOCK              N/A                                              N/A        N/A   2004-06-16  54047868453564      False          False
HK.HSImain
[&#39;HK.HSImain&#39;, &#39;HK.00700&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-user-security-limit"><span class="std std-ref">获取指定分组的自选股列表</span></a></li>
</ul>
</div>
</div>
<div class="section" id="modify-user-security">
<h4>modify_user_security<a class="headerlink" href="#modify-user-security" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="modify_user_security">
<code class="descname">modify_user_security</code><span class="sig-paren">(</span><em>self</em>, <em>group_name</em>, <em>op</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#modify_user_security" title="永久链接至目标">¶</a></dt>
<dd><p>修改指定分组的自选股列表（不支持系统分组）</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>group_name</strong> &#8211; 需要修改的自选股分组名称.</li>
<li><strong>op</strong> &#8211; 操作枚举值.查看 <a class="reference external" href="Base_API.html#modifyusersecurityop">ModifyUserSecurityOp</a></li>
<li><strong>code_list</strong> &#8211; 股票列表，[&#8216;HK.00700&#8217;,&#8217;HK.00701&#8217;]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK &#8216;success&#8217;</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">modify_user_security</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">ModifyUserSecurityOp</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># 返回success</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">success</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#modify-user-security-limit"><span class="std std-ref">修改指定分组的自选股列表</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-stock-filter">
<h4>get_stock_filter<a class="headerlink" href="#get-stock-filter" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_stock_filter">
<code class="descname">get_stock_filter</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>filter_list</em>, <em>plate_code=None</em>, <em>begin=0</em>, <em>num=200</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_filter" title="永久链接至目标">¶</a></dt>
<dd><p>获取条件选股，港股 BMP 权限不支持条件选股功能。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>filter_list</strong> &#8211; <div class="line-block">
<div class="line">筛选条件的枚举值，筛选条件是SimpleFilter，AccumulateFilter，FinancialFilter类型数据的list对象field。</div>
</div>
<div class="line-block">
<div class="line">SimpleFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="8%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 简单属性，取值见 <a class="reference external" href="Base_API.html#stockfield-simplefilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否不需要筛选，True代表不筛选，False代表筛选。不传默认为不筛选</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a>，不传默认为不排序</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">AccumulateFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 累积字段，取值见 <a class="reference external" href="Base_API.html#stockfield-accumulatefilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否不需要筛选，True代表不筛选，False代表筛选。不传默认为不筛选</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a>，不传默认为不排序</td>
</tr>
<tr class="row-odd"><td>days</td>
<td>int</td>
<td>所筛选的数据的累计天数</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">FinancialFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 财务字段，取值见 <a class="reference external" href="Base_API.html#stockfield-financialfilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限（闭区间），不传代表下限为-∞</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限（闭区间），不传代表上限为+∞</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否不需要筛选，True代表不筛选，False代表筛选。不传默认为不筛选</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a>，不传默认为不排序</td>
</tr>
<tr class="row-odd"><td>quarter</td>
<td>str</td>
<td>财报累积时间，取值见 <a class="reference external" href="Base_API.html#financialquarter">FinancialQuarter</a></td>
</tr>
</tbody>
</table>
</li>
<li><strong>plate_code</strong> &#8211; 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码。支持的板块代码详情请查看下面的Note。</li>
<li><strong>begin</strong> &#8211; 数据起始点</li>
<li><strong>num</strong> &#8211; 请求数据个数，最大200</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last"><div class="line-block">
<div class="line">(ret, data)</div>
<div class="line"><strong>ret</strong> - ret != RET_OK 返回错误字符串, ret == RET_OK 返回（last_page, all_count, stock_list）。对于不支持的板块，返回的数据是(True, 0, [])。</div>
<div class="line"><strong>last_page</strong> - 是否是最后一页</div>
<div class="line"><strong>all_count</strong> - 列表总数量</div>
<div class="line"><strong>stock_list</strong> - 返回的是SimpleFilter类型数据的list对象ret_list，对象ret_list中stock_code和stock_name默认都会返回，同时filter_list中设置了筛选的字段也会返回。返回的数据列字段如下:</div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="7%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>stock_name</td>
<td>str</td>
<td>股票名字</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>最新价</td>
</tr>
<tr class="row-odd"><td>cur_price_to_highest_52weeks_ratio</td>
<td>float</td>
<td>(现价 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>cur_price_to_lowest_52weeks_ratio</td>
<td>float</td>
<td>(现价 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>high_price_to_highest_52weeks_ratio</td>
<td>float</td>
<td>(今日最高 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>low_price_to_lowest_52weeks_ratio</td>
<td>float</td>
<td>(今日最低 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>volume_ratio</td>
<td>float</td>
<td>量比</td>
</tr>
<tr class="row-even"><td>bid_ask_ratio</td>
<td>float</td>
<td>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>lot_price</td>
<td>float</td>
<td>每手价格</td>
</tr>
<tr class="row-even"><td>market_val</td>
<td>float</td>
<td>市值</td>
</tr>
<tr class="row-odd"><td>pe_annual</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-even"><td>pe_ttm</td>
<td>float</td>
<td>市盈率TTM</td>
</tr>
<tr class="row-odd"><td>pb_rate</td>
<td>float</td>
<td>市净率</td>
</tr>
<tr class="row-even"><td>change_rate_5min</td>
<td>float</td>
<td>五分钟价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>change_rate_begin_year</td>
<td>float</td>
<td>年初至今价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>ps_ttm</td>
<td>float</td>
<td>市销率(TTM) 例如填写 [100, 500] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>pcf_ttm</td>
<td>float</td>
<td>市现率(TTM) 例如填写 [100, 1000] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>total_share</td>
<td>float</td>
<td>总股数 例如填写 [1000000000,1000000000] 值区间 (单位：股)</td>
</tr>
<tr class="row-odd"><td>float_share</td>
<td>float</td>
<td>流通股数 例如填写 [1000000000,1000000000] 值区间 (单位：股)</td>
</tr>
<tr class="row-even"><td>float_market_val</td>
<td>float</td>
<td>流通市值 例如填写 [1000000000,1000000000] 值区间 (单位：元)</td>
</tr>
<tr class="row-odd"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>float</td>
<td>日均成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>日均成交额</td>
</tr>
<tr class="row-even"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>net_profit</td>
<td>float</td>
<td>净利润</td>
</tr>
<tr class="row-odd"><td>net_profix_growth</td>
<td>float</td>
<td>净利润增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>sum_of_business</td>
<td>float</td>
<td>营业收入</td>
</tr>
<tr class="row-odd"><td>sum_of_business_growth</td>
<td>float</td>
<td>营业同比增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>net_profit_rate</td>
<td>float</td>
<td>净利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>gross_profit_rate</td>
<td>float</td>
<td>毛利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>debt_asset_rate</td>
<td>float</td>
<td>资产负债率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>return_on_equity_rate</td>
<td>float</td>
<td>净资产收益率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>roic</td>
<td>float</td>
<td>盈利能力属性投入资本回报率 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>roa_ttm</td>
<td>float</td>
<td>资产回报率(TTM) 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%。仅适用于年报。）</td>
</tr>
<tr class="row-even"><td>ebit_ttm</td>
<td>float</td>
<td>息税前利润(TTM) 例如填写 [1000000000,1000000000] 值区间（单位：元。仅适用于年报。）</td>
</tr>
<tr class="row-odd"><td>ebitda</td>
<td>float</td>
<td>税息折旧及摊销前利润 例如填写 [1000000000,1000000000] 值区间（单位：元）</td>
</tr>
<tr class="row-even"><td>operating_margin_ttm</td>
<td>float</td>
<td>营业利润率(TTM) 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%。仅适用于年报。）</td>
</tr>
<tr class="row-odd"><td>ebit_margin</td>
<td>float</td>
<td>EBIT利润率 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>ebitda_margin</td>
<td>float</td>
<td>EBITDA利润率 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>financial_cost_rate</td>
<td>float</td>
<td>财务成本率 例如填写 [1.0,10.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>operating_profit_ttm</td>
<td>float</td>
<td>营业利润(TTM) 例如填写 [1000000000,1000000000] 值区间 （单位：元。仅适用于年报。）</td>
</tr>
<tr class="row-odd"><td>shareholder_net_profit_ttm</td>
<td>float</td>
<td>归属于母公司的净利润 例如填写 [1000000000,1000000000] 值区间 （单位：元。仅适用于年报。）</td>
</tr>
<tr class="row-even"><td>net_profit_cash_cover_ttm</td>
<td>float</td>
<td>盈利中的现金收入比例 例如填写 [1.0,60.0] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%。仅适用于年报。）</td>
</tr>
<tr class="row-odd"><td>current_ratio</td>
<td>float</td>
<td>偿债能力属性流动比率 例如填写 [100,250] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>quick_ratio</td>
<td>float</td>
<td>速动比率 例如填写 [100,250] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>current_asset_ratio</td>
<td>float</td>
<td>清债能力属性流动资产率 例如填写 [10,100] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>current_debt_ratio</td>
<td>float</td>
<td>流动负债率 例如填写 [10,100] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>equity_multiplier</td>
<td>float</td>
<td>权益乘数 例如填写 [100,180] 值区间</td>
</tr>
<tr class="row-even"><td>property_ratio</td>
<td>float</td>
<td>产权比率 例如填写 [50,100] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>cash_and_cash_equivalents</td>
<td>float</td>
<td>现金和现金等价 例如填写 [1000000000,1000000000] 值区间（单位：元）</td>
</tr>
<tr class="row-even"><td>total_asset_turnover</td>
<td>float</td>
<td>运营能力属性总资产周转率 例如填写 [50,100] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>fixed_asset_turnover</td>
<td>float</td>
<td>固定资产周转率 例如填写 [50,100] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>inventory_turnover</td>
<td>float</td>
<td>存货周转率 例如填写 [50,100] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>operating_cash_flow_ttm</td>
<td>float</td>
<td>经营活动现金流(TTM) 例如填写 [1000000000,1000000000] 值区间（单位：元。仅适用于年报。）</td>
</tr>
<tr class="row-even"><td>accounts_receivable</td>
<td>float</td>
<td>应收账款净额 例如填写 [1000000000,1000000000] 值区间 例如填写 [1000000000,1000000000] 值区间 （单位：元）</td>
</tr>
<tr class="row-odd"><td>ebit_growth_rate</td>
<td>float</td>
<td>成长能力属性EBIT同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>operating_profit_growth_rate</td>
<td>float</td>
<td>营业利润同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>total_assets_growth_rate</td>
<td>float</td>
<td>总资产同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>profit_to_shareholders_growth_rate</td>
<td>float</td>
<td>归母净利润同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>profit_before_tax_growth_rate</td>
<td>float</td>
<td>总利润同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>eps_growth_rate</td>
<td>float</td>
<td>EPS同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>roe_growth_rate</td>
<td>float</td>
<td>ROE同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>roic_growth_rate</td>
<td>float</td>
<td>ROIC同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>nocf_growth_rate</td>
<td>float</td>
<td>经营现金流同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>nocf_per_share_growth_rate</td>
<td>float</td>
<td>每股经营现金流同比增长率 例如填写 [1.0,10.0] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>operating_revenue_cash_cover</td>
<td>float</td>
<td>现金流属性经营现金收入比 例如填写 [10,100] 值区间（该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-even"><td>operating_profit_to_total_profit</td>
<td>float</td>
<td>营业利润占比 例如填写 [10,100] 值区间 （该字段为百分比字段，默认省略%，如20实际对应20%）</td>
</tr>
<tr class="row-odd"><td>basic_eps</td>
<td>float</td>
<td>市场表现属性基本每股收益 例如填写 [0.1,10] 值区间 (单位：元)</td>
</tr>
<tr class="row-even"><td>diluted_eps</td>
<td>float</td>
<td>稀释每股收益 例如填写 [0.1,10] 值区间 (单位：元)</td>
</tr>
<tr class="row-odd"><td>nocf_per_share</td>
<td>float</td>
<td>每股经营现金净流量 例如填写 [0.1,10] 值区间 (单位：元)</td>
</tr>
<tr class="row-even"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">simple_filter</span> <span class="o">=</span> <span class="n">SimpleFilter</span><span class="p">()</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_min</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_max</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">stock_field</span> <span class="o">=</span> <span class="n">StockField</span><span class="o">.</span><span class="n">CUR_PRICE</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">is_no_filter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">SortDir</span><span class="o">.</span><span class="n">ASCEND</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">ls</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_filter</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="p">[</span><span class="n">simple_filter</span><span class="p">])</span>  <span class="c1"># 对香港市场的股票做简单筛选</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="n">last_page</span><span class="p">,</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span> <span class="o">=</span> <span class="n">ls</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ret_list</span><span class="p">),</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ret_list</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">stock_code</span><span class="p">)</span>  <span class="c1"># 取其中的股票代码</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error: &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>2 2 [ stock_code:HK.00388  stock_name:香港交易所  cur_price:231.8 ,  stock_code:HK.00700  stock_name:腾讯控股  cur_price:381.8 ]
HK.00388
HK.00700
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<blockquote>
<div><ul class="simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-stock-filter-limit"><span class="std std-ref">获取条件选股</span></a></li>
</ul>
</div></blockquote>
<ul class="last">
<li><p class="first">条件选股支持的板块或指数代码如下:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">代码</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HK.Motherboard</td>
<td>港股主板</td>
</tr>
<tr class="row-odd"><td>HK.GEM</td>
<td>港股创业板</td>
</tr>
<tr class="row-even"><td>HK.BK1911</td>
<td>主板H股</td>
</tr>
<tr class="row-odd"><td>HK.BK1912</td>
<td>创业板H股</td>
</tr>
<tr class="row-even"><td>US.NYSE</td>
<td>纽交所</td>
</tr>
<tr class="row-odd"><td>US.AMEX</td>
<td>美交所</td>
</tr>
<tr class="row-even"><td>US.NASDAQ</td>
<td>纳斯达克</td>
</tr>
<tr class="row-odd"><td>SH.3000000</td>
<td>上海主板</td>
</tr>
<tr class="row-even"><td>SZ.3000001</td>
<td>深证主板</td>
</tr>
<tr class="row-odd"><td>SZ.3000004</td>
<td>深证创业板</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">利用获取子板块列表函数get_plate_list获取子板块代码，条件选股支持的板块分别为1.港股的行业板块和概念板块。2.美股的行业板块。3.沪深的行业板块，概念板块和地域板块。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-ipo-list">
<h4>get_ipo_list<a class="headerlink" href="#get-ipo-list" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_ipo_list">
<code class="descname">get_ipo_list</code><span class="sig-paren">(</span><em>self</em>, <em>market</em><span class="sig-paren">)</span><a class="headerlink" href="#get_ipo_list" title="永久链接至目标">¶</a></dt>
<dd><p>获取指定市场的ipo列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）。输入Market.HK_FUTURE效果同Market.HK，返回港股市场所有数据。参见 <a class="reference external" href="Base_API.html#market">Market</a></td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="5%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码，例如&#8217;HK.12345&#8217;</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>股票名称</td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市日期，美股是预计上市日期</td>
</tr>
<tr class="row-odd"><td>list_timestamp</td>
<td>float</td>
<td>上市日期时间戳，美股是预计上市日期时间戳</td>
</tr>
<tr class="row-even"><td>apply_code</td>
<td>str</td>
<td>申购代码，A股适用</td>
</tr>
<tr class="row-odd"><td>issue_size</td>
<td>int</td>
<td>发行总数，A股适用；发行量，美股适用</td>
</tr>
<tr class="row-even"><td>online_issue_size</td>
<td>int</td>
<td>网上发行量，A股适用</td>
</tr>
<tr class="row-odd"><td>apply_upper_limit</td>
<td>int</td>
<td>申购上限，A股适用</td>
</tr>
<tr class="row-even"><td>apply_limit_market_value</td>
<td>int</td>
<td>顶格申购需配市值，A股适用</td>
</tr>
<tr class="row-odd"><td>is_estimate_ipo_price</td>
<td>bool</td>
<td>是否预估发行价，A股适用</td>
</tr>
<tr class="row-even"><td>ipo_price</td>
<td>float</td>
<td>发行价 预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</td>
</tr>
<tr class="row-odd"><td>industry_pe_rate</td>
<td>float</td>
<td>行业市盈率，A股适用</td>
</tr>
<tr class="row-even"><td>is_estimate_winning_ratio</td>
<td>bool</td>
<td>是否预估中签率，A股适用</td>
</tr>
<tr class="row-odd"><td>winning_ratio</td>
<td>float</td>
<td>中签率 该字段为百分比字段，默认不展示%，如20实际对应20%。预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</td>
</tr>
<tr class="row-even"><td>issue_pe_rate</td>
<td>float</td>
<td>发行市盈率，A股适用</td>
</tr>
<tr class="row-odd"><td>apply_time</td>
<td>str</td>
<td>申购日期字符串，A股适用</td>
</tr>
<tr class="row-even"><td>apply_timestamp</td>
<td>float</td>
<td>申购日期时间戳，A股适用</td>
</tr>
<tr class="row-odd"><td>winning_time</td>
<td>str</td>
<td>公布中签日期字符串，A股适用</td>
</tr>
<tr class="row-even"><td>winning_timestamp</td>
<td>float</td>
<td>公布中签日期时间戳，A股适用</td>
</tr>
<tr class="row-odd"><td>is_has_won</td>
<td>bool</td>
<td>是否已经公布中签号，A股适用</td>
</tr>
<tr class="row-even"><td>winning_num_data</td>
<td>str</td>
<td>中签号，A股适用。格式为类似：末&#8221;五&#8221;位数:12345,12346n末&#8221;六&#8221;位数:123456</td>
</tr>
<tr class="row-odd"><td>ipo_price_min</td>
<td>float</td>
<td>最低发售价，港股适用；最低发行价，美股适用</td>
</tr>
<tr class="row-even"><td>ipo_price_max</td>
<td>float</td>
<td>最高发售价，港股适用；最高发行价，美股适用</td>
</tr>
<tr class="row-odd"><td>list_price</td>
<td>float</td>
<td>上市价，港股适用</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数</td>
</tr>
<tr class="row-odd"><td>entrance_price</td>
<td>float</td>
<td>入场费，港股适用</td>
</tr>
<tr class="row-even"><td>is_subscribe_status</td>
<td>bool</td>
<td>是否为认购状态，True-认购中，False-待上市</td>
</tr>
<tr class="row-odd"><td>apply_end_time</td>
<td>str</td>
<td>截止认购日期字符串，港股适用</td>
</tr>
<tr class="row-even"><td>apply_end_timestamp</td>
<td>float</td>
<td>截止认购日期时间戳 因需处理认购手续，富途认购截止时间会早于交易所公布的日期，港股适用</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_ipo_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">code</span>      <span class="n">name</span>   <span class="n">list_time</span>  <span class="n">list_timestamp</span> <span class="n">apply_code</span> <span class="n">issue_size</span> <span class="n">online_issue_size</span> <span class="n">apply_upper_limit</span> <span class="n">apply_limit_market_value</span> <span class="n">is_estimate_ipo_price</span> <span class="n">ipo_price</span> <span class="n">industry_pe_rate</span> <span class="n">is_estimate_winning_ratio</span> <span class="n">winning_ratio</span> <span class="n">issue_pe_rate</span> <span class="n">apply_time</span> <span class="n">apply_timestamp</span> <span class="n">winning_time</span> <span class="n">winning_timestamp</span> <span class="n">is_has_won</span> <span class="n">winning_num_data</span>  <span class="n">ipo_price_min</span>  <span class="n">ipo_price_max</span>  <span class="n">list_price</span>  <span class="n">lot_size</span>  <span class="n">entrance_price</span>  <span class="n">is_subscribe_status</span> <span class="n">apply_end_time</span>  <span class="n">apply_end_timestamp</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">01</span><span class="mi">957</span>  <span class="n">MBV</span> <span class="n">INTL</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span>    <span class="mf">1.585498e+09</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>                      <span class="n">N</span><span class="o">/</span><span class="n">A</span>                   <span class="n">N</span><span class="o">/</span><span class="n">A</span>       <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>                       <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="mf">0.8</span>           <span class="mf">0.88</span>         <span class="mf">0.0</span>      <span class="mi">2500</span>         <span class="mf">2222.17</span>                <span class="bp">False</span>     <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">19</span>         <span class="mf">1.584580e+09</span>
<span class="n">HK</span><span class="o">.</span><span class="mo">01</span><span class="mi">957</span>
<span class="p">[</span><span class="s1">&#39;HK.01957&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-ipo-list-limit"><span class="std std-ref">获取IPO列表的限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-future-info">
<h4>get_future_info<a class="headerlink" href="#get-future-info" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_future_info">
<code class="descname">get_future_info</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_future_info" title="永久链接至目标">¶</a></dt>
<dd><p>获取期货合约资料</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code_list</strong> &#8211; 期货</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="12%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>string</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>string</td>
<td>股票名称</td>
</tr>
<tr class="row-even"><td>owner</td>
<td>string</td>
<td>标的</td>
</tr>
<tr class="row-odd"><td>exchange</td>
<td>string</td>
<td>交易所</td>
</tr>
<tr class="row-even"><td>type</td>
<td>string</td>
<td>合约类型</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>float</td>
<td>合约规模</td>
</tr>
<tr class="row-even"><td>size_unit</td>
<td>string</td>
<td>合约规模单位</td>
</tr>
<tr class="row-odd"><td>price_currency</td>
<td>string</td>
<td>报价货币</td>
</tr>
<tr class="row-even"><td>price_unit</td>
<td>string</td>
<td>报价单位</td>
</tr>
<tr class="row-odd"><td>min_change</td>
<td>float</td>
<td>最小变动</td>
</tr>
<tr class="row-even"><td>min_change_unit</td>
<td>string</td>
<td>最小变动的单位</td>
</tr>
<tr class="row-odd"><td>trade_time</td>
<td>string</td>
<td>交易时间</td>
</tr>
<tr class="row-even"><td>time_zone</td>
<td>string</td>
<td>时区</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
<tr class="row-even"><td>exchange_format_url</td>
<td>string</td>
<td>交易所规格url</td>
</tr>
</tbody>
</table>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_future_info</span><span class="p">([</span><span class="s2">&quot;HK.MPImain&quot;</span><span class="p">,</span> <span class="s2">&quot;HK.HAImain&quot;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   code      name       owner exchange  type     size size_unit price_currency price_unit  min_change min_change_unit                        trade_time time_zone last_trade_time                                exchange_format_url
0  HK.MPImain    內房期货主连  恒生中国内地地产指数      港交所  股指期货     50.0    指数点×港元             港元        指数点        0.50             指数点  (09:15 - 12:00), (13:00 - 16:30)       CCT                  https://sc.hkex.com.hk/TuniS/www.hkex.com.hk/P...
1  HK.HAImain  海通证券期货主连    HK.06837      港交所  股票期货  10000.0         股             港元      每股/港元        0.01              港元  (09:30 - 12:00), (13:00 - 16:00)       CCT                  https://sc.hkex.com.hk/TuniS/www.hkex.com.hk/P...
HK.MPImain
[&#39;HK.MPImain&#39;, &#39;HK.HAImain&#39;]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-future-info-limit"><span class="std std-ref">获取期货合约资料限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="request-trading-days">
<h4>request_trading_days<a class="headerlink" href="#request-trading-days" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="request_trading_days">
<code class="descname">request_trading_days</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>start=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#request_trading_days" title="永久链接至目标">¶</a></dt>
<dd><p>在线请求交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型，<a class="reference external" href="Base_API.html#tradedatemarket">TradeDateMarket</a></li>
<li><strong>start</strong> &#8211; 起始日期。例如&#8216;2018-01-01&#8217;。</li>
<li><strong>end</strong> &#8211; <p>结束日期。例如&#8216;2018-01-01&#8217;。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last"><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>str</td>
<td>时间</td>
</tr>
<tr class="row-odd"><td>trade_date_type</td>
<td>str</td>
<td>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_trading_days</span><span class="p">(</span><span class="n">TradeDateMarket</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2020-04-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2020-04-10&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-01&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-02&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-03&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-06&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-07&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-08&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-09&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-trading-day-limit"><span class="std std-ref">在线获取交易日</span></a></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="set-price-reminder">
<h4>set_price_reminder<a class="headerlink" href="#set-price-reminder" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="set_price_reminder">
<code class="descname">set_price_reminder</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>op</em>, <em>key=None</em>, <em>reminder_type=None</em>, <em>reminder_freq=None</em>, <em>value=None</em>, <em>note=None</em><span class="sig-paren">)</span><a class="headerlink" href="#set_price_reminder" title="永久链接至目标">¶</a></dt>
<dd><p>新增、删除、修改、启用、禁用 某只股票的到价提醒，每只股票每种类型最多可设置10个提醒</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票</li>
<li><strong>op</strong> &#8211; <a class="reference external" href="Base_API.html#setpricereminderop">SetPriceReminderOp</a>，操作类型</li>
<li><strong>key</strong> &#8211; int64，标识，新增的情况不需要填</li>
<li><strong>reminder_type</strong> &#8211; <a class="reference external" href="Base_API.html#priceremindertype">PriceReminderType</a>，到价提醒的类型，删除、启用、禁用的情况下会忽略该入参</li>
<li><strong>reminder_freq</strong> &#8211; <a class="reference external" href="Base_API.html#pricereminderfreq">PriceReminderFreq</a>，到价提醒的频率，删除、启用、禁用的情况下会忽略该入参</li>
<li><strong>value</strong> &#8211; float，提醒值，删除、启用、禁用的情况下会忽略该入参</li>
<li><strong>note</strong> &#8211; str，用户设置的备注，最多10个字符，删除、启用、禁用的情况下会忽略该入参</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first last"><p>(ret, data)
ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为key</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">class</span> <span class="nc">PriceReminderTest</span><span class="p">(</span><span class="n">PriceReminderHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PriceReminderTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;PriceReminderTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">content</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">content</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;PriceReminderTest &quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span> <span class="c1"># PriceReminderTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">content</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">PriceReminderTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">([</span><span class="s1">&#39;HK.HSImain&#39;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="n">bid_price</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;bid_price&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># 获取实时买一价</span>
    <span class="n">ask_price</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ask_price&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># 获取实时卖一价</span>
    <span class="c1"># 设置当卖一价低于（ask_price-1）时提醒</span>
    <span class="n">ret_ask</span><span class="p">,</span> <span class="n">ask_data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_price_reminder</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;HK.HSImain&#39;</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">SetPriceReminderOp</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reminder_type</span><span class="o">=</span><span class="n">PriceReminderType</span><span class="o">.</span><span class="n">ASK_PRICE_DOWN</span><span class="p">,</span> <span class="n">reminder_freq</span><span class="o">=</span><span class="n">PriceReminderFreq</span><span class="o">.</span><span class="n">ALWAYS</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">(</span><span class="n">ask_price</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">note</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ret_ask</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;卖一价低于（ask_price-1）时提醒设置成功：&#39;</span><span class="p">,</span> <span class="n">ask_data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">ask_data</span><span class="p">)</span>
    <span class="c1"># 设置当买一价高于（bid_price+1）时提醒</span>
    <span class="n">ret_bid</span><span class="p">,</span> <span class="n">bid_data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_price_reminder</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;HK.HSImain&#39;</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">SetPriceReminderOp</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reminder_type</span><span class="o">=</span><span class="n">PriceReminderType</span><span class="o">.</span><span class="n">BID_PRICE_UP</span><span class="p">,</span> <span class="n">reminder_freq</span><span class="o">=</span><span class="n">PriceReminderFreq</span><span class="o">.</span><span class="n">ALWAYS</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">(</span><span class="n">bid_price</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">note</span><span class="o">=</span><span class="s1">&#39;456&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ret_bid</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;买一价高于（bid_price+1）时提醒设置成功：&#39;</span><span class="p">,</span> <span class="n">bid_data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">bid_data</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>卖一价低于（ask_price-1）时提醒设置成功： 158815356110052101
买一价高于（bid_price+1）时提醒设置成功： 158815356129980801
PriceReminderTest  {&#39;code&#39;: &#39;HK.HSImain&#39;, &#39;price&#39;: 24532.0, &#39;change_rate&#39;: 0.122, &#39;market_status&#39;: &#39;OPEN&#39;, &#39;content&#39;: &#39;买一价高于24533.000&#39;, &#39;note&#39;: &#39;456&#39;, &#39;key&#39;: 158815356129980801, &#39;reminder_type&#39;: &#39;BID_PRICE_UP&#39;, &#39;set_value&#39;: 24533.0, &#39;cur_value&#39;: 24533.0}
PriceReminderTest  {&#39;code&#39;: &#39;HK.HSImain&#39;, &#39;price&#39;: 24532.0, &#39;change_rate&#39;: 0.122, &#39;market_status&#39;: &#39;OPEN&#39;, &#39;content&#39;: &#39;卖一价低于24533.000&#39;, &#39;note&#39;: &#39;123&#39;, &#39;key&#39;: 158815356110052101, &#39;reminder_type&#39;: &#39;ASK_PRICE_DOWN&#39;, &#39;set_value&#39;: 24533.0, &#39;cur_value&#39;: 24533.0}
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last">
<li><p class="first">接口限制请参见 <a class="reference internal" href="../protocol/intro.html#set-price-reminder-limit"><span class="std std-ref">设置到价提醒</span></a></p>
</li>
<li><p class="first">API 中成交量设置统一以股为单位。但是牛牛客户端中，A 股是以为手为单位展示</p>
</li>
<li><p class="first">到价提醒类型，存在最小精度，如下：</p>
<blockquote>
<div><p>TURNOVER_UP：成交额最小精度为 10 元（人民币元，港元，美元）。传入的数值会自动向下取整到最小精度的整数倍。如果设置【00700成交额102元提醒】，设置后会得到【00700成交额100元提醒】；如果设置【00700 成交额 8 元提醒】，设置后会得到【00700 成交额 0 元提醒】。</p>
<p>VOLUME_UP：A 股成交量最小精度为 1000 股，其他市场股票成交量最小精度为 10 股。传入的数值会自动向下取整到最小精度的整数倍。</p>
<p>BID_VOL_UP、ASK_VOL_UP：A 股的买一卖一量最小精度为 100 股。传入的数值会自动向下取整到最小精度的整数倍。</p>
<p>其余到价提醒类型精度支持到小数点后 3 位</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="get-price-reminder">
<h4>get_price_reminder<a class="headerlink" href="#get-price-reminder" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_price_reminder">
<code class="descname">get_price_reminder</code><span class="sig-paren">(</span><em>self</em>, <em>code = None</em>, <em>market = None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_price_reminder" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div>获取对某只股票(某个市场)设置的到价提醒列表</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 获取该股票的到价提醒，code和market二选一，都存在的情况下code优先。</li>
<li><strong>market</strong> &#8211; 获取该市场的到价提醒，注意输入沪深都会认为是A股市场。输入Market.HK_FUTURE效果同Market.HK，返回港股市场所有数据。参见 <a class="reference external" href="Base_API.html#market">Market</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body"><p class="first"><p>(ret, data)
ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="22%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>key</td>
<td>int64</td>
<td>标识，用于修改到价提醒</td>
</tr>
<tr class="row-even"><td>reminder_type</td>
<td>str</td>
<td>到价提醒的类型，参见 <a class="reference external" href="Base_API.html#priceremindertype">PriceReminderType</a></td>
</tr>
<tr class="row-odd"><td>reminder_freq</td>
<td>str</td>
<td>到价提醒的频率，参见 <a class="reference external" href="Base_API.html#pricereminderfreq">PriceReminderFreq</a></td>
</tr>
<tr class="row-even"><td>value</td>
<td>float</td>
<td>提醒值</td>
</tr>
<tr class="row-odd"><td>enable</td>
<td>bool</td>
<td>是否启用</td>
</tr>
<tr class="row-even"><td>note</td>
<td>string</td>
<td>备注，最多10个字符</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_price_reminder</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;******************************************&#39;</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_price_reminder</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">market</span><span class="o">=</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>    <span class="c1"># 取第一条的股票代码</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>   <span class="c1"># 转为list</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    <span class="n">code</span>                <span class="n">key</span>       <span class="n">reminder_type</span>  <span class="n">reminder_freq</span>  <span class="n">value</span>  <span class="n">enable</span>      <span class="n">note</span>
<span class="mi">0</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">158441340870842901</span>      <span class="n">PRICE_UP</span>        <span class="n">ALWAYS</span>    <span class="mf">382.4</span>   <span class="bp">False</span>   <span class="mi">10</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">04</span>
<span class="mi">1</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">158573111208632201</span>    <span class="n">PRICE_DOWN</span>        <span class="n">ALWAYS</span>    <span class="mf">370.0</span>    <span class="bp">True</span>

<span class="p">[</span><span class="mi">6</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">7</span> <span class="n">columns</span><span class="p">]</span>
<span class="p">[</span><span class="mi">158441340870842901</span><span class="p">,</span> <span class="mi">158573111208632201</span><span class="p">]</span>
<span class="o">******************************************</span>
    <span class="n">code</span>              <span class="n">key</span>          <span class="n">reminder_type</span>  <span class="n">reminder_freq</span>   <span class="n">value</span>  <span class="n">enable</span>      <span class="n">note</span>
<span class="mi">0</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>   <span class="mi">158441340870842901</span>      <span class="n">PRICE_UP</span>        <span class="n">ALWAYS</span>    <span class="mf">382.4</span>   <span class="bp">False</span>    <span class="mi">10</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mo">04</span>
<span class="mi">1</span>   <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>   <span class="mi">158573111208632201</span>    <span class="n">PRICE_DOWN</span>        <span class="n">ALWAYS</span>    <span class="mf">370.0</span>    <span class="bp">True</span>
<span class="mi">2</span>   <span class="n">HK</span><span class="o">.</span><span class="n">HSImain</span>  <span class="mi">158573100205367801</span>    <span class="n">PRICE_DOWN</span>        <span class="n">ALWAYS</span>  <span class="mf">22900.0</span>    <span class="bp">True</span>

<span class="p">[</span><span class="mi">12</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">7</span> <span class="n">columns</span><span class="p">]</span>
<span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>
<span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.HSImain&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-price-reminder-limit"><span class="std std-ref">获取到价提醒列表</span></a></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="get-user-security-group">
<h4>get_user_security_group<a class="headerlink" href="#get-user-security-group" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="get_user_security_group">
<code class="descname">get_user_security_group</code><span class="sig-paren">(</span><em>self</em>, <em>group_type = UserSecurityGroupType.ALL</em><span class="sig-paren">)</span><a class="headerlink" href="#get_user_security_group" title="永久链接至目标">¶</a></dt>
<dd><blockquote>
<div>获取自选股分组列表</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>group_type</strong> &#8211; <a class="reference external" href="Base_API.html#usersecuritygrouptype">UserSecurityGroupType</a>，分组类型</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">(ret, data) ret != RET_OK 返回错误字符串<blockquote>
<div>ret == RET_OK data为DataFrame类型，字段如下:</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="24%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>group_name</td>
<td>str</td>
<td>分组名</td>
</tr>
<tr class="row-odd"><td>group_type</td>
<td>str</td>
<td>UserSecurityGroupType，分组类型</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_user_security_group</span><span class="p">(</span><span class="n">group_type</span> <span class="o">=</span> <span class="n">UserSecurityGroupType</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error:&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># 结束后记得关闭当条连接，防止连接条数用尽</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>           group_name group_type
0          期权     SYSTEM
..         ...        ...
12          C     CUSTOM

[13 rows x 2 columns]
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-user-security-group-limit"><span class="std std-ref">获取自选股分组列表</span></a></li>
</ul>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="sysnotifyhandlerbase-opend">
<h3>SysNotifyHandlerBase - OpenD通知回调<a class="headerlink" href="#sysnotifyhandlerbase-opend" title="永久链接至标题">¶</a></h3>
<p>通知OpenD一些重要消息，类似连接断开等。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">SysNotifyTest</span><span class="p">(</span><span class="n">SysNotifyHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SysNotifyTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="n">notify_type</span><span class="p">,</span> <span class="n">sub_type</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;SysNotifyTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">SysNotifyTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置回调</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="on-recv-rsp">
<h4>on_recv_rsp<a class="headerlink" href="#on-recv-rsp" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt id="on_recv_rsp">
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span><a class="headerlink" href="#on_recv_rsp" title="永久链接至目标">¶</a></dt>
<dd><p>在收到OpenD通知推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">ret_code, notify_type, sub_type, msg</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="14%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>notify_type</td>
<td>str</td>
<td>通知类型，见 <a class="reference external" href="Base_API.html#sysnotifytype">SysNotifyType</a></td>
</tr>
<tr class="row-odd"><td>sub_type</td>
<td>str</td>
<td>消息类型，不同的notify_type，取值也不同，见下表</td>
</tr>
<tr class="row-even"><td>msg</td>
<td>str, dict</td>
<td>消息描述，不同的notify_type，取值也不同，见下表</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="26%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">notify_type</th>
<th class="head">sub_type</th>
<th class="head">msg</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SysNotifyType.NONE</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.GTW_EVENT</td>
<td>str, 取值见 <a class="reference external" href="Base_API.html#gtweventtype">GtwEventType</a></td>
<td>str，通知描述信息</td>
</tr>
<tr class="row-even"><td>SysNotifyType.PROGRAM_STATUS</td>
<td>str, 取值见 <a class="reference external" href="Base_API.html#programstatustype">ProgramStatusType</a></td>
<td>str，通知描述信息</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.CONN_STATUS</td>
<td>None</td>
<td><div class="first last line-block">
<div class="line">{&#8216;qot_logined&#8217;: bool, 是否已登录行情连接</div>
<div class="line">&#8216;trd_logined&#8217;: bool} 是否已登录交易连接</div>
</div>
</td>
</tr>
<tr class="row-even"><td>SysNotifyType.QOT_RIGHT</td>
<td>None</td>
<td><div class="first last line-block">
<div class="line">{&#8216;hk_qot_right&#8217;: str, 港股行情权限</div>
<div class="line">&#8216;cn_qot_right&#8217;: str, A股行情权限</div>
<div class="line">&#8216;us_qot_right&#8217;: str, 美股行情权限</div>
<div class="line">&#8216;hk_option_qot_right&#8217;: str, 港股期权行情权限</div>
<div class="line">&#8216;has_us_option_qot_right&#8217;: bool, 是否有美股期权行情权限</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.API_LEVEL</td>
<td>None</td>
<td>str, API用户等级</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="stockquotehandlerbase">
<h3>StockQuoteHandlerBase - 实时报价回调<a class="headerlink" href="#stockquotehandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的订阅股票的报价。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">StockQuoteTest</span><span class="p">(</span><span class="n">StockQuoteHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">StockQuoteTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># StockQuoteTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">StockQuoteTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时报价回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">])</span>  <span class="c1"># 订阅实时报价类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1">#  设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">StockQuoteTest</span>         <span class="n">code</span>   <span class="n">data_date</span> <span class="n">data_time</span>  <span class="n">last_price</span>  <span class="n">open_price</span>  <span class="n">high_price</span>  <span class="n">low_price</span>  <span class="n">prev_close_price</span>    <span class="n">volume</span>      <span class="n">turnover</span>  <span class="n">turnover_rate</span>  <span class="n">amplitude</span>  <span class="n">suspension</span> <span class="n">listing_date</span>  <span class="n">price_spread</span> <span class="n">dark_status</span> <span class="n">sec_status</span> <span class="n">strike_price</span> <span class="n">contract_size</span> <span class="n">open_interest</span> <span class="n">implied_volatility</span> <span class="n">premium</span> <span class="n">delta</span> <span class="n">gamma</span> <span class="n">vega</span> <span class="n">theta</span>  <span class="n">rho</span> <span class="n">net_open_interest</span> <span class="n">expiry_date_distance</span> <span class="n">contract_nominal_value</span> <span class="n">owner_lot_multiplier</span> <span class="n">option_area_type</span> <span class="n">contract_multiplier</span> <span class="n">last_settle_price</span> <span class="n">position</span> <span class="n">position_change</span> <span class="n">pre_price</span> <span class="n">pre_high_price</span> <span class="n">pre_low_price</span> <span class="n">pre_volume</span> <span class="n">pre_turnover</span> <span class="n">pre_change_val</span> <span class="n">pre_change_rate</span> <span class="n">pre_amplitude</span> <span class="n">after_price</span> <span class="n">after_high_price</span> <span class="n">after_low_price</span> <span class="n">after_volume</span> <span class="n">after_turnover</span> <span class="n">after_change_val</span> <span class="n">after_change_rate</span> <span class="n">after_amplitude</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">27</span>  <span class="mi">14</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">35</span>       <span class="mf">384.0</span>       <span class="mf">390.0</span>       <span class="mf">390.0</span>      <span class="mf">381.8</span>             <span class="mf">381.8</span>  <span class="mi">21573862</span>  <span class="mf">8.298364e+09</span>          <span class="mf">0.226</span>      <span class="mf">2.148</span>       <span class="bp">False</span>   <span class="mi">2004</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">16</span>           <span class="mf">0.2</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="n">NORMAL</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>                <span class="n">N</span><span class="o">/</span><span class="n">A</span>     <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>   <span class="n">N</span><span class="o">/</span><span class="n">A</span>  <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>                  <span class="n">N</span><span class="o">/</span><span class="n">A</span>                    <span class="n">N</span><span class="o">/</span><span class="n">A</span>                  <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>                 <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>      <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>       <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>        <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>           <span class="n">N</span><span class="o">/</span><span class="n">A</span>         <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>          <span class="n">N</span><span class="o">/</span><span class="n">A</span>            <span class="n">N</span><span class="o">/</span><span class="n">A</span>              <span class="n">N</span><span class="o">/</span><span class="n">A</span>               <span class="n">N</span><span class="o">/</span><span class="n">A</span>             <span class="n">N</span><span class="o">/</span><span class="n">A</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id7">
<h4>on_recv_rsp<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时报价推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">参见 <a class="reference internal" href="#get_stock_quote">get_stock_quote</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="orderbookhandlerbase">
<h3>OrderBookHandlerBase - 实时摆盘回调<a class="headerlink" href="#orderbookhandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的实时摆盘。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">class</span> <span class="nc">OrderBookTest</span><span class="p">(</span><span class="n">OrderBookHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">OrderBookTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># OrderBookTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">OrderBookTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时摆盘回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>  <span class="c1"># 订阅买卖摆盘类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1">#  设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">OrderBookTest</span>  <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_bid&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-29 15:55:53.299&#39;</span><span class="p">,</span> <span class="s1">&#39;svr_recv_time_ask&#39;</span><span class="p">:</span> <span class="s1">&#39;2020-04-29 15:55:53.299&#39;</span><span class="p">,</span> <span class="s1">&#39;Bid&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">414.2</span><span class="p">,</span> <span class="mi">60600</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">414.0</span><span class="p">,</span> <span class="mi">96000</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">413.8</span><span class="p">,</span> <span class="mi">23400</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">413.6</span><span class="p">,</span> <span class="mi">31800</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">413.4</span><span class="p">,</span> <span class="mi">33900</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">413.2</span><span class="p">,</span> <span class="mi">47800</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">413.0</span><span class="p">,</span> <span class="mi">42500</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">412.8</span><span class="p">,</span> <span class="mi">17000</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">412.6</span><span class="p">,</span> <span class="mi">10600</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">412.4</span><span class="p">,</span> <span class="mi">5200</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="p">{})],</span> <span class="s1">&#39;Ask&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">414.4</span><span class="p">,</span> <span class="mi">74200</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">414.6</span><span class="p">,</span> <span class="mi">25700</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">414.8</span><span class="p">,</span> <span class="mi">18800</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.0</span><span class="p">,</span> <span class="mi">35700</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.2</span><span class="p">,</span> <span class="mi">17500</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.4</span><span class="p">,</span> <span class="mi">33500</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.6</span><span class="p">,</span> <span class="mi">62000</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">415.8</span><span class="p">,</span> <span class="mi">36700</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.0</span><span class="p">,</span> <span class="mi">42000</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="p">{}),</span> <span class="p">(</span><span class="mf">416.2</span><span class="p">,</span> <span class="mi">3800</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="p">{})]}</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id8">
<h4>on_recv_rsp<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实摆盘数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">参见 <a class="reference internal" href="#get_order_book">get_order_book</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="curklinehandlerbase-k">
<h3>CurKlineHandlerBase - 实时k线推送回调<a class="headerlink" href="#curklinehandlerbase-k" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的k线数据。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">class</span> <span class="nc">CurKlineTest</span><span class="p">(</span><span class="n">CurKlineHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CurKlineTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># CurKlineTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">CurKlineTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时摆盘回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_1M</span><span class="p">])</span>   <span class="c1"># 订阅k线数据类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">CurKlineTest</span>         <span class="n">code</span>             <span class="n">time_key</span>   <span class="nb">open</span>  <span class="n">close</span>   <span class="n">high</span>    <span class="n">low</span>  <span class="n">volume</span>    <span class="n">turnover</span> <span class="n">k_type</span>  <span class="n">last_close</span>
               <span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mo">00</span>  <span class="mf">375.2</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>  <span class="mf">375.2</span>   <span class="mi">39000</span>  <span class="mf">14639140.0</span>   <span class="n">K_1M</span>         <span class="mf">0.0</span>
<span class="n">CurKlineTest</span>         <span class="n">code</span>             <span class="n">time_key</span>   <span class="nb">open</span>  <span class="n">close</span>   <span class="n">high</span>    <span class="n">low</span>  <span class="n">volume</span>  <span class="n">turnover</span> <span class="n">k_type</span>  <span class="n">last_close</span>
               <span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mo">00</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>    <span class="mi">1000</span>  <span class="mf">375400.0</span>   <span class="n">K_1M</span>       <span class="mf">375.4</span>
<span class="n">CurKlineTest</span>         <span class="n">code</span>             <span class="n">time_key</span>   <span class="nb">open</span>  <span class="n">close</span>   <span class="n">high</span>    <span class="n">low</span>  <span class="n">volume</span>  <span class="n">turnover</span> <span class="n">k_type</span>  <span class="n">last_close</span>
               <span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mo">00</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>  <span class="mf">375.4</span>    <span class="mi">1100</span>  <span class="mf">412940.0</span>   <span class="n">K_1M</span>       <span class="mf">375.4</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id9">
<h4>on_recv_rsp<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时k线数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">参见 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 的返回值，推送回调比 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 少了市盈率和换手率字段</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="tickerhandlerbase">
<h3>TickerHandlerBase - 实时逐笔推送回调<a class="headerlink" href="#tickerhandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的逐笔数据。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">TickerTest</span><span class="p">(</span><span class="n">TickerHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TickerTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># TickerTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">TickerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时逐笔推送回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">])</span> <span class="c1"># 订阅逐笔类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">TickerTest</span>         <span class="n">code</span>                 <span class="n">time</span>  <span class="n">price</span>  <span class="n">volume</span>  <span class="n">turnover</span> <span class="n">ticker_direction</span>             <span class="n">sequence</span>        <span class="nb">type</span> <span class="n">push_data_type</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">27</span> <span class="mi">15</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">17</span>  <span class="mf">382.4</span>     <span class="mi">100</span>   <span class="mf">38240.0</span>             <span class="n">SELL</span>  <span class="mi">6808782951082376714</span>  <span class="n">AUTO_MATCH</span>          <span class="n">CACHE</span>
   <span class="n">TickerTest</span>          <span class="n">code</span>                 <span class="n">time</span>   <span class="n">price</span>  <span class="n">volume</span>  <span class="n">turnover</span> <span class="n">ticker_direction</span>             <span class="n">sequence</span>     <span class="nb">type</span> <span class="n">push_data_type</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">27</span> <span class="mi">15</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">19</span>  <span class="mf">382.6</span>     <span class="mi">900</span>   <span class="mf">344340.0</span>             <span class="n">BUY</span>  <span class="mi">6808782951082378963</span>  <span class="n">AUTO_MATCH</span>       <span class="n">REALTIME</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<ul class="last simple">
<li>行情连接断开重连后，OpenD拉取断开期间的逐笔数据（最多50根）并推送，可通过push_data_type字段区分</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id10">
<h4>on_recv_rsp<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">参见 <a class="reference internal" href="#get_rt_ticker">get_rt_ticker</a> 的返回值，回调比get_rt_ticker多返回一个字段：push_data_type，该字段指明数据来源，参见 <a class="reference external" href="Base_API.html#pushdatatype">PushDataType</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="rtdatahandlerbase">
<h3>RTDataHandlerBase - 实时分时推送回调<a class="headerlink" href="#rtdatahandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的分时数据。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">RTDataTest</span><span class="p">(</span><span class="n">RTDataHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">RTDataTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># RTDataTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">RTDataTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时分时推送回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">])</span> <span class="c1"># 订阅分时类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>   <span class="n">RTDataTest</span>         <span class="n">code</span>                 <span class="n">time</span>  <span class="n">is_blank</span>  <span class="n">opened_mins</span>  <span class="n">cur_price</span>  <span class="n">last_close</span>   <span class="n">avg_price</span>     <span class="n">turnover</span>   <span class="n">volume</span>
<span class="mi">0</span>  <span class="n">HK</span><span class="o">.</span><span class="mo">00700</span>  <span class="mi">2020</span><span class="o">-</span><span class="mo">03</span><span class="o">-</span><span class="mi">30</span> <span class="mi">16</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span>     <span class="bp">False</span>          <span class="mi">960</span>      <span class="mf">376.6</span>       <span class="mf">382.4</span>  <span class="mf">374.818939</span>  <span class="mf">855764640.0</span>  <span class="mi">2272500</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id11">
<h4>on_recv_rsp<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">参见 <a class="reference internal" href="#get_rt_data">get_rt_data</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="brokerhandlerbase">
<h3>BrokerHandlerBase - 实时经纪推送回调<a class="headerlink" href="#brokerhandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的经纪数据。</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">BrokerTest</span><span class="p">(</span><span class="n">BrokerHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">BrokerTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: stock: {} data: {} &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>  <span class="c1"># BrokerTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">BrokerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置实时经纪推送回调</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">])</span> <span class="c1"># 订阅经纪类型，OpenD开始持续收到服务器的推送</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span>    BrokerTest: stock: HK.00700 data: [        code  bid_broker_id  bid_broker_name  bid_broker_pos order_id order_volume
0   HK.00700            517  Eclipse Options               1      N/A          N/A
..       ...            ...              ...             ...      ...          ...
23  HK.00700            535       海通国际证券有限公司              14      N/A          N/A

[24 rows x 6 columns],         code  ask_broker_id ask_broker_name  ask_broker_pos order_id order_volume
0   HK.00700           8577  汇丰证券经纪(亚洲)有限公司               1      N/A          N/A
..       ...            ...             ...             ...      ...          ...
37  HK.00700           5357     星展唯高达香港有限公司               3      N/A          N/A

[38 rows x 6 columns]]
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id12">
<h4>on_recv_rsp<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时经纪数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">成功时返回(RET_OK, stock_code, [bid_frame_table, ask_frame_table]), 相关frame table含义见 <a class="reference internal" href="#get_broker_queue">get_broker_queue</a> 的返回值说明<p>失败时返回(RET_ERROR, ERR_MSG, None)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="pricereminderhandlerbase">
<h3>PriceReminderHandlerBase - 到价提醒通知回调<a class="headerlink" href="#pricereminderhandlerbase" title="永久链接至标题">¶</a></h3>
<p>异步处理推送的到价提醒通知</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">PriceReminderTest</span><span class="p">(</span><span class="n">PriceReminderHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PriceReminderTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;PriceReminderTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">content</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">content</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;PriceReminderTest &quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span> <span class="c1"># PriceReminderTest自己的处理逻辑</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">content</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">PriceReminderTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>  <span class="c1"># 设置到价提醒通知回调</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># 设置脚本接收OpenD的推送持续时间为15秒</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>   <span class="c1"># 关闭当条连接，OpenD会在1分钟后自动取消相应股票相应类型的订阅</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Output:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">PriceReminderTest</span>  <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;HK.HSImain&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mf">24529.0</span><span class="p">,</span> <span class="s1">&#39;change_rate&#39;</span><span class="p">:</span> <span class="mf">0.11</span><span class="p">,</span> <span class="s1">&#39;market_status&#39;</span><span class="p">:</span> <span class="s1">&#39;OPEN&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;价格涨到24531.000&#39;</span><span class="p">,</span> <span class="s1">&#39;note&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="mi">158815186771390101</span><span class="p">,</span> <span class="s1">&#39;reminder_type&#39;</span><span class="p">:</span> <span class="s1">&#39;PRICE_UP&#39;</span><span class="p">,</span> <span class="s1">&#39;set_value&#39;</span><span class="p">:</span> <span class="mf">24531.0</span><span class="p">,</span> <span class="s1">&#39;cur_value&#39;</span><span class="p">:</span> <span class="mf">24532.0</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="id13">
<h4>on_recv_rsp<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到后到价提醒通知会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">失败时返回(RET_ERROR, ERR_MSG)</td>
</tr>
</tbody>
</table>
<p>成功时返回(RET_OK, &#8216;&#8217;, data), data为dict类型，字段如下</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="21%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>price</td>
<td>float</td>
<td>当前价格</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>str</td>
<td>当前涨跌幅</td>
</tr>
<tr class="row-odd"><td>market_status</td>
<td>str</td>
<td>触发的时间段，盘前、盘中、盘后，参见 <a class="reference external" href="Base_API.html#priceremindermarketstatus">PriceReminderMarketStatus</a></td>
</tr>
<tr class="row-even"><td>content</td>
<td>str</td>
<td>到价提醒文字内容</td>
</tr>
<tr class="row-odd"><td>note</td>
<td>str</td>
<td>备注，最多10个字符</td>
</tr>
<tr class="row-even"><td>key</td>
<td>int64</td>
<td>到价提醒标识</td>
</tr>
<tr class="row-odd"><td>reminder_type</td>
<td>str</td>
<td>到价提醒的类型，参见 <a class="reference external" href="Base_API.html#priceremindertype">PriceReminderType</a></td>
</tr>
<tr class="row-even"><td>set_value</td>
<td>float</td>
<td>用户设置的提醒值</td>
</tr>
<tr class="row-odd"><td>cur_value</td>
<td>float</td>
<td>提醒触发时的值</td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Trade_API.html" class="btn btn-neutral float-right" title="交易API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Base_API.html" class="btn btn-neutral" title="基础API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2020, futu.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.24',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
    console.log("Layout By futu-api");
</script>


</body>
</html>