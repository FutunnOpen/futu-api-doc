

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>行情API &mdash; futu-api-doc 3.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/myStyle.css" type="text/css" />
  

  
    <link rel="top" title="futu-api-doc 3.18 documentation" href="../index.html"/>
        <link rel="next" title="交易API" href="Trade_API.html"/>
        <link rel="prev" title="基础API" href="Base_API.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> futu-api-doc
          

          
          </a>

          
            
            
              <div class="version">
                3.18
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">基础</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/FutuOpenDGuide.html">FutuOpenD使用说明</a></li>
</ul>
<p class="caption"><span class="caption-text">PROTOCOL</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../protocol/intro.html">协议接口</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/base_define.html">基础定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/quote_protocol.html">行情协议</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocol/trade_protocol.html">交易协议</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="Base_API.html">基础API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">行情API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">一分钟上手</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">接口类对象</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openquotecontext">OpenQuoteContext - 行情上下文</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#init">__init__</a></li>
<li class="toctree-l4"><a class="reference internal" href="#close">close</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stop">stop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-handler">set_handler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trading-days"><span class="strike">get_trading_days</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-basicinfo">get_stock_basicinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-multiple-history-kline"><span class="strike">get_multiple_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-history-kline"><span class="strike">get_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-history-kline">request_history_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-autype-list"><span class="strike">get_autype_list</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-market-snapshot">get_market_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-data">get_rt_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-stock">get_plate_stock</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-plate-list">get_plate_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-broker-queue">get_broker_queue</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsubscribe">unsubscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">unsubscribe_all</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-subscription">query_subscription</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-global-state">get_global_state</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-quote">get_stock_quote</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rt-ticker">get_rt_ticker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-cur-kline">get_cur_kline</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-order-book">get_order_book</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-multi-points-history-kline"><span class="strike">get_multi_points_history_kline</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-referencestock-list">get_referencestock_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-owner-plate">get_owner_plate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-holding-change-list">get_holding_change_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-option-chain">get_option_chain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-history-kl-quota">get_history_kl_quota</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-rehab">get_rehab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-warrant">get_warrant</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-flow">get_capital_flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-capital-distribution">get_capital_distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-user-security">get_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modify-user-security">modify_user_security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-stock-filter">get_stock_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-ipo-list">get_ipo_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-future-info">get_future_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-trading-days">request_trading_days</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sysnotifyhandlerbase-opend">SysNotifyHandlerBase - OpenD通知回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-recv-rsp">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stockquotehandlerbase">StockQuoteHandlerBase - 实时报价回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#orderbookhandlerbase">OrderBookHandlerBase - 实时摆盘回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#curklinehandlerbase-k">CurKlineHandlerBase - 实时k线推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tickerhandlerbase">TickerHandlerBase - 实时逐笔推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#rtdatahandlerbase">RTDataHandlerBase - 实时分时推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">on_recv_rsp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#brokerhandlerbase">BrokerHandlerBase - 实时经纪推送回调</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">on_recv_rsp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Trade_API.html">交易API</a></li>
</ul>
<p class="caption"><span class="caption-text">.Net API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../net/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../net/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">.Java API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../java/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Base_API.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">CPP API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/base.html">基础API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/qot.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/trd.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">JavaScript API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../javascript/intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Quote_API.html">行情API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/Trade_API.html">交易API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript/start.html">快速上手</a></li>
</ul>
<p class="caption"><span class="caption-text">Q&amp;A</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../q&amp;a/Q&amp;A.html">Q&amp;A</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">futu-api-doc</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>行情API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/Quote_API.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="api">
<h1>行情API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div></div></blockquote>
<div class="section" id="id1">
<h2>一分钟上手<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>如下范例，创建api行情对象，调用get_market_snapshot获取港股腾讯00700的报价快照数据,最后关闭对象</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id2">
<h2>接口类对象<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="openquotecontext">
<h3>OpenQuoteContext - 行情上下文<a class="headerlink" href="#openquotecontext" title="Permalink to this headline">¶</a></h3>
<div class="section" id="init">
<h4>__init__<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>host='127.0.0.1'</em>, <em>port=11111</em>, <em>is_encrypt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>构造函数</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; str FutuOpenD监听的IP地址</li>
<li><strong>port</strong> &#8211; int FutuOpenD监听的IP端口</li>
<li><strong>is_encrypt</strong> &#8211; bool 是否启用加密。默认为None，表示使用 <a class="reference external" href="Base_API.html#enable_proto_encrypt">SysConfig.enable_proto_encrypt</a> 的设置。</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">,</span> <span class="n">is_encrypt</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="close">
<h4>close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>关闭上下文对象。默认情况下，futu-api内部创建的线程会阻止进程退出，只有当所有context都close后，进程才能正常退出。但通过SysConfig.set_all_thread_daemon可以设置所有内部线程为daemon线程，这时即使没有调用context的close，进程也可以正常退出。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="start">
<h4>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>启动异步接收推送数据</p>
</div>
<div class="section" id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>停止异步接收推送数据</p>
</div>
<div class="section" id="set-handler">
<h4>set_handler<a class="headerlink" href="#set-handler" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="set_handler">
<code class="descname">set_handler</code><span class="sig-paren">(</span><em>self</em>, <em>handler</em><span class="sig-paren">)</span><a class="headerlink" href="#set_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>设置异步回调处理对象</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>handler</strong> &#8211; <p>回调处理对象，必须是以下类的子类实例</p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">类名</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SysNotifyHandlerBase</td>
<td>OpenD通知处理基类</td>
</tr>
<tr class="row-odd"><td>StockQuoteHandlerBase</td>
<td>报价处理基类</td>
</tr>
<tr class="row-even"><td>OrderBookHandlerBase</td>
<td>摆盘处理基类</td>
</tr>
<tr class="row-odd"><td>CurKlineHandlerBase</td>
<td>实时k线处理基类</td>
</tr>
<tr class="row-even"><td>TickerHandlerBase</td>
<td>逐笔处理基类</td>
</tr>
<tr class="row-odd"><td>RTDataHandlerBase</td>
<td>分时数据处理基类</td>
</tr>
<tr class="row-even"><td>BrokerHandlerBase</td>
<td>经济队列处理基类</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return ret:</th><td class="field-body"><p class="first">RET_OK: 设置成功</p>
<p class="last">其它: 设置失败</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-trading-days">
<h4><span class="strike">get_trading_days</span><a class="headerlink" href="#get-trading-days" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_trading_days">
<code class="descname">get_trading_days</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>start=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>获取交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型，<a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>start</strong> &#8211; 起始日期。例如&#8216;2018-01-01&#8217;。</li>
<li><strong>end</strong> &#8211; <p>结束日期。例如&#8216;2018-01-01&#8217;。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>str</td>
<td>时间</td>
</tr>
<tr class="row-odd"><td>trade_date_type</td>
<td>str</td>
<td>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_trading_days</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-10&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-stock-basicinfo">
<h4>get_stock_basicinfo<a class="headerlink" href="#get-stock-basicinfo" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_basicinfo">
<code class="descname">get_stock_basicinfo</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>stock_type=SecurityType.STOCK</em>, <em>code_list=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_basicinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定市场中特定类型的股票基本信息</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>stock_type</strong> &#8211; 股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a>，但不支持SecurityType.DRVT</li>
<li><strong>code_list</strong> &#8211; 如果不为None，应该是股票code的iterable类型，将只返回指定的股票信息</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret_code, content)</p>
<p>ret_code 等于RET_OK时， content为Pandas.DataFrame数据, 否则为错误原因字符串, 数据列格式如下</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>stock_child_type</td>
<td>str</td>
<td>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码，或期权标的股的代码</td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>strike_price</td>
<td>float</td>
<td>期权行权价</td>
</tr>
<tr class="row-odd"><td>suspension</td>
<td>bool</td>
<td>期权是否停牌(True表示停牌)</td>
</tr>
<tr class="row-even"><td>listing_date</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>delisting</td>
<td>bool</td>
<td>是否退市</td>
</tr>
<tr class="row-odd"><td>index_option_type</td>
<td>str</td>
<td>指数期权类型</td>
</tr>
<tr class="row-even"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">WARRANT</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_basicinfo</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">SecurityType</span><span class="o">.</span><span class="n">STOCK</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>当传入程序无法识别的股票时（包括很久之前退市的股票和不存在的股票），仍然返回股票信息，用静态信息标志来该股票不存在。统一处理为：code正常显示，name显示为“未知股票”，delisting显示为“true”，其他字段均为默认值（整型默认是0，字符串默认是空字符串）。</li>
<li>跟其他的行情接口不同，其他接口遇到程序无法识别的股票时，会拒绝请求并返回错误描述“未知股票”。</li>
</ul>
</div>
</div>
<div class="section" id="get-multiple-history-kline">
<h4><span class="strike">get_multiple_history_kline</span><a class="headerlink" href="#get-multiple-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_multiple_history_kline">
<code class="descname">get_multiple_history_kline</code><span class="sig-paren">(</span><em>self</em>, <em>codelist</em>, <em>start=None</em>, <em>end=None</em>, <em>ktype=KLType.K_DAY</em>, <em>autype=AuType.QFQ</em><span class="sig-paren">)</span><a class="headerlink" href="#get_multiple_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>获取多只股票的本地历史k线数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>codelist</strong> &#8211; 股票代码列表，list或str。例如：[&#8216;HK.00700&#8217;, &#8216;HK.00001&#8217;]，&#8217;HK.00700,SZ.399001&#8217;</li>
<li><strong>start</strong> &#8211; 起始时间，，例如&#8216;2017-06-20&#8217;</li>
<li><strong>end</strong> &#8211; 结束时间，例如&#8216;2017-07-20&#8217;</li>
<li><strong>ktype</strong> &#8211; k线类型，参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></li>
<li><strong>autype</strong> &#8211; 复权类型，参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>成功时返回(RET_OK, [data])，data是DataFrame数据, 数据列格式如下</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>k线时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨收价</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>失败时返回(RET_ERROR, data)，其中data是错误描述字符串</p>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_multiple_history_kline</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-06-25&#39;</span><span class="p">,</span> <span class="n">KLType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-history-kline">
<h4><span class="strike">get_history_kline</span><a class="headerlink" href="#get-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_history_kline">
<code class="descname">get_history_kline</code><span class="sig-paren">(</span><em>self, code, start=None, end=None, ktype=KLType.K_DAY, autype=AuType.QFQ, fields=[KL_FIELD.ALL]</em><span class="sig-paren">)</span><a class="headerlink" href="#get_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="strike">得到本地历史k线，需先参照帮助文档下载k线</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>start</strong> &#8211; 开始时间，例如&#8216;2017-06-20&#8217;。</li>
<li><strong>end</strong> &#8211; <p>结束时间，例如&#8216;2017-06-30&#8217;。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><strong>ktype</strong> &#8211; k线类型， 参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a> 定义</li>
<li><strong>autype</strong> &#8211; 复权类型, 参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a> 定义</li>
<li><strong>fields</strong> &#8211; 需返回的字段列表，参见 <a class="reference external" href="Base_API.html#kl-field-k">KL_FIELD</a> 定义 KL_FIELD.ALL  KL_FIELD.OPEN ....</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd Dataframe数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>k线时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨收价</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2017-06-22&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="request-history-kline">
<h4>request_history_kline<a class="headerlink" href="#request-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="request_history_kline">
<code class="descname">request_history_kline</code><span class="sig-paren">(</span><em>self, code, start=None, end=None, ktype=KLType.K_DAY, autype=AuType.QFQ, fields=[KL_FIELD.ALL], max_count=1000, page_req_key=None</em><span class="sig-paren">)</span><a class="headerlink" href="#request_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>获取k线，不需要事先下载k线数据。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>start</strong> &#8211; 开始时间，例如&#8216;2017-06-20&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束时间，例如&#8216;2017-07-20&#8217;。
start和end的组合如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</li>
<li><strong>ktype</strong> &#8211; k线类型， 参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a> 定义</li>
<li><strong>autype</strong> &#8211; 复权类型, 参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a> 定义</li>
<li><strong>fields</strong> &#8211; 需返回的字段列表，参见 <a class="reference external" href="Base_API.html#kl-field-k">KL_FIELD</a> 定义 KL_FIELD.ALL  KL_FIELD.OPEN ....</li>
<li><strong>max_count</strong> &#8211; 本次请求最大返回的数据点个数，传None表示返回start和end之间所有的数据。</li>
<li><strong>page_req_key</strong> &#8211; 分页请求的key。如果start和end之间的数据点多于max_count，那么后续请求时，要传入上次调用返回的page_req_key。初始请求时应该传None。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data, page_req_key)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下。page_req_key在分页请求时（即max_count&gt;0）可能返回，并且需要在后续的请求中传入。如果没有更多数据，page_req_key返回None。</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>k线时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨收价</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-06-22&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#请求开头50个数据</span>
<span class="k">print</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">page_req_key</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_history_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-06-22&#39;</span><span class="p">,</span> <span class="n">max_count</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">page_req_key</span><span class="o">=</span><span class="n">page_req_key</span><span class="p">)</span> <span class="c1">#请求下50个数据</span>
<span class="k">print</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-history-kline-limit"><span class="std std-ref">在线获取单只股票一段历史K线限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-autype-list">
<h4><span class="strike">get_autype_list</span><a class="headerlink" href="#get-autype-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_autype_list">
<code class="descname">get_autype_list</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_autype_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取给定股票列表的复权因子</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code_list</strong> &#8211; 股票列表，例如[&#8216;HK.00700&#8217;]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>ex_div_date</td>
<td>str</td>
<td>除权除息日</td>
</tr>
<tr class="row-even"><td>split_ratio</td>
<td>float</td>
<td>拆合股比例（该字段为比例字段，展示为小数表示）例如，对于5股合1股为5.0，对于1股拆5股为0.2</td>
</tr>
<tr class="row-odd"><td>per_cash_div</td>
<td>float</td>
<td>每股派现</td>
</tr>
<tr class="row-even"><td>per_share_div_ratio</td>
<td>float</td>
<td>每股送股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-odd"><td>per_share_trans_ratio</td>
<td>float</td>
<td>每股转增股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>allotment_ratio</td>
<td>float</td>
<td>每股配股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-odd"><td>allotment_price</td>
<td>float</td>
<td>配股价</td>
</tr>
<tr class="row-even"><td>stk_spo_ratio</td>
<td>float</td>
<td>增发比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-odd"><td>stk_spo_price</td>
<td>float</td>
<td>增发价格</td>
</tr>
<tr class="row-even"><td>forward_adj_factorA</td>
<td>float</td>
<td>前复权因子A</td>
</tr>
<tr class="row-odd"><td>forward_adj_factorB</td>
<td>float</td>
<td>前复权因子B</td>
</tr>
<tr class="row-even"><td>backward_adj_factorA</td>
<td>float</td>
<td>后复权因子A</td>
</tr>
<tr class="row-odd"><td>backward_adj_factorB</td>
<td>float</td>
<td>后复权因子B</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_autype_list</span><span class="p">([</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>复权后价格 = 复权前价格 * 复权因子a + 复权因子b</li>
</ul>
</div>
</div>
<div class="section" id="get-market-snapshot">
<h4>get_market_snapshot<a class="headerlink" href="#get-market-snapshot" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_market_snapshot">
<code class="descname">get_market_snapshot</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_market_snapshot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>获取市场快照</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">param code_list:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">股票列表，股票个数最多400</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">return:</th><td class="field-body"><p class="first">(ret, data)</p>
<p>ret == RET_OK ,返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p class="last">ret != RET_OK 返回错误字符串</p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="11%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>update_time</td>
<td>str</td>
<td>更新时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>last_price</td>
<td>float</td>
<td>最新价格</td>
</tr>
<tr class="row-odd"><td>open_price</td>
<td>float</td>
<td>今日开盘价</td>
</tr>
<tr class="row-even"><td>high_price</td>
<td>float</td>
<td>最高价格</td>
</tr>
<tr class="row-odd"><td>low_price</td>
<td>float</td>
<td>最低价格</td>
</tr>
<tr class="row-even"><td>prev_close_price</td>
<td>float</td>
<td>昨收盘价格</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>int</td>
<td>成交数量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>listing_date</td>
<td>str</td>
<td>上市日期 (yyyy-MM-dd)</td>
</tr>
<tr class="row-even"><td>equity_valid</td>
<td>bool</td>
<td>是否正股（为true时以下正股相关字段才有合法数值）</td>
</tr>
<tr class="row-odd"><td>issued_shares</td>
<td>int</td>
<td>发行股本</td>
</tr>
<tr class="row-even"><td>total_market_val</td>
<td>float</td>
<td>总市值</td>
</tr>
<tr class="row-odd"><td>net_asset</td>
<td>int</td>
<td>资产净值</td>
</tr>
<tr class="row-even"><td>net_profit</td>
<td>int</td>
<td>净利润</td>
</tr>
<tr class="row-odd"><td>earning_per_share</td>
<td>float</td>
<td>每股盈利</td>
</tr>
<tr class="row-even"><td>outstanding_shares</td>
<td>int</td>
<td>流通股本</td>
</tr>
<tr class="row-odd"><td>net_asset_per_share</td>
<td>float</td>
<td>每股净资产</td>
</tr>
<tr class="row-even"><td>circular_market_val</td>
<td>float</td>
<td>流通市值</td>
</tr>
<tr class="row-odd"><td>ey_ratio</td>
<td>float</td>
<td>收益率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>pb_ratio</td>
<td>float</td>
<td>市净率（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-even"><td>pe_ttm_ratio</td>
<td>float</td>
<td>市盈率TTM（该字段为比例字段，默认不展示%）</td>
</tr>
<tr class="row-odd"><td>dividend_ttm</td>
<td>float</td>
<td>股息TTM，派息</td>
</tr>
<tr class="row-even"><td>dividend_ratio_ttm</td>
<td>float</td>
<td>股息率TTM（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>dividend_lfy</td>
<td>float</td>
<td>股息LFY，上一年度派息</td>
</tr>
<tr class="row-even"><td>dividend_lfy_ratio</td>
<td>float</td>
<td>股息率LFY（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码或期权的标的股代码</td>
</tr>
<tr class="row-even"><td>wrt_valid</td>
<td>bool</td>
<td>是否是窝轮（为true时以下窝轮相关的字段才有合法数据）</td>
</tr>
<tr class="row-odd"><td>wrt_conversion_ratio</td>
<td>float</td>
<td>换股比率</td>
</tr>
<tr class="row-even"><td>wrt_type</td>
<td>str</td>
<td>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>wrt_strike_price</td>
<td>float</td>
<td>行使价格</td>
</tr>
<tr class="row-even"><td>wrt_maturity_date</td>
<td>str</td>
<td>格式化窝轮到期时间</td>
</tr>
<tr class="row-odd"><td>wrt_end_trade</td>
<td>str</td>
<td>格式化窝轮最后交易时间</td>
</tr>
<tr class="row-even"><td>wrt_leverage</td>
<td>float</td>
<td>杠杆比率（倍）</td>
</tr>
<tr class="row-odd"><td>wrt_ipop</td>
<td>float</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>wrt_break_even_point</td>
<td>float</td>
<td>打和点</td>
</tr>
<tr class="row-odd"><td>wrt_conversion_price</td>
<td>float</td>
<td>换股价</td>
</tr>
<tr class="row-even"><td>wrt_price_recovery_ratio</td>
<td>float</td>
<td>正股距收回价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>wrt_score</td>
<td>float</td>
<td>窝轮综合评分</td>
</tr>
<tr class="row-even"><td>wrt_code</td>
<td>str</td>
<td>窝轮对应的正股（此字段已废除,修改为stock_owner）</td>
</tr>
<tr class="row-odd"><td>wrt_recovery_price</td>
<td>float</td>
<td>窝轮收回价</td>
</tr>
<tr class="row-even"><td>wrt_street_vol</td>
<td>float</td>
<td>窝轮街货量</td>
</tr>
<tr class="row-odd"><td>wrt_issue_vol</td>
<td>float</td>
<td>窝轮发行量</td>
</tr>
<tr class="row-even"><td>wrt_street_ratio</td>
<td>float</td>
<td>窝轮街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>wrt_delta</td>
<td>float</td>
<td>窝轮对冲值</td>
</tr>
<tr class="row-even"><td>wrt_implied_volatility</td>
<td>float</td>
<td>窝轮引伸波幅</td>
</tr>
<tr class="row-odd"><td>wrt_premium</td>
<td>float</td>
<td>窝轮溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>wrt_upper_strike_price</td>
<td>float</td>
<td>上限价，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>wrt_lower_strike_price</td>
<td>float</td>
<td>下限价，仅界内证支持该字段</td>
</tr>
<tr class="row-even"><td>wrt_inline_price_status</td>
<td>str</td>
<td>界内界外, 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>option_valid</td>
<td>bool</td>
<td>是否是期权（为true时以下期权相关的字段才有合法数值）</td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，参见 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>option_strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-odd"><td>option_contract_size</td>
<td>int</td>
<td>每份合约数</td>
</tr>
<tr class="row-even"><td>option_open_interest</td>
<td>int</td>
<td>总未平仓合约数</td>
</tr>
<tr class="row-odd"><td>option_implied_volatility</td>
<td>float</td>
<td>隐含波动率</td>
</tr>
<tr class="row-even"><td>option_premium</td>
<td>float</td>
<td>溢价</td>
</tr>
<tr class="row-odd"><td>option_delta</td>
<td>float</td>
<td>希腊值 Delta</td>
</tr>
<tr class="row-even"><td>option_gamma</td>
<td>float</td>
<td>希腊值 Gamma</td>
</tr>
<tr class="row-odd"><td>option_vega</td>
<td>float</td>
<td>希腊值 Vega</td>
</tr>
<tr class="row-even"><td>option_theta</td>
<td>float</td>
<td>希腊值 Theta</td>
</tr>
<tr class="row-odd"><td>option_rho</td>
<td>float</td>
<td>希腊值 Rho</td>
</tr>
<tr class="row-even"><td>option_net_open_interest</td>
<td>int</td>
<td>净未平仓合约数</td>
</tr>
<tr class="row-odd"><td>option_expiry_date_distance</td>
<td>int</td>
<td>距离到期日天数，负数表示已过期</td>
</tr>
<tr class="row-even"><td>option_contract_nominal_value</td>
<td>float</td>
<td>合约名义金额</td>
</tr>
<tr class="row-odd"><td>option_owner_lot_multiplier</td>
<td>float</td>
<td>相等正股手数，指数期权无该字段</td>
</tr>
<tr class="row-even"><td>option_area_type</td>
<td>str</td>
<td>期权地区类型，见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></td>
</tr>
<tr class="row-odd"><td>option_contract_multiplier</td>
<td>float</td>
<td>合约乘数，指数期权特有字段</td>
</tr>
<tr class="row-even"><td>plate_valid</td>
<td>bool</td>
<td>是否为板块类型（为true时以下板块类型字段才有合法数值）</td>
</tr>
<tr class="row-odd"><td>plate_raise_count</td>
<td>int</td>
<td>板块类型上涨支数</td>
</tr>
<tr class="row-even"><td>plate_fall_count</td>
<td>int</td>
<td>板块类型下跌支数</td>
</tr>
<tr class="row-odd"><td>plate_equal_count</td>
<td>int</td>
<td>板块类型平盘支数</td>
</tr>
<tr class="row-even"><td>index_valid</td>
<td>bool</td>
<td>是否有指数类型（为true时以下指数类型字段才有合法数值）</td>
</tr>
<tr class="row-odd"><td>index_raise_count</td>
<td>int</td>
<td>指数类型上涨支数</td>
</tr>
<tr class="row-even"><td>index_fall_count</td>
<td>int</td>
<td>指数类型下跌支数</td>
</tr>
<tr class="row-odd"><td>index_equal_count</td>
<td>int</td>
<td>指数类型平盘支数</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段），期货表示合约乘数</td>
</tr>
<tr class="row-odd"><td>price_spread</td>
<td>float</td>
<td>当前向上的摆盘价差,亦即摆盘数据的卖档的相邻档位的报价差</td>
</tr>
<tr class="row-even"><td>ask_price</td>
<td>float</td>
<td>卖价</td>
</tr>
<tr class="row-odd"><td>bid_price</td>
<td>float</td>
<td>买价</td>
</tr>
<tr class="row-even"><td>ask_vol</td>
<td>float</td>
<td>卖量</td>
</tr>
<tr class="row-odd"><td>bid_vol</td>
<td>float</td>
<td>买量</td>
</tr>
<tr class="row-even"><td>enable_margin</td>
<td>bool</td>
<td>是否可融资，如果为true，后两个字段才有意义</td>
</tr>
<tr class="row-odd"><td>mortgage_ratio</td>
<td>float</td>
<td>股票抵押率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>long_margin_initial_ratio</td>
<td>float</td>
<td>融资初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>enable_short_sell</td>
<td>bool</td>
<td>是否可卖空，如果为true，后三个字段才有意义</td>
</tr>
<tr class="row-even"><td>short_sell_rate</td>
<td>float</td>
<td>卖空参考利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>short_available_volume</td>
<td>int</td>
<td>剩余可卖空数量</td>
</tr>
<tr class="row-even"><td>short_margin_initial_ratio</td>
<td>float</td>
<td>卖空（融券）初始保证金率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>sec_status</td>
<td>str</td>
<td>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></td>
</tr>
<tr class="row-even"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>avg_price</td>
<td>float</td>
<td>平均价</td>
</tr>
<tr class="row-even"><td>bid_ask_ratio</td>
<td>float</td>
<td>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>volume_ratio</td>
<td>float</td>
<td>量比</td>
</tr>
<tr class="row-even"><td>highest52weeks_price</td>
<td>float</td>
<td>52周最高价</td>
</tr>
<tr class="row-odd"><td>lowest52weeks_price</td>
<td>float</td>
<td>52周最低价</td>
</tr>
<tr class="row-even"><td>highest_history_price</td>
<td>float</td>
<td>历史最高价</td>
</tr>
<tr class="row-odd"><td>lowest_history_price</td>
<td>float</td>
<td>历史最低价</td>
</tr>
<tr class="row-even"><td>pre_price</td>
<td>float</td>
<td>盘前价格</td>
</tr>
<tr class="row-odd"><td>pre_high_price</td>
<td>float</td>
<td>盘前最高价</td>
</tr>
<tr class="row-even"><td>pre_low_price</td>
<td>float</td>
<td>盘前最低价</td>
</tr>
<tr class="row-odd"><td>pre_volume</td>
<td>int</td>
<td>盘前成交量</td>
</tr>
<tr class="row-even"><td>pre_turnover</td>
<td>float</td>
<td>盘前成交额</td>
</tr>
<tr class="row-odd"><td>pre_change_val</td>
<td>float</td>
<td>盘前涨跌额</td>
</tr>
<tr class="row-even"><td>pre_change_rate</td>
<td>float</td>
<td>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>pre_amplitude</td>
<td>float</td>
<td>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>after_price</td>
<td>float</td>
<td>盘后价格</td>
</tr>
<tr class="row-odd"><td>after_high_price</td>
<td>float</td>
<td>盘后最高价</td>
</tr>
<tr class="row-even"><td>after_low_price</td>
<td>float</td>
<td>盘后最低价</td>
</tr>
<tr class="row-odd"><td>after_volume</td>
<td>int</td>
<td>盘后成交量，科创板支持该数据。</td>
</tr>
<tr class="row-even"><td>after_turnover</td>
<td>float</td>
<td>盘后成交额，科创板支持该数据。</td>
</tr>
<tr class="row-odd"><td>after_change_val</td>
<td>float</td>
<td>盘后涨跌额</td>
</tr>
<tr class="row-even"><td>after_change_rate</td>
<td>float</td>
<td>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>after_amplitude</td>
<td>float</td>
<td>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>future_valid</td>
<td>bool</td>
<td>是否期货</td>
</tr>
<tr class="row-odd"><td>future_last_settle_price</td>
<td>float</td>
<td>昨结</td>
</tr>
<tr class="row-even"><td>future_position</td>
<td>float</td>
<td>持仓量</td>
</tr>
<tr class="row-odd"><td>future_position_change</td>
<td>float</td>
<td>日增仓</td>
</tr>
<tr class="row-even"><td>future_main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-odd"><td>future_last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_market_snapshot</span><span class="p">([</span><span class="s1">&#39;SH.600000&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00700&#39;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-market-snapshot-limit"><span class="std std-ref">获取股票快照限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-rt-data">
<h4>get_rt_data<a class="headerlink" href="#get-rt-data" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rt_data">
<code class="descname">get_rt_data</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_data" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定股票的分时数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code</strong> &#8211; 股票代码，例如，HK.00700</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd Dataframe数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="11%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time</td>
<td>str</td>
<td>时间(yyyy-MM-dd HH:mm:ss)（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>is_blank</td>
<td>bool</td>
<td>数据状态；正常数据为False，伪造数据为True</td>
</tr>
<tr class="row-odd"><td>opened_mins</td>
<td>int</td>
<td>零点到当前多少分钟</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>当前价格</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨天收盘的价格</td>
</tr>
<tr class="row-even"><td>avg_price</td>
<td>float</td>
<td>平均价格（对于期权，该字段为None）</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>float</td>
<td>成交量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_data</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-plate-stock">
<h4>get_plate_stock<a class="headerlink" href="#get-plate-stock" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_plate_stock">
<code class="descname">get_plate_stock</code><span class="sig-paren">(</span><em>self</em>, <em>plate_code</em>, <em>sort_field=SortField.CODE</em>, <em>ascend=True</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_stock" title="Permalink to this definition">¶</a></dt>
<dd><p>获取特定板块下的股票列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>plate_code</strong> &#8211; 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码</li>
<li><strong>sort_field</strong> &#8211; 排序字段，SortField，根据哪些字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></li>
<li><strong>ascend</strong> &#8211; 排序方向，bool，True升序，False降序</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>lot_size</td>
<td>int</td>
<td>每手股数，期货表示合约乘数</td>
</tr>
<tr class="row-even"><td>stock_name</td>
<td>str</td>
<td>股票名称</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约（期货特有字段）</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间（期货特有字段，主连，当月，下月等期货没有该字段）</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_stock</span><span class="p">(</span><span class="s1">&#39;HK.BK1001&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first">该接口也可用于获取指数成份股, 如获取上证指数成份股:</p>
<ul class="simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-stock-limit"><span class="std std-ref">获取板块下的股票限制</span></a></li>
</ul>
</li>
<li><p class="first">部分常用的板块或指数代码如下:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">代码</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HK.HSI Constituent</td>
<td>恒指成份股</td>
</tr>
<tr class="row-odd"><td>HK.HSCEI Stock</td>
<td>国指成份股</td>
</tr>
<tr class="row-even"><td>HK.Motherboard</td>
<td>港股主板</td>
</tr>
<tr class="row-odd"><td>HK.GEM</td>
<td>港股创业板</td>
</tr>
<tr class="row-even"><td>HK.BK1910</td>
<td>所有港股</td>
</tr>
<tr class="row-odd"><td>HK.BK1911</td>
<td>主板H股</td>
</tr>
<tr class="row-even"><td>HK.BK1912</td>
<td>创业板H股</td>
</tr>
<tr class="row-odd"><td>HK.Fund</td>
<td>港股基金</td>
</tr>
<tr class="row-even"><td>HK.BK1600</td>
<td>富途热门(港)</td>
</tr>
<tr class="row-odd"><td>HK.BK1986</td>
<td>港股期货全类型</td>
</tr>
<tr class="row-even"><td>HK.BK1987</td>
<td>港股股指期货</td>
</tr>
<tr class="row-odd"><td>HK.BK1988</td>
<td>港股汇率期货</td>
</tr>
<tr class="row-even"><td>HK.BK1989</td>
<td>港股金属期货</td>
</tr>
<tr class="row-odd"><td>HK.BK1990</td>
<td>港股股票期货</td>
</tr>
<tr class="row-even"><td>SH.3000000</td>
<td>上海主板</td>
</tr>
<tr class="row-odd"><td>SH.BK0901</td>
<td>上证B股</td>
</tr>
<tr class="row-even"><td>SH.BK0902</td>
<td>深证B股</td>
</tr>
<tr class="row-odd"><td>SH.3000002</td>
<td>沪深指数</td>
</tr>
<tr class="row-even"><td>SH.3000005</td>
<td>沪深全部A股</td>
</tr>
<tr class="row-odd"><td>SH.BK0600</td>
<td>富途热门(沪深)</td>
</tr>
<tr class="row-even"><td>SH.BK0992</td>
<td>科创板</td>
</tr>
<tr class="row-odd"><td>SZ.3000001</td>
<td>深证主板</td>
</tr>
<tr class="row-even"><td>SZ.3000003</td>
<td>中小企业板块</td>
</tr>
<tr class="row-odd"><td>SZ.3000004</td>
<td>深证创业板</td>
</tr>
<tr class="row-even"><td>US.USAALL</td>
<td>所有美股</td>
</tr>
<tr class="row-odd"><td>US.BK2989</td>
<td>美股期货全类型</td>
</tr>
<tr class="row-even"><td>US.BK2990</td>
<td>美股农产品期货</td>
</tr>
<tr class="row-odd"><td>US.BK2991</td>
<td>美股利率期货</td>
</tr>
<tr class="row-even"><td>US.BK2992</td>
<td>美股外汇期货</td>
</tr>
<tr class="row-odd"><td>US.BK2993</td>
<td>美股数字货币期货</td>
</tr>
<tr class="row-even"><td>US.BK2994</td>
<td>美股股指期货</td>
</tr>
<tr class="row-odd"><td>US.BK2995</td>
<td>美股能源化工期货</td>
</tr>
<tr class="row-even"><td>US.BK2996</td>
<td>美股贵金属期货</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</div>
<div class="section" id="get-plate-list">
<h4>get_plate_list<a class="headerlink" href="#get-plate-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_plate_list">
<code class="descname">get_plate_list</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>plate_class</em><span class="sig-paren">)</span><a class="headerlink" href="#get_plate_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取板块集合下的子板块列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的子板块（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>plate_class</strong> &#8211; 板块分类，参见 <a class="reference external" href="Base_API.html#plate">Plate</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return (ret, data):</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">ret == RET_OK 返回pd Dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>plate_name</td>
<td>str</td>
<td>板块名字</td>
</tr>
<tr class="row-even"><td>plate_id</td>
<td>str</td>
<td>板块id</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_plate_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">Plate</span><span class="o">.</span><span class="n">ALL</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-plate-list-limit"><span class="std std-ref">获取板块集合下的板块限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-broker-queue">
<h4>get_broker_queue<a class="headerlink" href="#get-broker-queue" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_broker_queue">
<code class="descname">get_broker_queue</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_broker_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>获取股票的经纪队列</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 股票代码</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, bid_frame_table, ask_frame_table)或(ret, err_message, err_message)<p>ret == RET_OK，bid_frame_table，ask_frame_table 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>bid_frame_table 经纪买盘数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>bid_broker_id</td>
<td>int</td>
<td>经纪买盘id</td>
</tr>
<tr class="row-even"><td>bid_broker_name</td>
<td>str</td>
<td>经纪买盘名称</td>
</tr>
<tr class="row-odd"><td>bid_broker_pos</td>
<td>int</td>
<td>经纪档位</td>
</tr>
</tbody>
</table>
<p>ask_frame_table 经纪卖盘数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>ask_broker_id</td>
<td>int</td>
<td>经纪卖盘id</td>
</tr>
<tr class="row-even"><td>ask_broker_name</td>
<td>str</td>
<td>经纪卖盘名称</td>
</tr>
<tr class="row-odd"><td>ask_broker_pos</td>
<td>int</td>
<td>经纪档位</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_broker_queue</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="subscribe">
<h4>subscribe<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">subscribe</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em>, <em>subtype_list</em>, <em>is_first_push=True</em>, <em>subscribe_push=True</em><span class="sig-paren">)</span></dt>
<dd><p>订阅注册需要的实时信息，指定股票和订阅的数据类型即可，港股订阅需要Lv2行情。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code_list</strong> &#8211; 需要订阅的股票代码列表</li>
<li><strong>subtype_list</strong> &#8211; 需要订阅的数据类型列表，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></li>
<li><strong>is_first_push</strong> &#8211; 订阅成功之后是否马上推送一次数据</li>
<li><strong>subscribe_push</strong> &#8211; 订阅后推送</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="unsubscribe">
<h4>unsubscribe<a class="headerlink" href="#unsubscribe" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">unsubscribe</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em>, <em>subtype_list</em>, <em>unsubscribe_all=False</em><span class="sig-paren">)</span></dt>
<dd><p>取消订阅</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code_list</strong> &#8211; 取消订阅的股票代码列表</li>
<li><strong>subtype_list</strong> &#8211; 取消订阅的类型，参见 <a class="reference external" href="Base_API.html#subtype">SubType</a></li>
<li><strong>unsubscribe_all</strong> &#8211; 取消所有订阅，为True时忽略其他参数，或可使用 <a class="reference external" href="./Quote_API.html#unsubscribe_all">unsubscribe_all</a> 接口</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, err_message)</p>
<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="id3">
<h4>unsubscribe_all<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="unsubscribe_all">
<code class="descname">unsubscribe_all</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#unsubscribe_all" title="Permalink to this definition">¶</a></dt>
<dd><p>取消所有订阅</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(ret, err_message)<p>ret == RET_OK err_message为None</p>
<p>ret != RET_OK err_message为错误描述字符串</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">unsubscribe_all</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#subscribe-limit"><span class="std std-ref">订阅反订阅限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="query-subscription">
<h4>query_subscription<a class="headerlink" href="#query-subscription" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="query_subscription">
<code class="descname">query_subscription</code><span class="sig-paren">(</span><em>self</em>, <em>is_all_conn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#query_subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>查询已订阅的实时信息</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>is_all_conn</strong> &#8211; 是否返回所有连接的订阅状态,不传或者传False只返回当前连接数据</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回订阅信息的字典数据 ，格式如下:</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;total_used&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>    <span class="c1"># 所有连接已使用的订阅额度</span>
    <span class="s1">&#39;own_used&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>       <span class="c1"># 当前连接已使用的订阅额度</span>
    <span class="s1">&#39;remain&#39;</span><span class="p">:</span> <span class="mi">496</span><span class="p">,</span>       <span class="c1">#  剩余的订阅额度</span>
    <span class="s1">&#39;sub_list&#39;</span><span class="p">:</span>          <span class="c1">#  每种订阅类型对应的股票列表</span>
    <span class="p">{</span>
        <span class="s1">&#39;BROKER&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">],</span>
        <span class="s1">&#39;RT_DATA&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.02318&#39;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">query_subscription</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-global-state">
<h4>get_global_state<a class="headerlink" href="#get-global-state" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_global_state">
<code class="descname">get_global_state</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#get_global_state" title="Permalink to this definition">¶</a></dt>
<dd><p>获取全局状态</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret == RET_OK data为包含全局状态的字典，含义如下</p>
<p>ret != RET_OK data为错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">value类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>market_sz</td>
<td>str</td>
<td>深圳市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>market_sh</td>
<td>str</td>
<td>上海市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-even"><td>market_hk</td>
<td>str</td>
<td>香港市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>market_hkfuture</td>
<td>str</td>
<td>香港期货市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-even"><td>market_us</td>
<td>str</td>
<td>美国市场状态，参见 <a class="reference external" href="Base_API.html#marketstate">MarketState</a></td>
</tr>
<tr class="row-odd"><td>server_ver</td>
<td>str</td>
<td>FutuOpenD版本号</td>
</tr>
<tr class="row-even"><td>trd_logined</td>
<td>bool</td>
<td>True：已登录交易服务器，False: 未登录交易服务器</td>
</tr>
<tr class="row-odd"><td>qot_logined</td>
<td>bool</td>
<td>True：已登录行情服务器，False: 未登录行情服务器</td>
</tr>
<tr class="row-even"><td>timestamp</td>
<td>str</td>
<td>当前格林威治时间戳(秒）</td>
</tr>
<tr class="row-odd"><td>local_timestamp</td>
<td>float</td>
<td>FutuOpenD运行机器的当前时间戳(秒)</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_global_state</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-stock-quote">
<h4>get_stock_quote<a class="headerlink" href="#get-stock-quote" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_quote">
<code class="descname">get_stock_quote</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_quote" title="Permalink to this definition">¶</a></dt>
<dd><p>获取订阅股票报价的实时数据，有订阅要求限制</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code_list</strong> &#8211; 股票代码列表，必须确保code_list中的股票均订阅成功后才能够执行</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="11%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>data_date</td>
<td>str</td>
<td>日期</td>
</tr>
<tr class="row-even"><td>data_time</td>
<td>str</td>
<td>时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>last_price</td>
<td>float</td>
<td>最新价格</td>
</tr>
<tr class="row-even"><td>open_price</td>
<td>float</td>
<td>今日开盘价</td>
</tr>
<tr class="row-odd"><td>high_price</td>
<td>float</td>
<td>最高价格</td>
</tr>
<tr class="row-even"><td>low_price</td>
<td>float</td>
<td>最低价格</td>
</tr>
<tr class="row-odd"><td>prev_close_price</td>
<td>float</td>
<td>昨收盘价格</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交数量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-even"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>amplitude</td>
<td>int</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>listing_date</td>
<td>str</td>
<td>上市日期 (yyyy-MM-dd)</td>
</tr>
<tr class="row-even"><td>price_spread</td>
<td>float</td>
<td>当前向上的价差，亦即摆盘数据的卖档的相邻档位的报价差</td>
</tr>
<tr class="row-odd"><td>dark_status</td>
<td>str</td>
<td>暗盘交易状态，见 <a class="reference external" href="Base_API.html#darkstatus">DarkStatus</a></td>
</tr>
<tr class="row-even"><td>sec_status</td>
<td>str</td>
<td>股票状态，见 <a class="reference external" href="Base_API.html#securitystatus">SecurityStatus</a></td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-even"><td>contract_size</td>
<td>int</td>
<td>每份合约数</td>
</tr>
<tr class="row-odd"><td>open_interest</td>
<td>int</td>
<td>未平仓合约数</td>
</tr>
<tr class="row-even"><td>implied_volatility</td>
<td>float</td>
<td>隐含波动率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>premium</td>
<td>float</td>
<td>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>delta</td>
<td>float</td>
<td>希腊值 Delta</td>
</tr>
<tr class="row-odd"><td>gamma</td>
<td>float</td>
<td>希腊值 Gamma</td>
</tr>
<tr class="row-even"><td>vega</td>
<td>float</td>
<td>希腊值 Vega</td>
</tr>
<tr class="row-odd"><td>theta</td>
<td>float</td>
<td>希腊值 Theta</td>
</tr>
<tr class="row-even"><td>rho</td>
<td>float</td>
<td>希腊值 Rho</td>
</tr>
<tr class="row-odd"><td>net_open_interest</td>
<td>int</td>
<td>净未平仓合约数</td>
</tr>
<tr class="row-even"><td>expiry_date_distance</td>
<td>int</td>
<td>距离到期日天数，负数表示已过期</td>
</tr>
<tr class="row-odd"><td>contract_nominal_value</td>
<td>float</td>
<td>合约名义金额</td>
</tr>
<tr class="row-even"><td>owner_lot_multiplier</td>
<td>float</td>
<td>相等正股手数，指数期权无该字段</td>
</tr>
<tr class="row-odd"><td>option_area_type</td>
<td>str</td>
<td>期权地区类型，见 <a class="reference external" href="Base_API.html#optionareatype">OptionAreaType</a></td>
</tr>
<tr class="row-even"><td>contract_multiplier</td>
<td>float</td>
<td>合约乘数，指数期权特有字段</td>
</tr>
<tr class="row-odd"><td>pre_price</td>
<td>float</td>
<td>盘前价格</td>
</tr>
<tr class="row-even"><td>pre_high_price</td>
<td>float</td>
<td>盘前最高价</td>
</tr>
<tr class="row-odd"><td>pre_low_price</td>
<td>float</td>
<td>盘前最低价</td>
</tr>
<tr class="row-even"><td>pre_volume</td>
<td>int</td>
<td>盘前成交量</td>
</tr>
<tr class="row-odd"><td>pre_turnover</td>
<td>float</td>
<td>盘前成交额</td>
</tr>
<tr class="row-even"><td>pre_change_val</td>
<td>float</td>
<td>盘前涨跌额</td>
</tr>
<tr class="row-odd"><td>pre_change_rate</td>
<td>float</td>
<td>盘前涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>pre_amplitude</td>
<td>float</td>
<td>盘前振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>after_price</td>
<td>float</td>
<td>盘后价格</td>
</tr>
<tr class="row-even"><td>after_high_price</td>
<td>float</td>
<td>盘后最高价</td>
</tr>
<tr class="row-odd"><td>after_low_price</td>
<td>float</td>
<td>盘后最低价</td>
</tr>
<tr class="row-even"><td>after_volume</td>
<td>int</td>
<td>盘后成交量，科创板支持此数据。</td>
</tr>
<tr class="row-odd"><td>after_turnover</td>
<td>float</td>
<td>盘后成交额，科创板支持此数据。</td>
</tr>
<tr class="row-even"><td>after_change_val</td>
<td>float</td>
<td>盘后涨跌额</td>
</tr>
<tr class="row-odd"><td>after_change_rate</td>
<td>float</td>
<td>盘后涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>after_amplitude</td>
<td>float</td>
<td>盘后振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>last_settle_price</td>
<td>float</td>
<td>昨结，期货特有字段</td>
</tr>
<tr class="row-even"><td>position</td>
<td>float</td>
<td>持仓量，期货特有字段</td>
</tr>
<tr class="row-odd"><td>position_change</td>
<td>float</td>
<td>日增仓，期货特有字段</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">code_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;US.AAPL210115C185000&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">code_list</span><span class="p">,</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_quote</span><span class="p">(</span><span class="n">code_list</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="get-rt-ticker">
<h4>get_rt_ticker<a class="headerlink" href="#get-rt-ticker" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rt_ticker">
<code class="descname">get_rt_ticker</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>num=500</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rt_ticker" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定股票的实时逐笔。取最近num个逐笔</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>num</strong> &#8211; 最近ticker个数，最多可获取1000个</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>sequence</td>
<td>int</td>
<td>逐笔序号</td>
</tr>
<tr class="row-even"><td>time</td>
<td>str</td>
<td>成交时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>price</td>
<td>float</td>
<td>成交价格</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交数量（股数）</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交金额</td>
</tr>
<tr class="row-even"><td>ticker_direction</td>
<td>str</td>
<td>逐笔方向</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>str</td>
<td>逐笔类型，参见 <a class="reference external" href="Base_API.html#tickertype">TickerType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rt_ticker</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rt-ticker-limit"><span class="std std-ref">获取逐笔限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-cur-kline">
<h4>get_cur_kline<a class="headerlink" href="#get-cur-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_cur_kline">
<code class="descname">get_cur_kline</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>num</em>, <em>ktype=SubType.K_DAY</em>, <em>autype=AuType.QFQ</em><span class="sig-paren">)</span><a class="headerlink" href="#get_cur_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>实时获取指定股票最近num个K线数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码</li>
<li><strong>num</strong> &#8211; k线数据个数，最多1000根</li>
<li><strong>ktype</strong> &#8211; k线类型，参见 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></li>
<li><strong>autype</strong> &#8211; 复权类型，参见 <a class="reference external" href="Base_API.html#autype-k">AuType</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="10%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>last_close</td>
<td>float</td>
<td>昨收价（即前一个时间的收盘价。为了效率原因，第一个数据的昨收价可能为0）</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_cur_kline</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">SubType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-cur-kline-limit"><span class="std std-ref">获取K线限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-order-book">
<h4>get_order_book<a class="headerlink" href="#get-order-book" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_order_book">
<code class="descname">get_order_book</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_order_book" title="Permalink to this definition">¶</a></dt>
<dd><p>获取实时摆盘数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 股票代码</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)</td>
</tr>
</tbody>
</table>
<p>ret == RET_OK 返回字典，数据格式如下:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>{
&#39;code&#39;: 股票代码
&#39;svr_recv_time_bid&#39;: 富途服务器从交易所收到数据的时间(for bid) 部分数据的接收时间为零，例如服务器重启或第一次推送的缓存数据。
&#39;svr_recv_time_ask&#39;: 富途服务器从交易所收到数据的时间(for ask)
&#39;Ask&#39;: [ (ask_price1, ask_volume1，order_num), (ask_price2, ask_volume2, order_num),…]
&#39;Bid&#39;: [ (bid_price1, bid_volume1, order_num), (bid_price2, bid_volume2, order_num),…]
}
</pre></div>
</div>
<div class="line-block">
<div class="line">&#8216;Ask&#8217;：卖盘</div>
<div class="line">&#8216;Bid&#8217;: 买盘</div>
<div class="line">每个元组的含义是(委托价格，委托数量，委托订单数)</div>
</div>
<p>ret != RET_OK 返回错误字符串</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_order_book</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-multi-points-history-kline">
<h4><span class="strike">get_multi_points_history_kline</span><a class="headerlink" href="#get-multi-points-history-kline" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_multi_points_history_kline">
<code class="descname">get_multi_points_history_kline</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em>, <em>dates</em>, <em>fields</em>, <em>ktype=KLType.K_DAY</em>, <em>autype=AuType.QFQ</em>, <em>no_data_mode=KLNoDataMode.FORWARD</em><span class="sig-paren">)</span><a class="headerlink" href="#get_multi_points_history_kline" title="Permalink to this definition">¶</a></dt>
<dd><p>从本地历史K线中获取多支股票多个时间点的指定数据列</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code_list</strong> &#8211; 单个或多个股票 &#8216;HK.00700&#8217;  or  [&#8216;HK.00700&#8217;, &#8216;HK.00001&#8217;]</li>
<li><strong>dates</strong> &#8211; 单个或多个日期 &#8216;2017-01-01&#8217; or [&#8216;2017-01-01&#8217;, &#8216;2017-01-02&#8217;]，最多5个时间点</li>
<li><strong>fields</strong> &#8211; 单个或多个数据列 KL_FIELD.ALL or [KL_FIELD.DATE_TIME, KL_FIELD.OPEN]</li>
<li><strong>ktype</strong> &#8211; K线类型 <a class="reference external" href="Base_API.html#kltype-k">KLType</a></li>
<li><strong>autype</strong> &#8211; 复权类型 <a class="reference external" href="Base_API.html#autype-k">AuType</a></li>
<li><strong>no_data_mode</strong> &#8211; 指定时间为非交易日时，对应的k线数据取值模式，参见 <a class="reference external" href="Base_API.html#klnodatamode-k">KLNoDataMode</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，固定表头包括&#8217;code&#8217;(代码) &#8216;time_point&#8217;(指定的日期) &#8216;data_status&#8217; (KLDataStatus)。数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>time_point</td>
<td>str</td>
<td>请求的时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>data_status</td>
<td>str</td>
<td>数据点是否有效，参见 <a class="reference external" href="Base_API.html#kldatastatus-k">KLDataStatus</a></td>
</tr>
<tr class="row-odd"><td>time_key</td>
<td>str</td>
<td>k线时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>open</td>
<td>float</td>
<td>开盘价</td>
</tr>
<tr class="row-odd"><td>close</td>
<td>float</td>
<td>收盘价</td>
</tr>
<tr class="row-even"><td>high</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>pe_ratio</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>volume</td>
<td>int</td>
<td>成交量</td>
</tr>
<tr class="row-odd"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-even"><td>change_rate</td>
<td>float</td>
<td>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>last_close</td>
<td>float</td>
<td>昨收价</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_multi_points_history_kline</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;2017-06-20&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-06-25&#39;</span><span class="p">],</span> <span class="n">KL_FIELD</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">KLType</span><span class="o">.</span><span class="n">K_DAY</span><span class="p">,</span> <span class="n">AuType</span><span class="o">.</span><span class="n">QFQ</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-referencestock-list">
<h4>get_referencestock_list<a class="headerlink" href="#get-referencestock-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_referencestock_list">
<code class="descname">get_referencestock_list</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>reference_type</em><span class="sig-paren">)</span><a class="headerlink" href="#get_referencestock_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取证券的关联数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 证券id，str，例如HK.00700</li>
<li><strong>reference_type</strong> &#8211; 要获得的相关数据，参见 <a class="reference external" href="Base_API.html#securityreferencetype">SecurityReferenceType</a> 。例如WARRANT，表示获取正股相关的窝轮</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<blockquote>
<div><p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="10%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>证券代码</td>
</tr>
<tr class="row-odd"><td>lot_size</td>
<td>int</td>
<td>每手股数，期货表示合约乘数</td>
</tr>
<tr class="row-even"><td>stock_type</td>
<td>str</td>
<td>证券类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-odd"><td>stock_name</td>
<td>str</td>
<td>证券名字</td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>wrt_valid</td>
<td>bool</td>
<td>是否是窝轮，如果为True，下面wrt开头的字段有效</td>
</tr>
<tr class="row-even"><td>wrt_type</td>
<td>str</td>
<td>窝轮类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>wrt_code</td>
<td>str</td>
<td>所属正股</td>
</tr>
<tr class="row-even"><td>future_valid</td>
<td>bool</td>
<td>是否是期货，如果为True，下面future开头的字段有效</td>
</tr>
<tr class="row-odd"><td>future_main_contract</td>
<td>bool</td>
<td>是否主连合约（期货特有字段）</td>
</tr>
<tr class="row-even"><td>future_last_trade_time</td>
<td>string</td>
<td>最后交易时间（期货特有字段，主连，当月，下月等无该字段）</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_referencestock_list</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">SecurityReferenceType</span><span class="o">.</span><span class="n">WARRANT</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-referencestock-list-limit"><span class="std std-ref">获取股票关联数据限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-owner-plate">
<h4>get_owner_plate<a class="headerlink" href="#get-owner-plate" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_owner_plate">
<code class="descname">get_owner_plate</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_owner_plate" title="Permalink to this definition">¶</a></dt>
<dd><p>获取单支或多支股票的所属板块信息列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code_list</strong> &#8211; 股票代码列表，仅支持正股、指数。list或str。例如：[&#8216;HK.00700&#8217;, &#8216;HK.00001&#8217;]或者&#8217;HK.00700,HK.00001&#8217;，最多可传入200只股票</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>证券代码</td>
</tr>
<tr class="row-odd"><td>plate_code</td>
<td>str</td>
<td>板块代码</td>
</tr>
<tr class="row-even"><td>plate_name</td>
<td>str</td>
<td>板块名字</td>
</tr>
<tr class="row-odd"><td>plate_type</td>
<td>str</td>
<td>板块类型（行业板块或概念板块），查看 <a class="reference external" href="Base_API.html#plate">Plate</a></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">code_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="s1">&#39;HK.00001&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_owner_plate</span><span class="p">(</span><span class="n">code_list</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-owner-plate-limit"><span class="std std-ref">获取股票所属板块限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-holding-change-list">
<h4>get_holding_change_list<a class="headerlink" href="#get-holding-change-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_holding_change_list">
<code class="descname">get_holding_change_list</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>holder_type</em>, <em>start</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_holding_change_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取大股东持股变动列表,只提供美股数据,并最多只返回前100个</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码. 例如：&#8217;US.AAPL&#8217;</li>
<li><strong>holder_type</strong> &#8211; 持有者类别，查看 <a class="reference external" href="Base_API.html#stockholder">StockHolder</a></li>
<li><strong>start</strong> &#8211; 开始时间. 例如：&#8216;2016-10-01&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束时间，例如：&#8216;2017-10-01&#8217;。
start与end的组合如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，data.DataFrame数据, 数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="5%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>holder_name</td>
<td>str</td>
<td>高管名称</td>
</tr>
<tr class="row-odd"><td>holding_qty</td>
<td>float</td>
<td>持股数</td>
</tr>
<tr class="row-even"><td>holding_ratio</td>
<td>float</td>
<td>持股比例（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>change_qty</td>
<td>float</td>
<td>变动数</td>
</tr>
<tr class="row-even"><td>change_ratio</td>
<td>float</td>
<td>变动比例（该字段为百分比字段，默认不展示%，如20实际对应20%。是相对于自身的比例，而不是总的。如总股本1万股，持有100股，持股百分比是1%，卖掉50股，变动比例是50%，而不是0.5%）</td>
</tr>
<tr class="row-odd"><td>time</td>
<td>str</td>
<td>发布时间（美股的时间默认是美东）</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_holding_change_list</span><span class="p">(</span><span class="s1">&#39;US.AAPL&#39;</span><span class="p">,</span> <span class="n">StockHolder</span><span class="o">.</span><span class="n">INSTITUTE</span><span class="p">,</span> <span class="s1">&#39;2018-10-01&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-holding-change-list-limit"><span class="std std-ref">获取持股变化列表限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-option-chain">
<h4>get_option_chain<a class="headerlink" href="#get-option-chain" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_option_chain">
<code class="descname">get_option_chain</code><span class="sig-paren">(</span><em>self</em>, <em>code</em>, <em>index_option_type=IndexOptionType.NORMAL</em>, <em>start=None</em>, <em>end=None</em>, <em>option_type=OptionType.ALL</em>, <em>option_cond_type=OptionCondType.ALL</em><span class="sig-paren">)</span><a class="headerlink" href="#get_option_chain" title="Permalink to this definition">¶</a></dt>
<dd><p>通过标的股查询期权</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> &#8211; 股票代码,例如：&#8217;HK.02318&#8217;</li>
<li><strong>index_option_type</strong> &#8211; 指数期权类型，查看 <a class="reference external" href="Base_API.html#indexoptiontype">IndexOptionType</a>。正股和其它类型股票忽略该参数。</li>
<li><strong>start</strong> &#8211; 开始日期，该日期指到期日，例如&#8216;2017-08-01&#8217;</li>
<li><strong>end</strong> &#8211; <p>结束日期（包括这一天），该日期指到期日，例如&#8216;2017-08-30&#8217;。 注意，时间范围最多30天。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前30天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后30天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>start为当前日期，end往后30天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><strong>option_type</strong> &#8211; 期权类型,,默认全部,全部/看涨/看跌，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></li>
<li><strong>option_cond_type</strong> &#8211; 默认全部,全部/价内/价外，查看 <a class="reference external" href="Base_API.html#optioncondtype">OptionCondType</a></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(ret, data)</p>
<p>ret == RET_OK 返回pd dataframe数据，数据列格式如下</p>
<p>ret != RET_OK 返回错误字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="12%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数（指数期权无该字段）</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>标的股</td>
</tr>
<tr class="row-even"><td>strike_time</td>
<td>str</td>
<td>行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行权价</td>
</tr>
<tr class="row-even"><td>suspension</td>
<td>bool</td>
<td>是否停牌(True表示停牌)</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>index_option_type</td>
<td>str</td>
<td>指数期权类型</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_option_chain</span><span class="p">(</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">,</span> <span class="n">IndexOptionType</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span><span class="s1">&#39;2018-08-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-08-18&#39;</span><span class="p">,</span> <span class="n">OptionType</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="n">OptionCondType</span><span class="o">.</span><span class="n">OUTSIDE</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-option-chain-limit"><span class="std std-ref">获取期权链限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-history-kl-quota">
<h4>get_history_kl_quota<a class="headerlink" href="#get-history-kl-quota" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_history_kl_quota">
<code class="descname">get_history_kl_quota</code><span class="sig-paren">(</span><em>self</em>, <em>get_detail=False</em><span class="sig-paren">)</span><a class="headerlink" href="#get_history_kl_quota" title="Permalink to this definition">¶</a></dt>
<dd><p>获取已使用过的额度，即当前周期内已经下载过多少只股票</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>get_detail</strong> &#8211; <p>是否返回详细拉取过的历史纪录</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>拉取的股票代码</td>
</tr>
<tr class="row-odd"><td>request_time</td>
<td>str</td>
<td>最后一次拉取的时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回(used_quota, remain_quota, detail_list)</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>used_quota</td>
<td>int32</td>
<td>已使用过的额度，即当前周期内已经下载过多少只股票</td>
</tr>
<tr class="row-odd"><td>remain_quota</td>
<td>int32</td>
<td>剩余额度，30天后额度会恢复</td>
</tr>
<tr class="row-even"><td>detail_list</td>
<td>dict list</td>
<td>get_detail为True时返回，每只拉取过的股票的下载时间</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_history_kl_quota</span><span class="p">())</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="get-rehab">
<h4>get_rehab<a class="headerlink" href="#get-rehab" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_rehab">
<code class="descname">get_rehab</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_rehab" title="Permalink to this definition">¶</a></dt>
<dd><p>获取给定股票的复权因子</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ex_div_date</td>
<td>str</td>
<td>除权除息日</td>
</tr>
<tr class="row-odd"><td>split_ratio</td>
<td>float</td>
<td>拆合股比例（该字段为比例字段，展示为小数表示）例如，对于5股合1股为5.0，对于1股拆5股为0.2</td>
</tr>
<tr class="row-even"><td>per_cash_div</td>
<td>float</td>
<td>每股派现</td>
</tr>
<tr class="row-odd"><td>per_share_div_ratio</td>
<td>float</td>
<td>每股送股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>per_share_trans_ratio</td>
<td>float</td>
<td>每股转增股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-odd"><td>allotment_ratio</td>
<td>float</td>
<td>每股配股比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>allotment_price</td>
<td>float</td>
<td>配股价</td>
</tr>
<tr class="row-odd"><td>stk_spo_ratio</td>
<td>float</td>
<td>增发比例（该字段为比例字段，展示为小数表示）</td>
</tr>
<tr class="row-even"><td>stk_spo_price</td>
<td>float</td>
<td>增发价格</td>
</tr>
<tr class="row-odd"><td>forward_adj_factorA</td>
<td>float</td>
<td>前复权因子A</td>
</tr>
<tr class="row-even"><td>forward_adj_factorB</td>
<td>float</td>
<td>前复权因子B</td>
</tr>
<tr class="row-odd"><td>backward_adj_factorA</td>
<td>float</td>
<td>后复权因子A</td>
</tr>
<tr class="row-even"><td>backward_adj_factorB</td>
<td>float</td>
<td>后复权因子B</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_rehab</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-rehab-limit"><span class="std std-ref">在线获取单只股票复权信息限制</span></a></li>
<li>复权后价格 = 复权前价格 * 复权因子a + 复权因子b</li>
</ul>
</div>
</div>
<div class="section" id="get-warrant">
<h4>get_warrant<a class="headerlink" href="#get-warrant" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_warrant">
<code class="descname">get_warrant</code><span class="sig-paren">(</span><em>self</em>, <em>stock_owner=''</em>, <em>req=None</em><span class="sig-paren">)</span><a class="headerlink" href="#get_warrant" title="Permalink to this definition">¶</a></dt>
<dd><p>通过标的股查询窝轮</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stock_owner</strong> &#8211; 所属正股的股票代码,例如：&#8217;HK.00700&#8217;，会去找腾讯的窝轮，注意有些股票没有对应窝轮牛熊。</li>
<li><strong>req</strong> &#8211; 请求参数组合，from futu.quote.quote_get_warrant import Request</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="10%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>begin</td>
<td>int</td>
<td>数据起始点</td>
</tr>
<tr class="row-odd"><td>num</td>
<td>int</td>
<td>请求数据个数，最大200</td>
</tr>
<tr class="row-even"><td>sort_field</td>
<td>SortField</td>
<td>根据哪个字段排序 <a class="reference external" href="Base_API.html#sortfield">SortField</a></td>
</tr>
<tr class="row-odd"><td>ascend</td>
<td>bool</td>
<td>升序True, 降序False</td>
</tr>
<tr class="row-even"><td>type_list</td>
<td>list</td>
<td>窝轮类型过滤列表 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>issuer_list</td>
<td>list</td>
<td>发行人过滤列表 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></td>
</tr>
<tr class="row-even"><td>maturity_time_min</td>
<td>str</td>
<td>到期日, 到期日范围的开始时间</td>
</tr>
<tr class="row-odd"><td>maturity_time_max</td>
<td>str</td>
<td>到期日范围的结束时间</td>
</tr>
<tr class="row-even"><td>ipo_period</td>
<td>str</td>
<td>上市日 参见 <a class="reference external" href="Base_API.html#ipoperiod">IpoPeriod</a></td>
</tr>
<tr class="row-odd"><td>price_type</td>
<td>str</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> , 界内证暂不支持界内外筛选</td>
</tr>
<tr class="row-even"><td>status</td>
<td>str</td>
<td>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></td>
</tr>
<tr class="row-odd"><td>cur_price_min</td>
<td>float</td>
<td>最新价过滤起点</td>
</tr>
<tr class="row-even"><td>cur_price_max</td>
<td>float</td>
<td>最新价过滤终点</td>
</tr>
<tr class="row-odd"><td>strike_price_min</td>
<td>float</td>
<td>行使价过滤起点</td>
</tr>
<tr class="row-even"><td>strike_price_max</td>
<td>float</td>
<td>行使价过滤终点</td>
</tr>
<tr class="row-odd"><td>street_min</td>
<td>float</td>
<td>街货占比, 过滤起点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>street_max</td>
<td>float</td>
<td>街货占比, 过滤终点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>conversion_min</td>
<td>float</td>
<td>换股比率过滤起点</td>
</tr>
<tr class="row-even"><td>conversion_max</td>
<td>float</td>
<td>换股比率过滤终点</td>
</tr>
<tr class="row-odd"><td>vol_min</td>
<td>unsigned int</td>
<td>成交量过滤起点</td>
</tr>
<tr class="row-even"><td>vol_max</td>
<td>unsigned int</td>
<td>成交量过滤终点</td>
</tr>
<tr class="row-odd"><td>premium_min</td>
<td>float</td>
<td>溢价, 过滤起点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>premium_max</td>
<td>float</td>
<td>溢价, 过滤终点（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>leverage_ratio_min</td>
<td>float</td>
<td>杠杆比率过滤起点</td>
</tr>
<tr class="row-even"><td>leverage_ratio_max</td>
<td>float</td>
<td>杠杆比率过滤终点</td>
</tr>
<tr class="row-odd"><td>delta_min</td>
<td>float</td>
<td>对冲值过滤起点, 仅认购认沽支持该字段过滤</td>
</tr>
<tr class="row-even"><td>delta_max</td>
<td>float</td>
<td>对冲值过滤终点, 仅认购认沽支持该字段过滤</td>
</tr>
<tr class="row-odd"><td>implied_min</td>
<td>float</td>
<td>引伸波幅过滤起点, 仅认购认沽支持该字段过滤</td>
</tr>
<tr class="row-even"><td>implied_max</td>
<td>float</td>
<td>引伸波幅过滤终点, 仅认购认沽支持该字段过滤</td>
</tr>
<tr class="row-odd"><td>recovery_price_min</td>
<td>float</td>
<td>收回价过滤起点, 仅牛熊证支持该字段过滤</td>
</tr>
<tr class="row-even"><td>recovery_price_max</td>
<td>float</td>
<td>收回价过滤终点, 仅牛熊证支持该字段过滤</td>
</tr>
<tr class="row-odd"><td>price_recovery_ratio_min</td>
<td>float</td>
<td>正股距收回价, 过滤起点, 仅牛熊证支持该字段过滤（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>price_recovery_ratio_max</td>
<td>float</td>
<td>正股距收回价, 过滤终点, 仅牛熊证支持该字段过滤（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">return:</th><td class="field-body"><p class="first">(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回（warrant_data_list,last_page, all_count）</p>
<p>warrant_data_list pd dataframe数据，数据列格式如下:</p>
<p>last_page 是否是最后一页</p>
<p class="last">all_count 列表总数量</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="13%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock</td>
<td>str</td>
<td>窝轮代码</td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>所属正股</td>
</tr>
<tr class="row-even"><td>type</td>
<td>str</td>
<td>窝轮类型 参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>issuer</td>
<td>Issuer</td>
<td>发行人 参见 <a class="reference external" href="Base_API.html#issuer">Issuer</a></td>
</tr>
<tr class="row-even"><td>maturity_time</td>
<td>str</td>
<td>到期日</td>
</tr>
<tr class="row-odd"><td>maturity_timestamp</td>
<td>float</td>
<td><span class="strike">到期日时间戳</span></td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>list_timestamp</td>
<td>float</td>
<td><span class="strike">上市时间戳</span></td>
</tr>
<tr class="row-even"><td>last_trade_time</td>
<td>str</td>
<td>最后交易日</td>
</tr>
<tr class="row-odd"><td>last_trade_timestamp</td>
<td>float</td>
<td><span class="strike">最后交易日时间戳</span></td>
</tr>
<tr class="row-even"><td>recovery_price</td>
<td>float</td>
<td>收回价，仅牛熊证支持该字段</td>
</tr>
<tr class="row-odd"><td>conversion_ratio</td>
<td>float</td>
<td>换股比率</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手数量</td>
</tr>
<tr class="row-odd"><td>strike_price</td>
<td>float</td>
<td>行使价</td>
</tr>
<tr class="row-even"><td>last_close_price</td>
<td>float</td>
<td>昨收价</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名称</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>当前价</td>
</tr>
<tr class="row-odd"><td>price_change_val</td>
<td>float</td>
<td>涨跌额</td>
</tr>
<tr class="row-even"><td>status</td>
<td>str</td>
<td>窝轮状态 参见 <a class="reference external" href="Base_API.html#warrantstatus">WarrantStatus</a></td>
</tr>
<tr class="row-odd"><td>bid_price</td>
<td>float</td>
<td>买入价</td>
</tr>
<tr class="row-even"><td>ask_price</td>
<td>float</td>
<td>卖出价</td>
</tr>
<tr class="row-odd"><td>bid_vol</td>
<td>int</td>
<td>买量</td>
</tr>
<tr class="row-even"><td>ask_vol</td>
<td>int</td>
<td>卖量</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>unsigned int</td>
<td>成交量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>成交额</td>
</tr>
<tr class="row-odd"><td>score</td>
<td>float</td>
<td>综合评分</td>
</tr>
<tr class="row-even"><td>premium</td>
<td>float</td>
<td>溢价（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>break_even_point</td>
<td>float</td>
<td>打和点</td>
</tr>
<tr class="row-even"><td>leverage</td>
<td>float</td>
<td>杠杆比率（倍）</td>
</tr>
<tr class="row-odd"><td>ipop</td>
<td>float</td>
<td>价内/价外（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>price_recovery_ratio</td>
<td>float</td>
<td>正股距收回价，仅牛熊证支持该字段（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>conversion_price</td>
<td>float</td>
<td>换股价</td>
</tr>
<tr class="row-even"><td>street_rate</td>
<td>float</td>
<td>街货占比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>street_vol</td>
<td>int</td>
<td>街货量</td>
</tr>
<tr class="row-even"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>issue_size</td>
<td>int</td>
<td>发行量</td>
</tr>
<tr class="row-even"><td>high_price</td>
<td>float</td>
<td>最高价</td>
</tr>
<tr class="row-odd"><td>low_price</td>
<td>float</td>
<td>最低价</td>
</tr>
<tr class="row-even"><td>implied_volatility</td>
<td>float</td>
<td>引伸波幅，仅认购认沽支持该字段</td>
</tr>
<tr class="row-odd"><td>delta</td>
<td>float</td>
<td>对冲值，仅认购认沽支持该字段</td>
</tr>
<tr class="row-even"><td>effective_leverage</td>
<td>float</td>
<td>有效杠杆</td>
</tr>
<tr class="row-odd"><td>upper_strike_price</td>
<td>float</td>
<td>上限价，仅界内证支持该字段</td>
</tr>
<tr class="row-even"><td>lower_strike_price</td>
<td>float</td>
<td>下限价，仅界内证支持该字段</td>
</tr>
<tr class="row-odd"><td>inline_price_status</td>
<td>str</td>
<td>界内界外 参见 <a class="reference external" href="Base_API.html#pricetype">PriceType</a> ，仅界内证支持该字段</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">futu.quote.quote_get_warrant</span> <span class="kn">import</span> <span class="n">Request</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">req</span><span class="o">=</span><span class="n">Request</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">sort_field</span><span class="o">=</span><span class="n">SortField</span><span class="o">.</span><span class="n">TURNOVER</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_warrant</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">,</span><span class="n">req</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-warrant-limit"><span class="std std-ref">获取窝轮限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-flow">
<h4>get_capital_flow<a class="headerlink" href="#get-capital-flow" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_capital_flow">
<code class="descname">get_capital_flow</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>获取个股资金流向</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="9%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>in_flow</td>
<td>float</td>
<td>净流入的资金额度</td>
</tr>
<tr class="row-odd"><td>capital_flow_item_time</td>
<td>string</td>
<td>开始时间字符串,以分钟为单位</td>
</tr>
<tr class="row-even"><td>last_valid_time</td>
<td>string</td>
<td>数据最后有效时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_flow</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-flow-limit"><span class="std std-ref">获取资金流向限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-capital-distribution">
<h4>get_capital_distribution<a class="headerlink" href="#get-capital-distribution" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_capital_distribution">
<code class="descname">get_capital_distribution</code><span class="sig-paren">(</span><em>self</em>, <em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#get_capital_distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>获取个股资金分布</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> &#8211; 需要查询的股票代码.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="9%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>capital_in_big</td>
<td>float</td>
<td>流入资金额度，大单</td>
</tr>
<tr class="row-odd"><td>capital_in_mid</td>
<td>float</td>
<td>流入资金额度，中单</td>
</tr>
<tr class="row-even"><td>capital_in_small</td>
<td>float</td>
<td>流入资金额度，小单</td>
</tr>
<tr class="row-odd"><td>capital_out_big</td>
<td>float</td>
<td>流出资金额度，大单</td>
</tr>
<tr class="row-even"><td>capital_out_mid</td>
<td>float</td>
<td>流出资金额度，中单</td>
</tr>
<tr class="row-odd"><td>capital_out_small</td>
<td>float</td>
<td>流出资金额度，小单</td>
</tr>
<tr class="row-even"><td>update_time</td>
<td>str</td>
<td>更新时间字符串</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_capital_distribution</span><span class="p">(</span><span class="s2">&quot;HK.00700&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-capital-distribution-limit"><span class="std std-ref">获取资金分布限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-user-security">
<h4>get_user_security<a class="headerlink" href="#get-user-security" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_user_security">
<code class="descname">get_user_security</code><span class="sig-paren">(</span><em>self</em>, <em>group_name</em><span class="sig-paren">)</span><a class="headerlink" href="#get_user_security" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定分组的自选股列表（不支持持仓分组）</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>group_name</strong> &#8211; 需要查询的自选股分组名称.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK 返回pd dataframe数据</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>名字</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数，期权表示每份合约股数，期货表示合约乘数</td>
</tr>
<tr class="row-odd"><td>stock_type</td>
<td>str</td>
<td>股票类型，参见 <a class="reference external" href="Base_API.html#securitytype">SecurityType</a></td>
</tr>
<tr class="row-even"><td>stock_child_type</td>
<td>str</td>
<td>窝轮子类型，参见 <a class="reference external" href="Base_API.html#wrttype">WrtType</a></td>
</tr>
<tr class="row-odd"><td>stock_owner</td>
<td>str</td>
<td>窝轮所属正股的代码，或期权标的股的代码</td>
</tr>
<tr class="row-even"><td>option_type</td>
<td>str</td>
<td>期权类型，查看 <a class="reference external" href="Base_API.html#optiontype">OptionType</a></td>
</tr>
<tr class="row-odd"><td>strike_time</td>
<td>str</td>
<td>期权行权日（港股A股默认是北京时间）</td>
</tr>
<tr class="row-even"><td>strike_price</td>
<td>float</td>
<td>期权行权价</td>
</tr>
<tr class="row-odd"><td>suspension</td>
<td>bool</td>
<td>期权是否停牌(True表示停牌)</td>
</tr>
<tr class="row-even"><td>listing_date</td>
<td>str</td>
<td>上市时间</td>
</tr>
<tr class="row-odd"><td>stock_id</td>
<td>int</td>
<td>股票id</td>
</tr>
<tr class="row-even"><td>delisting</td>
<td>bool</td>
<td>是否退市</td>
</tr>
<tr class="row-odd"><td>main_contract</td>
<td>bool</td>
<td>是否主连合约</td>
</tr>
<tr class="row-even"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_user_security</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-user-security-limit"><span class="std std-ref">获取指定分组的自选股列表</span></a></li>
</ul>
</div>
</div>
<div class="section" id="modify-user-security">
<h4>modify_user_security<a class="headerlink" href="#modify-user-security" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="modify_user_security">
<code class="descname">modify_user_security</code><span class="sig-paren">(</span><em>self</em>, <em>group_name</em>, <em>op</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#modify_user_security" title="Permalink to this definition">¶</a></dt>
<dd><p>修改指定分组的自选股列表（不支持系统分组）</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>group_name</strong> &#8211; 需要修改的自选股分组名称.</li>
<li><strong>op</strong> &#8211; 操作枚举值.查看 <a class="reference external" href="Base_API.html#modifyusersecurityop">ModifyUserSecurityOp</a></li>
<li><strong>code_list</strong> &#8211; 股票列表，[&#8216;HK.00700&#8217;,&#8217;HK.00701&#8217;]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>(ret, data)</p>
<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK &#8216;success&#8217;</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">modify_user_security</span><span class="p">(</span><span class="s2">&quot;MyGroup&quot;</span><span class="p">,</span> <span class="n">ModifyUserSecurityOp</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#modify-user-security-limit"><span class="std std-ref">修改指定分组的自选股列表</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-stock-filter">
<h4>get_stock_filter<a class="headerlink" href="#get-stock-filter" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_stock_filter">
<code class="descname">get_stock_filter</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>filter_list</em>, <em>plate_code=None</em>, <em>begin=0</em>, <em>num=200</em><span class="sig-paren">)</span><a class="headerlink" href="#get_stock_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>获取条件选股</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></li>
<li><strong>filter_list</strong> &#8211; <div class="line-block">
<div class="line">简单属性筛选条件的枚举值，筛选条件是SimpleFilter，AccumulateFilter或FinancialFilter类型数据的list对象field。</div>
</div>
<div class="line-block">
<div class="line">SimpleFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="8%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 简单属性，取值见 <a class="reference external" href="Base_API.html#stockfield-simplefilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限，闭区间</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限，闭区间</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否需要筛选。</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">AccumulateFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 累积字段，取值见 <a class="reference external" href="Base_API.html#stockfield-accumulatefilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限，闭区间</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限，闭区间</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否需要筛选。</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></td>
</tr>
<tr class="row-odd"><td>days</td>
<td>int</td>
<td>所筛选的数据的累计天数</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">FinancialFilter对象field的相关参数如下：</div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_field</td>
<td>str</td>
<td>StockField 财务字段，取值见 <a class="reference external" href="Base_API.html#stockfield-financialfilter">StockField</a></td>
</tr>
<tr class="row-odd"><td>filter_min</td>
<td>float</td>
<td>区间下限，闭区间</td>
</tr>
<tr class="row-even"><td>filter_max</td>
<td>float</td>
<td>区间上限，闭区间</td>
</tr>
<tr class="row-odd"><td>is_no_filter</td>
<td>bool</td>
<td>该字段是否需要筛选。</td>
</tr>
<tr class="row-even"><td>sort</td>
<td>str</td>
<td>SortDir 排序方向，默认不排序，取值见 <a class="reference external" href="Base_API.html#sortdir">SortDir</a></td>
</tr>
<tr class="row-odd"><td>quarter</td>
<td>str</td>
<td>财报累积时间，取值见 <a class="reference external" href="Base_API.html#financialquarter">FinancialQuarter</a></td>
</tr>
</tbody>
</table>
</li>
<li><strong>plate_code</strong> &#8211; 板块代码，string，例如，“SH.BK0001”，“SH.BK0002”，先利用获取子板块列表函数获取子板块代码。支持的板块代码详情请查看下面的Note。</li>
<li><strong>begin</strong> &#8211; 数据起始点</li>
<li><strong>num</strong> &#8211; 请求数据个数，最大200</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><div class="line-block">
<div class="line">(ret, data)</div>
<div class="line"><strong>ret</strong> - ret != RET_OK 返回错误字符串, ret == RET_OK 返回（last_page, all_count, stock_list）。对于不支持的板块，返回的数据是(True, 0, [])。</div>
<div class="line"><strong>last_page</strong> - 是否是最后一页</div>
<div class="line"><strong>all_count</strong> - 列表总数量</div>
<div class="line"><strong>stock_list</strong> - 返回的是SimpleFilter类型数据的list对象ret_list，对象ret_list中stock_code和stock_name默认都会返回，同时filter_list中设置的字段也会返回。返回的数据列字段如下:</div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>stock_code</td>
<td>str</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>stock_name</td>
<td>str</td>
<td>股票名字</td>
</tr>
<tr class="row-even"><td>cur_price</td>
<td>float</td>
<td>最新价</td>
</tr>
<tr class="row-odd"><td>cur_price_to_highest_52weeks_ratio</td>
<td>float</td>
<td>(现价 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>cur_price_to_lowest_52weeks_ratio</td>
<td>float</td>
<td>(现价 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>high_price_to_highest_52weeks_ratio</td>
<td>float</td>
<td>(今日最高 - 52周最高)/52周最高（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>low_price_to_lowest_52weeks_ratio</td>
<td>float</td>
<td>(今日最低 - 52周最低)/52周最低（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>volume_ratio</td>
<td>float</td>
<td>量比</td>
</tr>
<tr class="row-even"><td>bid_ask_ratio</td>
<td>float</td>
<td>委比（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>lot_price</td>
<td>float</td>
<td>每手价格</td>
</tr>
<tr class="row-even"><td>market_val</td>
<td>float</td>
<td>市值</td>
</tr>
<tr class="row-odd"><td>pe_annual</td>
<td>float</td>
<td>市盈率</td>
</tr>
<tr class="row-even"><td>pe_ttm</td>
<td>float</td>
<td>市盈率TTM</td>
</tr>
<tr class="row-odd"><td>pb_rate</td>
<td>float</td>
<td>市净率</td>
</tr>
<tr class="row-even"><td>change_rate_5min</td>
<td>float</td>
<td>五分钟价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>change_rate_begin_year</td>
<td>float</td>
<td>年初至今价格涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>change_rate</td>
<td>float</td>
<td>涨跌幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>amplitude</td>
<td>float</td>
<td>振幅（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>volume</td>
<td>float</td>
<td>日均成交量</td>
</tr>
<tr class="row-even"><td>turnover</td>
<td>float</td>
<td>日均成交额</td>
</tr>
<tr class="row-odd"><td>turnover_rate</td>
<td>float</td>
<td>换手率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>net_profit</td>
<td>float</td>
<td>净利润</td>
</tr>
<tr class="row-even"><td>net_profix_growth</td>
<td>float</td>
<td>净利润增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>sum_of_business</td>
<td>float</td>
<td>营业收入</td>
</tr>
<tr class="row-even"><td>sum_of_business_growth</td>
<td>float</td>
<td>营业同比增长率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>net_profit_rate</td>
<td>float</td>
<td>净利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>gross_profit_rate</td>
<td>float</td>
<td>毛利率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-odd"><td>debt_asset_rate</td>
<td>float</td>
<td>资产负债率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
<tr class="row-even"><td>return_on_equity_rate</td>
<td>float</td>
<td>净资产收益率（该字段为百分比字段，默认不展示%，如20实际对应20%。）</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">futu.quote.quote_stockfilter_info</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">simple_filter</span> <span class="o">=</span> <span class="n">SimpleFilter</span><span class="p">()</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_min</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">filter_max</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">stock_field</span> <span class="o">=</span> <span class="n">StockField</span><span class="o">.</span><span class="n">CUR_PRICE</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">is_no_filter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">simple_filter</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">SortDir</span><span class="o">.</span><span class="n">ASCEND</span>

<span class="n">acc_filter</span> <span class="o">=</span> <span class="n">AccumulateFilter</span><span class="p">()</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">filter_min</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">filter_max</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">days</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">stock_field</span> <span class="o">=</span> <span class="n">StockField</span><span class="o">.</span><span class="n">CHANGE_RATE</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">is_no_filter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">acc_filter</span><span class="o">.</span><span class="n">sort</span> <span class="o">=</span> <span class="n">SortDir</span><span class="o">.</span><span class="n">None</span>

<span class="n">ret</span><span class="p">,</span> <span class="n">ls</span> <span class="o">=</span> <span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_stock_filter</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="p">[</span><span class="n">simple_filter</span><span class="p">,</span> <span class="n">acc_filter</span><span class="p">])</span>
<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">RET_OK</span><span class="p">:</span>
    <span class="n">last_page</span><span class="p">,</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span> <span class="o">=</span> <span class="n">ls</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ret_list</span><span class="p">),</span> <span class="n">all_count</span><span class="p">,</span> <span class="n">ret_list</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;error: &#39;</span><span class="p">,</span> <span class="n">ls</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div><ul class="simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-stock-filter-limit"><span class="std std-ref">获取条件选股</span></a></li>
</ul>
</div></blockquote>
<ul class="last">
<li><p class="first">条件选股支持的板块或指数代码如下:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">代码</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HK.Motherboard</td>
<td>港股主板</td>
</tr>
<tr class="row-odd"><td>HK.GEM</td>
<td>港股创业板</td>
</tr>
<tr class="row-even"><td>HK.BK1911</td>
<td>主板H股</td>
</tr>
<tr class="row-odd"><td>HK.BK1912</td>
<td>创业板H股</td>
</tr>
<tr class="row-even"><td>US.NYSE</td>
<td>纽交所</td>
</tr>
<tr class="row-odd"><td>US.AMEX</td>
<td>美交所</td>
</tr>
<tr class="row-even"><td>US.NASDAQ</td>
<td>纳斯达克</td>
</tr>
<tr class="row-odd"><td>SH.3000000</td>
<td>上海主板</td>
</tr>
<tr class="row-even"><td>SZ.3000001</td>
<td>深证主板</td>
</tr>
<tr class="row-odd"><td>SZ.3000004</td>
<td>深证创业板</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">利用获取子板块列表函数get_plate_list获取子板块代码，条件选股支持的板块分别为1.港股的行业板块和概念板块。2.美股的行业板块。3.沪深的行业板块，概念板块和地域板块。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="get-ipo-list">
<h4>get_ipo_list<a class="headerlink" href="#get-ipo-list" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_ipo_list">
<code class="descname">get_ipo_list</code><span class="sig-paren">(</span><em>self</em>, <em>market</em><span class="sig-paren">)</span><a class="headerlink" href="#get_ipo_list" title="Permalink to this definition">¶</a></dt>
<dd><p>获取指定市场的ipo列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>market</strong> &#8211; 市场标识，注意这里不区分沪和深，输入沪或者深都会返回沪深市场的股票（这个是和客户端保持一致的）参见 <a class="reference external" href="Base_API.html#market">Market</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="5%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>str</td>
<td>股票代码，例如&#8217;HK.12345&#8217;</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>str</td>
<td>股票名称</td>
</tr>
<tr class="row-even"><td>list_time</td>
<td>str</td>
<td>上市日期，美股是预计上市日期</td>
</tr>
<tr class="row-odd"><td>list_timestamp</td>
<td>float</td>
<td>上市日期时间戳，美股是预计上市日期时间戳</td>
</tr>
<tr class="row-even"><td>apply_code</td>
<td>str</td>
<td>申购代码，A股适用</td>
</tr>
<tr class="row-odd"><td>issue_size</td>
<td>int</td>
<td>发行总数，A股适用；发行量，美股适用</td>
</tr>
<tr class="row-even"><td>online_issue_size</td>
<td>int</td>
<td>网上发行量，A股适用</td>
</tr>
<tr class="row-odd"><td>apply_upper_limit</td>
<td>int</td>
<td>申购上限，A股适用</td>
</tr>
<tr class="row-even"><td>apply_limit_market_value</td>
<td>int</td>
<td>顶格申购需配市值，A股适用</td>
</tr>
<tr class="row-odd"><td>is_estimate_ipo_price</td>
<td>bool</td>
<td>是否预估发行价，A股适用</td>
</tr>
<tr class="row-even"><td>ipo_price</td>
<td>float</td>
<td>发行价 预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</td>
</tr>
<tr class="row-odd"><td>industry_pe_rate</td>
<td>float</td>
<td>行业市盈率，A股适用</td>
</tr>
<tr class="row-even"><td>is_estimate_winning_ratio</td>
<td>bool</td>
<td>是否预估中签率，A股适用</td>
</tr>
<tr class="row-odd"><td>winning_ratio</td>
<td>float</td>
<td>中签率 该字段为百分比字段，默认不展示%，如20实际对应20%。预估值会因为募集资金、发行数量、发行费用等数据变动而变动，仅供参考。实际数据公布后会第一时间更新。A股适用</td>
</tr>
<tr class="row-even"><td>issue_pe_rate</td>
<td>float</td>
<td>发行市盈率，A股适用</td>
</tr>
<tr class="row-odd"><td>apply_time</td>
<td>str</td>
<td>申购日期字符串，A股适用</td>
</tr>
<tr class="row-even"><td>apply_timestamp</td>
<td>float</td>
<td>申购日期时间戳，A股适用</td>
</tr>
<tr class="row-odd"><td>winning_time</td>
<td>str</td>
<td>公布中签日期字符串，A股适用</td>
</tr>
<tr class="row-even"><td>winning_timestamp</td>
<td>float</td>
<td>公布中签日期时间戳，A股适用</td>
</tr>
<tr class="row-odd"><td>is_has_won</td>
<td>bool</td>
<td>是否已经公布中签号，A股适用</td>
</tr>
<tr class="row-even"><td>winning_num_data</td>
<td>str</td>
<td>中签号，A股适用。格式为类似：末&#8221;五&#8221;位数:12345,12346n末&#8221;六&#8221;位数:123456</td>
</tr>
<tr class="row-odd"><td>ipo_price_min</td>
<td>float</td>
<td>最低发售价，港股适用；最低发行价，美股适用</td>
</tr>
<tr class="row-even"><td>ipo_price_max</td>
<td>float</td>
<td>最高发售价，港股适用；最高发行价，美股适用</td>
</tr>
<tr class="row-odd"><td>list_price</td>
<td>float</td>
<td>上市价，港股适用</td>
</tr>
<tr class="row-even"><td>lot_size</td>
<td>int</td>
<td>每手股数</td>
</tr>
<tr class="row-odd"><td>entrance_price</td>
<td>float</td>
<td>入场费，港股适用</td>
</tr>
<tr class="row-even"><td>is_subscribe_status</td>
<td>bool</td>
<td>是否为认购状态，True-认购中，False-待上市</td>
</tr>
<tr class="row-odd"><td>apply_end_time</td>
<td>str</td>
<td>截止认购日期字符串，港股适用</td>
</tr>
<tr class="row-even"><td>apply_end_timestamp</td>
<td>float</td>
<td>截止认购日期时间戳 因需处理认购手续，富途认购截止时间会早于交易所公布的日期，港股适用</td>
</tr>
</tbody>
</table>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_ipo_list</span><span class="p">(</span><span class="n">Market</span><span class="o">.</span><span class="n">HK</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-ipo-list-limit"><span class="std std-ref">获取IPO列表的限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="get-future-info">
<h4>get_future_info<a class="headerlink" href="#get-future-info" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="get_future_info">
<code class="descname">get_future_info</code><span class="sig-paren">(</span><em>self</em>, <em>code_list</em><span class="sig-paren">)</span><a class="headerlink" href="#get_future_info" title="Permalink to this definition">¶</a></dt>
<dd><p>获取期货合约资料</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code_list</strong> &#8211; 期货</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(ret, data)<p>ret != RET_OK 返回错误字符串</p>
<p>ret == RET_OK data为DataFrame类型，字段如下:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="12%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>string</td>
<td>股票代码</td>
</tr>
<tr class="row-odd"><td>name</td>
<td>string</td>
<td>股票名称</td>
</tr>
<tr class="row-even"><td>owner</td>
<td>string</td>
<td>标的</td>
</tr>
<tr class="row-odd"><td>exchange</td>
<td>string</td>
<td>交易所</td>
</tr>
<tr class="row-even"><td>type</td>
<td>string</td>
<td>合约类型</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>float</td>
<td>合约规模</td>
</tr>
<tr class="row-even"><td>size_unit</td>
<td>string</td>
<td>合约规模单位</td>
</tr>
<tr class="row-odd"><td>price_currency</td>
<td>string</td>
<td>报价货币</td>
</tr>
<tr class="row-even"><td>price_unit</td>
<td>string</td>
<td>报价单位</td>
</tr>
<tr class="row-odd"><td>min_change</td>
<td>float</td>
<td>最小变动</td>
</tr>
<tr class="row-even"><td>min_change_unit</td>
<td>string</td>
<td>最小变动的单位</td>
</tr>
<tr class="row-odd"><td>trade_time</td>
<td>string</td>
<td>交易时间</td>
</tr>
<tr class="row-even"><td>time_zone</td>
<td>string</td>
<td>时区</td>
</tr>
<tr class="row-odd"><td>last_trade_time</td>
<td>string</td>
<td>最后交易时间，主连，当月，下月等期货没有该字段</td>
</tr>
<tr class="row-even"><td>exchange_format_url</td>
<td>string</td>
<td>交易所规格url</td>
</tr>
</tbody>
</table>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">get_future_info</span><span class="p">([</span><span class="s2">&quot;HK.MPImain&quot;</span><span class="p">,</span> <span class="s2">&quot;HK.HOImain&quot;</span><span class="p">]))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#get-future-info-limit"><span class="std std-ref">获取期货合约资料限制</span></a></li>
</ul>
</div>
</div>
<div class="section" id="request-trading-days">
<h4>request_trading_days<a class="headerlink" href="#request-trading-days" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="request_trading_days">
<code class="descname">request_trading_days</code><span class="sig-paren">(</span><em>self</em>, <em>market</em>, <em>start=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="headerlink" href="#request_trading_days" title="Permalink to this definition">¶</a></dt>
<dd><p>在线请求交易日,注意该交易日是通过自然日去除周末以及节假日得到，不包括临时休市数据</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>market</strong> &#8211; 市场类型，<a class="reference external" href="Base_API.html#tradedatemarket">TradeDateMarket</a></li>
<li><strong>start</strong> &#8211; 起始日期。例如&#8216;2018-01-01&#8217;。</li>
<li><strong>end</strong> &#8211; <p>结束日期。例如&#8216;2018-01-01&#8217;。
start和end的组合如下：</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">start类型</th>
<th class="head">end类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>str</td>
<td>start和end分别为指定的日期</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>str</td>
<td>start为end往前365天</td>
</tr>
<tr class="row-even"><td>str</td>
<td>None</td>
<td>end为start往后365天</td>
</tr>
<tr class="row-odd"><td>None</td>
<td>None</td>
<td>end为当前日期，start为end往前365天</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(ret_code, content)</p>
<p>成功时返回(RET_OK, content)，content为字典列表，失败时返回(RET_ERROR, content)，其中content是错误描述字符串</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="10%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>time</td>
<td>str</td>
<td>时间</td>
</tr>
<tr class="row-odd"><td>trade_date_type</td>
<td>str</td>
<td>标志是一天、上午半天、下午半天，参见 <a class="reference external" href="Base_API.html#tradedatetype">TradeDateType</a></td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-22&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-23&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;WHOLE&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;2018-12-24&#39;</span><span class="p">,</span> <span class="s1">&#39;trade_date_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MORNING&#39;</span><span class="p">}]</span>
</pre></div>
</div>
</dd></dl>

<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">quote_ctx</span><span class="o">.</span><span class="n">request_trading_days</span><span class="p">(</span><span class="n">TradeDateMarket</span><span class="o">.</span><span class="n">HK</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;2018-01-10&#39;</span><span class="p">))</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>接口限制请参见 <a class="reference internal" href="../protocol/intro.html#request-trading-day-limit"><span class="std std-ref">在线获取交易日</span></a></li>
</ul>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="sysnotifyhandlerbase-opend">
<h3>SysNotifyHandlerBase - OpenD通知回调<a class="headerlink" href="#sysnotifyhandlerbase-opend" title="Permalink to this headline">¶</a></h3>
<p>通知OpenD一些重要消息，类似连接断开等。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">SysNotifyTest</span><span class="p">(</span><span class="n">SysNotifyHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SysNotifyTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_pb</span><span class="p">)</span>
        <span class="n">notify_type</span><span class="p">,</span> <span class="n">sub_type</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;SysNotifyTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">SysNotifyTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="on-recv-rsp">
<h4>on_recv_rsp<a class="headerlink" href="#on-recv-rsp" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="on_recv_rsp">
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span><a class="headerlink" href="#on_recv_rsp" title="Permalink to this definition">¶</a></dt>
<dd><p>在收到OpenD通知推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">ret_code, notify_type, sub_type, msg</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="14%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">说明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>notify_type</td>
<td>str</td>
<td>通知类型，见 <a class="reference external" href="Base_API.html#sysnotifytype">SysNotifyType</a></td>
</tr>
<tr class="row-odd"><td>sub_type</td>
<td>str</td>
<td>消息类型，不同的notify_type，取值也不同，见下表</td>
</tr>
<tr class="row-even"><td>msg</td>
<td>str, dict</td>
<td>消息描述，不同的notify_type，取值也不同，见下表</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="26%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">notify_type</th>
<th class="head">sub_type</th>
<th class="head">msg</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SysNotifyType.NONE</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.GTW_EVENT</td>
<td>str, 取值见 <a class="reference external" href="Base_API.html#gtweventtype">GtwEventType</a></td>
<td>str，通知描述信息</td>
</tr>
<tr class="row-even"><td>SysNotifyType.PROGRAM_STATUS</td>
<td>str, 取值见 <a class="reference external" href="Base_API.html#programstatustype">ProgramStatusType</a></td>
<td>str，通知描述信息</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.CONN_STATUS</td>
<td>None</td>
<td><div class="first last line-block">
<div class="line">{&#8216;qot_logined&#8217;: bool, 是否已登录行情连接</div>
<div class="line">&#8216;trd_logined&#8217;: bool} 是否已登录交易连接</div>
</div>
</td>
</tr>
<tr class="row-even"><td>SysNotifyType.QOT_RIGHT</td>
<td>None</td>
<td><div class="first last line-block">
<div class="line">{&#8216;hk_qot_right&#8217;: str, 港股行情权限</div>
<div class="line">&#8216;cn_qot_right&#8217;: str, A股行情权限</div>
<div class="line">&#8216;us_qot_right&#8217;: str, 美股行情权限</div>
<div class="line">&#8216;hk_option_qot_right&#8217;: str, 港股期权行情权限</div>
<div class="line">&#8216;has_us_option_qot_right&#8217;: bool, 是否有美股期权行情权限</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>SysNotifyType.API_LEVEL</td>
<td>None</td>
<td>str, API用户等级</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="stockquotehandlerbase">
<h3>StockQuoteHandlerBase - 实时报价回调<a class="headerlink" href="#stockquotehandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的订阅股票的报价。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">StockQuoteTest</span><span class="p">(</span><span class="n">StockQuoteHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">StockQuoteTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;StockQuoteTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># StockQuoteTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">StockQuoteTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">QUOTE</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id6">
<h4>on_recv_rsp<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时报价推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">参见 <a class="reference internal" href="#get_stock_quote">get_stock_quote</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="orderbookhandlerbase">
<h3>OrderBookHandlerBase - 实时摆盘回调<a class="headerlink" href="#orderbookhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的实时摆盘。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">OrderBookTest</span><span class="p">(</span><span class="n">OrderBookHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">OrderBookTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;OrderBookTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># OrderBookTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">OrderBookTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">ORDER_BOOK</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id7">
<h4>on_recv_rsp<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实摆盘数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">参见 <a class="reference internal" href="#get_order_book">get_order_book</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="curklinehandlerbase-k">
<h3>CurKlineHandlerBase - 实时k线推送回调<a class="headerlink" href="#curklinehandlerbase-k" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的k线数据。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">CurKlineTest</span><span class="p">(</span><span class="n">CurKlineHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CurKlineTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;CurKlineTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># CurKlineTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">CurKlineTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">K_1M</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id8">
<h4>on_recv_rsp<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时k线数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">参见 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 的返回值，推送回调比 <a class="reference internal" href="#get_cur_kline">get_cur_kline</a> 少了市盈率和换手率字段</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="tickerhandlerbase">
<h3>TickerHandlerBase - 实时逐笔推送回调<a class="headerlink" href="#tickerhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的逐笔数据。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">TickerTest</span><span class="p">(</span><span class="n">TickerHandlerBase</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
                <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">TickerTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;TickerTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># TickerTest自己的处理逻辑</span>

                <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">TickerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">TICKER</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>行情连接断开重连后，OpenD拉取断开期间的逐笔数据（最多50根）并推送，可通过push_data_type字段区分</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id9">
<h4>on_recv_rsp<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">参见 <a class="reference internal" href="#get_rt_ticker">get_rt_ticker</a> 的返回值，回调比get_rt_ticker多返回一个字段：push_data_type，该字段指明数据来源，参见 <a class="reference external" href="Base_API.html#pushdatatype">PushDataType</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="rtdatahandlerbase">
<h3>RTDataHandlerBase - 实时分时推送回调<a class="headerlink" href="#rtdatahandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的分时数据。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">futu</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">RTDataTest</span><span class="p">(</span><span class="n">RTDataHandlerBase</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
                <span class="n">ret_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">RTDataTest</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
                        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest: error, msg: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;RTDataTest &quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="c1"># RTDataTest自己的处理逻辑</span>

                <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>

<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">RTDataTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">RT_DATA</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id10">
<h4>on_recv_rsp<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时逐笔数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">参见 <a class="reference internal" href="#get_rt_data">get_rt_data</a> 的返回值</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="brokerhandlerbase">
<h3>BrokerHandlerBase - 实时经纪推送回调<a class="headerlink" href="#brokerhandlerbase" title="Permalink to this headline">¶</a></h3>
<p>异步处理推送的经纪数据。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BrokerTest</span><span class="p">(</span><span class="n">BrokerHandlerBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_recv_rsp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rsp_str</span><span class="p">):</span>
        <span class="n">ret_code</span><span class="p">,</span> <span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">BrokerTest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">on_recv_rsp</span><span class="p">(</span><span class="n">rsp_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret_code</span> <span class="o">!=</span> <span class="n">RET_OK</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: error, msg: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">RET_ERROR</span><span class="p">,</span> <span class="n">data</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BrokerTest: stock: {} data: {} &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err_or_stock_code</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>  <span class="c1"># BrokerTest自己的处理逻辑</span>

        <span class="k">return</span> <span class="n">RET_OK</span><span class="p">,</span> <span class="n">data</span>


<span class="n">quote_ctx</span> <span class="o">=</span> <span class="n">OpenQuoteContext</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">11111</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">BrokerTest</span><span class="p">()</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">set_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s1">&#39;HK.00700&#39;</span><span class="p">],</span> <span class="p">[</span><span class="n">SubType</span><span class="o">.</span><span class="n">BROKER</span><span class="p">])</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">quote_ctx</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="id11">
<h4>on_recv_rsp<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt>
<code class="descname">on_recv_rsp</code><span class="sig-paren">(</span><em>self</em>, <em>rsp_pb</em><span class="sig-paren">)</span></dt>
<dd><p>在收到实时经纪数据推送后会回调到该函数，使用者需要在派生类中覆盖此方法</p>
<p>注意该回调是在独立子线程中</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rsp_pb</strong> &#8211; 派生类中不需要直接处理该参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">成功时返回(RET_OK, stock_code, [bid_frame_table, ask_frame_table]), 相关frame table含义见 <a class="reference internal" href="#get_broker_queue">get_broker_queue</a> 的返回值说明<p>失败时返回(RET_ERROR, ERR_MSG, None)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Trade_API.html" class="btn btn-neutral float-right" title="交易API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Base_API.html" class="btn btn-neutral" title="基础API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, futu.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.18',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
    console.log("Layout By futu-api");
</script>


</body>
</html>