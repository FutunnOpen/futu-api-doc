范例工程
==========

 .. _cpp-futu-api: https://github.com/FutunnOpen/cpp-futu-api 

 .. _SetClientInfo: api_base.html#id3
 .. _SetProtoFormatType: api_base.html#id4
 .. _SetRSAPrivateKey: api_base.html#id5
 .. _InitConnect: api_base.html#id6
 .. _OnInitConnect: api_base.html#id7
 .. _IsConnected: api_base.html#id8
 .. _Close: api_base.html#id9
 .. _Send: api_base.html#id10
 .. _OnConnect: api_base.html#id11
 .. _OnDisConnect: api_base.html#id12
 .. _OnTimeTicker: api_base.html#id13
 .. _OnReply: api_base.html#id14
 .. _OnPush: api_base.html#id15

 .. _Example-SetClientInfo: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-SetProtoFormatType: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-SetRSAPrivateKey: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-InitConnect: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnInitConnect: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-IsConnected: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-Close: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-Send: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnConnect: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnDisConnect: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnTimeTicker: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnReply: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30
 .. _Example-OnPush: https://github.com/FutunnOpen/cpp-futu-api/blob/master/FutuOpenDClient/QuoteHandler.cpp#L30

 .. _GetGlobalState.proto: ../protocol/base_define.html#getglobalstate-proto-1002
 .. _Qot_Sub.proto: ../protocol/quote_protocol.html#qot-sub-proto-3001
 .. _Qot_RegQotPush.proto: ../protocol/quote_protocol.html#qot-regqotpush-proto-3002
 .. _Qot_GetSubInfo.proto: ../protocol/quote_protocol.html#qot-getsubinfo-proto-3003
 .. _Qot_GetTicker.proto: ../protocol/quote_protocol.html#qot-getticker-proto-3010
 .. _Qot_GetBasicQot.proto: ../protocol/quote_protocol.html#qot-getbasicqot-proto-3004
 .. _Qot_GetOrderBook.proto: ../protocol/quote_protocol.html#qot-getorderbook-proto-3012
 .. _Qot_GetKL.proto: ../protocol/quote_protocol.html#qot-getkl-proto-3006k
 .. _Qot_GetRT.proto: ../protocol/quote_protocol.html#qot-getrt-proto-3008
 .. _Qot_GetBroker.proto: ../protocol/quote_protocol.html#qot-getbroker-proto-3014
 .. _Qot_GetHistoryKL.proto: ../protocol/quote_protocol.html#qot-gethistorykl-proto-3100k
 .. _Qot_GetHistoryKLPoints.proto: ../protocol/quote_protocol.html#qot-gethistoryklpoints-proto-3101k
 .. _Qot_GetRehab.proto: ../protocol/quote_protocol.html#qot-getrehab-proto-3102
 .. _Qot_RequestHistoryKL.proto: ../protocol/quote_protocol.html#qot-requesthistorykl-proto-3103k
 .. _Qot_GetTradeDate.proto: ../protocol/quote_protocol.html#qot-gettradedate-proto-3200

 .. _Qot_GetStaticInfo.proto: ../protocol/quote_protocol.html#qot-getstaticinfo-proto-3202
 .. _Qot_GetSecuritySnapshot.proto: ../protocol/quote_protocol.html#qot-getsecuritysnapshot-proto-3203
 .. _Qot_GetPlateSet.proto: ../protocol/quote_protocol.html#qot-getplateset-proto-3204
 .. _Qot_GetPlateSecurity.proto: ../protocol/quote_protocol.html#qot-getplatesecurity-proto-3205
 .. _Qot_GetReference.proto: ../protocol/quote_protocol.html#qot-getreference-proto-3206
 .. _Qot_GetOwnerPlate.proto: ../protocol/quote_protocol.html#qot-getownerplate-proto-3207
 .. _Qot_GetHoldingChangeList.proto: ../protocol/quote_protocol.html#qot-getholdingchangelist-proto-3208
 .. _Qot_GetOptionChain.proto: ../protocol/quote_protocol.html#qot-getoptionchain-proto-3209
 .. _Trd_GetAccList.proto: ../protocol/trade_protocol.html#trd-getacclist-proto-2001
 .. _Trd_UnlockTrade.proto: ../protocol/trade_protocol.html#trd-unlocktrade-proto-2005
 .. _Trd_SubAccPush.proto: ../protocol/trade_protocol.html#trd-subaccpush-proto-2008
 .. _Trd_GetFunds.proto: ../protocol/trade_protocol.html#trd-getfunds-proto-2101
 .. _Trd_GetPositionList.proto: ../protocol/trade_protocol.html#trd-getpositionlist-proto-2102
 .. _Trd_GetMaxTrdQtys.proto: ../protocol/trade_protocol.html#trd-getmaxtrdqtys-proto-2111
 .. _Trd_GetOrderList.proto: ../protocol/trade_protocol.html#trd-getorderlist-proto-2201
 .. _Trd_PlaceOrder.proto: ../protocol/trade_protocol.html#trd-placeorder-proto-2202
 .. _Trd_ModifyOrder.proto: ../protocol/trade_protocol.html#trd-modifyorder-proto-2205
 .. _Trd_GetOrderFillList.proto: ../protocol/trade_protocol.html#trd-getorderfilllist-proto-2211
 .. _Trd_GetHistoryOrderList.proto: ../protocol/trade_protocol.html#trd-gethistoryorderlist-proto-2221
 .. _Trd_GetHistoryOrderFillList.proto: ../protocol/trade_protocol.html#trd-gethistoryorderfilllist-proto-2222

 .. _FutuOpenD: ../intro/FutuOpenDGuide.html

-------------------------------------------------------------

该工程是对 cpp-futu-api_ (暂未开源) 接口通道的具体应用，在实现上二次封装futu-api的协议的业务接口，
在交互体验上采取简便的命令行模式，直观展现了协议接口的输入参数及输出数据。 

FTAPI_Sample - 范例
---------------------

..  cpp:class:: FTAPI_Sample : public FTAPI_Client

 提供的范例，包含一些接口的封装和使用

 ====================      ==================================      ============================
 基类接口                    说明                                    示例
 ====================      ==================================      ============================
 SetClientInfo_            设置api的client信息                       Example-SetClientInfo_
 SetProtoFormatType_       协议格式类型                              Example-SetProtoFormatType_
 SetRSAPrivateKey_         设置RSA私钥                               Example-SetRSAPrivateKey_
 InitConnect_              初始化连接                                Example-InitConnect_
 OnInitConnect_            初始化连接结果回调函数                     Example-OnInitConnect_
 IsConnected_              是否与OpenD连接成功                       Example-IsConnected_
 Close_                    执行关闭与OpenD的连接，异步关闭             Example-Close_
 Send_                     发送与OpenD的API协议                      Example-Send_
 OnConnect_                连接结果回调                              Example-OnConnect_
 OnDisConnect_             发生断线回调                              Example-OnDisConnect_
 OnTimeTicker_             每秒定时回调                              Example-OnTimeTicker_
 OnReply_                  收到(请求)应答协议                         Example-OnReply_
 OnPush_                   收到推送协议                              Example-OnPush_
 ====================      ==================================      ============================

-------------------------------

如何运行
------------

 1.  暂时只支持windows平台

 2. 运行前需先启动 FutuOpenD_
 
 3. 需输入启动参数，传入连接的IP地址与端口

  **参数项：**

  ====================   ===================   ===========================================
  键值                    说明				          是否可选参数项
  ====================   ===================   ===========================================
  host                   主机地址			          是，不设置则默认127.0.0.1
  port                   端口                   是，不设置则默认11111
  ====================   ===================   ===========================================

  **命令格式：**

  FTAPI_Sample.exe -host=127.0.0.1 -port=11111

命令行清单
-------------------------------
 
 ===========================    ===============================    ========================================
 命令                             说明                                 相关协议
 ===========================    ===============================    ========================================
 help                           查看命令
 get_global_state               订阅股票                               GetGlobalState.proto_
 sub                            订阅股票                               Qot_Sub.proto_
 reg_push                       注册推送                               Qot_RegQotPush.proto_
 get_sub_info                   获取订阅信息                            Qot_GetSubInfo.proto_
 get_ticker                     获取逐笔                               Qot_GetTicker.proto_
 get_basic_qot                  获取股票基本行情                        Qot_GetBasicQot.proto_
 get_orderbook                  获取买卖盘                              Qot_GetOrderBook.proto_
 get_kl                         获取K线                                Qot_GetKL.proto_
 get_rt                         获取分时                                Qot_GetRT.proto_
 get_broker                     获取经纪队列                            Qot_GetBroker.proto_
 get_history_kl                 获取历史K线                             Qot_GetHistoryKL.proto_
 get_history_kl_points          获取多只股票历史单点K线                   Qot_GetHistoryKLPoints.proto_
 get_rehab                      拉取复权信息                            Qot_GetRehab.proto_
 request_history_kl             拉取历史K线，不读本地历史数据DB           Qot_RequestHistoryKL.proto_
 get_trade_date                 获取市场交易日                           Qot_GetTradeDate.proto_
 get_suspend                    获取股票停牌信息
 get_static_info                获取股票静态信息                         Qot_GetStaticInfo.proto_
 get_security_snapshot          获取股票快照                             Qot_GetSecuritySnapshot.proto_
 get_plate_set                  获取板块集合下的板块                      Qot_GetPlateSet.proto_
 get_plate_security             获取板块下的股票                         Qot_GetPlateSecurity.proto_
 get_reference                  获取正股相关股票，暂时只有窝轮             Qot_GetReference.proto_
 get_owner_plate                获取股票所属板块                         Qot_GetOwnerPlate.proto_
 get_holding_change_list        获取大股东持股变化列表                    Qot_GetHoldingChangeList.proto_
 get_option_chain               获取期权链                               Qot_GetOptionChain.proto_
 get_acclist                    获取交易账户列表                          Trd_GetAccList.proto_
 unlock_trade                   解锁或锁定交易                           Trd_UnlockTrade.proto_
 sub_acc_push                   订阅接收交易账户的推送数据                 Trd_SubAccPush.proto_
 get_funds                      获取账户资金                             Trd_GetFunds.proto_
 get_positionlist               获取账户持仓                             Trd_GetPositionList.proto_
 get_max_trd_qtys               获取最大交易数量                         Trd_GetMaxTrdQtys.proto_
 get_orderlist                  获取订单列表                             Trd_GetOrderList.proto_
 place_order                    下单                                    Trd_PlaceOrder.proto_
 modify_order                   修改订单                                Trd_ModifyOrder.proto_
 get_orderfill_list             获取成交列表                            Trd_GetOrderFillList.proto_
 get_history_orderlist          获取历史订单列表                        Trd_GetHistoryOrderList.proto_
 get_history_orderfill_list     获取历史成交列表                        Trd_GetHistoryOrderFillList.proto_
 clear                          清空屏幕，仅对windows有效
 exit                           退出程序
 ===========================    ===============================    ========================================
 
注意事项
-------------------------------

 1. 为方便输入，减小命令行输入量，我们为某些参数提供默认值，命令行输入时只需修改想要修改的字段即可
 2. 由于命令行输入方式有限，因此我们用一些特殊的符号来表示结构体，列表以及一些特殊数字等

 =====   =====================================================================
 符号     说明
 =====   =====================================================================
 ,       结构体分隔符，如 hk_security,00700 则分别表示结构体security的前两个数据成员
 ;       参数列表连接符，如想同时订阅逐笔和摆盘，可以这样输入 ticker;orderbook
 ?       对于一些因个人账号不同而不同的值我们用 ? 表示，如userID
 X       表示数字，如出现 X.XXX 这样的格式则表示精度为3的小数
 =====   =====================================================================

 .. note::

    *   符号均为半角
    *   因为输入方式有限，命令行输入参数的方式与协议存在细微差异，因此实际使用时，一切以协议为准，比如有些协议是Optional字段，
        实际使用可以不用设置，但命令行输入参数的方式只能全部作为“requried”输入

 3. 为了方便，我们为某些参数提供动态更新，原理是通过调用前置接口来获取参数值，因此调用某些接口前需先调用前置接口才能动态更新

 ==============   =========================
 参数              前置接口
 ==============   =========================
 packetID         连接成功
 userID           连接成功
 nextReqKey       request_history_kl
 accIDList        get_acc_list
 header           get_acc_list
 orderID          place_order
 trdCode          get_acc_list
 trdSecMarket     get_acc_list
 ==============   =========================

 .. note::

    *   对于交易公共参数头header，我们只获取虚拟环境的业务账号，因此不必担心